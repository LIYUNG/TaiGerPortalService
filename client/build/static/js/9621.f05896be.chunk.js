"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[9621],{5715:function(e,t,n){n.r(t);var s=n(18489),r=n(35531),o=n(27853),i=n(84531),a=n(78932),l=n(38128),d=n(47313),c=n(44030),u=n(63849),h=n(31616),f=n(65832),p=n(93298),x=n(76935),Z=n(41965),j=n(54991),m=n(26454),D=n(31974),v=n(94611),S=n(86450),y=n(29021),g=n(51767),_=n(94395),k=n(51426),C=n(46417),w=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={error:null,timeouterror:null,unauthorizederror:null,isLoaded:!1,data:null,success:!1,documentlists:[],doc_id_toBeDelete:"",doc_title_toBeDelete:"",doc_title:"",category:"internal",SetDeleteDocModel:!1,isEdit:!1,expand:!0,editorState:"",accordionKeys:!Object.keys(window.checklist)||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(Object.keys(window.checklist).length).fill().map((function(e,t){return t}))},e.singleExpandtHandler=function(t){var n=(0,r.Z)(e.state.accordionKeys);n[t]=n[t]!==t?t:-1,e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{accordionKeys:n})}))},e.AllCollapsetHandler=function(){var t=Object.keys(window.checklist);e.setState((function(n){return(0,s.Z)((0,s.Z)({},n),{},{expand:!1,accordionKeys:!t||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[-1]:new Array(t.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){var t=Object.keys(window.checklist);e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{expand:!0,accordionKeys:t&&new Array(t.length).fill().map((function(e,t){return t}))})}))},e.handleChange_doc_title=function(t){var n=t.target.value;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_title:n})}))},e.handleClick=function(){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickAdd=function(e){e.preventDefault()},e.handleChange_category=function(t){t.preventDefault();var n=t.target.value;e.setState({category:n})},e.handleDeleteDoc=function(t){(0,k.R4)(e.state.doc_id_toBeDelete).then((function(t){var n=t.data.success,s=(0,r.Z)(e.state.documentlists),o=s.findIndex((function(t){return t._id.toString()===e.state.doc_id_toBeDelete}));o>-1&&s.splice(o,1),n?e.setState({success:n,documentlists:s,SetDeleteDocModel:!1,isEdit:!1,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})}))},e.openDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_id_toBeDelete:t._id,doc_title_toBeDelete:t.title,SetDeleteDocModel:!0})}))},e.closeDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{SetDeleteDocModel:!1})}))},e.handleClickCancel=function(t){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickSave=function(t,n){t.preventDefault();var o=JSON.stringify(n),i={title:e.state.doc_title,category:e.state.category,prop:e.props.item,text:o};(0,k.lL)(i).then((function(t){var n=t.data,s=n.success,o=n.data,i=(0,r.Z)(e.state.documentlists);i.push(o),s?e.setState({success:s,documentlists:i,editorState:"",isEdit:!e.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,k.Jc)().then((function(t){var n=t.data,s=n.data,r=n.success;r?e.setState({isLoaded:!0,documentlists:s,success:r}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,C.jsx)(_.Z,{to:"/dashboard/default"});var t=this.state,n=t.unauthorizederror,s=t.timeouterror,r=t.isLoaded,o=t.pagenotfounderror;if(s)return(0,C.jsx)("div",{children:(0,C.jsx)(v.Z,{})});if(n)return(0,C.jsx)("div",{children:(0,C.jsx)(S.Z,{})});if(o)return(0,C.jsx)("div",{children:(0,C.jsx)(y.Z,{})});if(!r)return(0,C.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,C.jsx)(c.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})});var i=Object.keys(window.internaldocumentlist),a=function(t){var n={};return n["".concat(t)]=e.state.documentlists.filter((function(e){return e.category===t})),n["".concat(t)].map((function(t,n){return(0,C.jsx)(m.Z,{idx:n,path:"/docs/internal/search",document:t,role:e.props.user.role,openDeleteDocModalWindow:e.openDeleteDocModalWindow},n)}))};return(0,C.jsxs)(j.Z,{children:[(0,C.jsx)(u.Z,{className:"sticky-top ",children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(f.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,C.jsx)(f.Z.Header,{text:"dark",children:(0,C.jsx)(f.Z.Title,{children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:"All Internal Documentations"}),(0,C.jsx)(h.Z,{md:{span:2,offset:0},children:this.state.expand?(0,C.jsx)(p.Z,{size:"sm",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,C.jsx)(p.Z,{size:"sm",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})})]})})})})})}),(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{sm:12,children:(0,C.jsx)(f.Z,{className:"mb-2 mx-0",children:this.state.isEdit?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(f.Z.Body,{children:[(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(x.Z.Group,{controlId:"decided",children:(0,C.jsxs)(x.Z.Control,{as:"select",onChange:function(t){return e.handleChange_category(t)},children:[(0,C.jsx)("option",{value:"",children:"Select Document Category"}),g.pD.map((function(e,t){return(0,C.jsx)("option",{value:e.key,children:e.value},t)}))]})})})})," ",(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(x.Z.Group,{controlId:"doc_title",className:"mb-4",children:(0,C.jsx)(x.Z.Control,{type:"text",placeholder:"Title",defaultValue:"",onChange:function(t){return e.handleChange_doc_title(t)}})})})}),(0,C.jsx)(D.Z,{category:this.state.category,doc_title:this.state.doc_title,editorState:this.state.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.handleClickCancel,role:this.props.role})]})}):(0,C.jsxs)(f.Z.Body,{children:[i.map((function(e,t){return(0,C.jsxs)(u.Z,{className:"mb-4",children:[(0,C.jsxs)("h5",{children:["- ",window.internaldocumentlist["".concat(e)]]}),a(e)]},t)})),("Admin"===this.props.user.role||"Agent"===this.props.user.role)&&(0,C.jsx)(p.Z,{onClick:this.handleClick,children:"Add"})]})})})}),(0,C.jsxs)(Z.Z,{show:this.state.SetDeleteDocModel,onHide:this.closeDeleteDocModalWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,C.jsx)(Z.Z.Header,{children:(0,C.jsx)(Z.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,C.jsxs)(Z.Z.Body,{children:["Do you want to delete documentation of title:"," ",this.state.doc_title_toBeDelete,"?"]}),(0,C.jsxs)(Z.Z.Footer,{children:[(0,C.jsx)(p.Z,{disabled:!r,onClick:this.handleDeleteDoc,children:"Yes"}),(0,C.jsx)(p.Z,{onClick:this.closeDeleteDocModalWindow,children:"No"})]})]})]})}}]),n}(d.Component);t.default=w}}]);