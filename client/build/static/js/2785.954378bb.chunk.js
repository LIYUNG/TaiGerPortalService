"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2785],{50099:function(e,t,s){var r=s(35531),n=s(27853),i=s(84531),a=s(78932),l=s(66621),o=s(47313),d=s(58050),c=s(72880),u=s(88815),h=s(29678),p=s.n(h),m=s(54991),f=s(12401),x=s(46417),j=function(e){(0,a.Z)(s,e);var t=(0,l.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(s,[{key:"render",value:function(){var e,t,s,n,i,a=this,l=[];return this.state.isOption&&(s=(0,x.jsx)("div",{className:"card-header-right",children:(0,x.jsxs)(d.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,x.jsx)(d.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,x.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,x.jsxs)(d.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,x.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,x.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,x.jsx)("i",{className:"feather icon-refresh-cw"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Reload "})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,x.jsx)("i",{className:"feather icon-trash"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Remove "})]})]})]})})),n=(0,x.jsxs)(c.Z.Header,{children:[(0,x.jsx)(c.Z.Title,{as:"h5",children:this.props.title}),s]}),this.state.fullCard&&(l=[].concat((0,r.Z)(l),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(l=[].concat((0,r.Z)(l),["card-load"]),t=(0,x.jsx)("div",{className:"card-loader",children:(0,x.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(l=[].concat((0,r.Z)(l),["d-none"])),this.props.cardClass&&(l=[].concat((0,r.Z)(l),[this.props.cardClass])),i=(0,x.jsxs)(c.Z,{className:l.join(" "),style:e,children:[n,(0,x.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,x.jsx)("div",{children:(0,x.jsx)(c.Z.Body,{children:this.props.children})})}),t]}),(0,x.jsx)(m.Z,{children:i})}}]),s}(o.Component);t.Z=p()(j)},62785:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var r=s(27853),n=s(84531),i=s(78932),a=s(66621),l=s(47313),o=s(44030),d=s(63849),c=s(31616),u=s(72880),h=s(54991),p=s(51426),m=s(93298),f=s(83109),x=s(465),j=s(57864),Z=s(46417),v=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){for(var e,t=this,s=Object.keys(this.props.templatelist),r={},n=0;n<s.length;n++)r[s[n]]="missing";for(var i=0;i<this.props.templates.length;i++)r[this.props.templates[i].category_name]="uploaded";return e=this.props.templatelist.map((function(e,s){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{children:e.name}),"Student"!==t.props.role?"uploaded"===r[e.prop]?(0,Z.jsxs)(Z.Fragment,{children:["Admin"===t.props.role?(0,Z.jsx)("td",{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(m.Z,{variant:"danger",size:"sm",type:"submit",title:"Delete",disabled:t.props.isLoaded,onClick:function(s){return t.props.onDeleteTemplateFile(s,e.prop)},children:(0,Z.jsx)(j.VPh,{size:16})})})}):(0,Z.jsx)("td",{}),(0,Z.jsx)("td",{}),(0,Z.jsx)("td",{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(f.Z,{onSubmit:function(s){return t.props.onDownloadFilefromstudent(s,e.prop)},children:(0,Z.jsx)(f.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,Z.jsx)(m.Z,{size:"sm",type:"submit",children:"Download"})})})})})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("td",{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(f.Z,{onChange:function(e){return t.props.onFileChange(e)},onClick:function(e){return e.target.value=null},children:(0,Z.jsx)(f.Z.File,{id:t.props.userId,children:(0,Z.jsx)(f.Z.File.Input,{})})})})}),(0,Z.jsx)("td",{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(f.Z,{onSubmit:function(s){return t.props.submitFile(s,e.prop)},children:(0,Z.jsx)(f.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,Z.jsx)(m.Z,{size:"sm",type:"submit",children:"Upload"})})})})}),(0,Z.jsx)("td",{})]}):"uploaded"===r[e.prop]?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("td",{}),(0,Z.jsx)("td",{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(f.Z,{onSubmit:function(s){return t.props.onDownloadFilefromstudent(s,e.prop)},children:(0,Z.jsx)(f.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,Z.jsx)(m.Z,{size:"sm",type:"submit",children:"Download"})})})})}),(0,Z.jsx)("td",{})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("td",{}),(0,Z.jsx)("td",{}),(0,Z.jsx)("td",{})]})]},s+1)})),(0,Z.jsx)(x.Z,{variant:"dark",text:"light",className:"my-0 mx-0",children:(0,Z.jsx)("tbody",{children:e})})}}]),s}(l.Component),b=v,C=s(94611),w=s(86450),g=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:null,file:"",isLoaded:!1,students:[],templates:null,success:!1},e.onFileChange=function(t){e.setState({file:t.target.files[0]})},e.onSubmitFile=function(t,s){var r=new FormData;r.append("file",e.state.file),(0,p.b3)(s,r).then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.submitFile=function(t,s){""===e.state.file?(t.preventDefault(),alert("Please select file")):(t.preventDefault(),e.onSubmitFile(t,s))},e.onDeleteTemplateFile=function(t,s){t.preventDefault(),(0,p.w1)(s).then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onDownloadFilefromstudent=function(e,t){e.preventDefault(),(0,p.Bl)(t).then((function(e){var t=e.headers["content-disposition"].split('"')[1],s=e.data;if(0!==s.size){var r=t.split(".");if("pdf"===(r=r.pop())){var n=window.URL.createObjectURL(new Blob([s],{type:"application/pdf"}));window.open(n,"_blank").document.title=t}else{var i=window.URL.createObjectURL(new Blob([s])),a=document.createElement("a");a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}}}),(function(e){alert("The file is not available.")}))},e}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,p.uR)().then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"getFileNameFromContentDisposition",value:function(e){if(!e)return null;var t=e.match(/filename="?([^"]+)"?/);return t?t[1]:null}},{key:"render",value:function(){var e=this.state,t=e.unauthorizederror,s=e.timeouterror,r=e.isLoaded;if(s)return(0,Z.jsx)("div",{children:(0,Z.jsx)(C.Z,{})});if(t)return(0,Z.jsx)("div",{children:(0,Z.jsx)(w.Z,{})});var n={position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"};return r||this.state.templates?"Student"===this.props.user.role||"Admin"===this.props.user.role||"Editor"===this.props.user.role||"Agent"===this.props.user.role?(0,Z.jsx)(h.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsxs)(u.Z,{className:"my-0 mx-0",bg:"primary",text:"white",children:[(0,Z.jsx)(u.Z.Header,{children:(0,Z.jsx)(u.Z.Title,{className:"my-0 mx-0 text-light",children:"Download TaiGer Document Templates"})}),!r&&(0,Z.jsx)("div",{style:n,children:(0,Z.jsx)(o.Z,{animation:"border",role:"status",children:(0,Z.jsx)("span",{className:"visually-hidden"})})}),(0,Z.jsx)(b,{role:this.props.user.role,userId:this.props.user._id,student:this.state.student,templates:this.state.templates,submitFile:this.submitFile,onFileChange:this.onFileChange,templatelist:window.templatelist,onDeleteTemplateFile:this.onDeleteTemplateFile,onDownloadFilefromstudent:this.onDownloadFilefromstudent})]})})})}):(0,Z.jsx)(h.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)("div",{children:" This is for Premium only. Please contact our sales! "})})})}):(0,Z.jsx)("div",{style:n,children:(0,Z.jsx)(o.Z,{animation:"border",role:"status",children:(0,Z.jsx)("span",{className:"visually-hidden"})})})}}]),s}(l.Component),y=g},94611:function(e,t,s){var r=s(27853),n=s(84531),i=s(78932),a=s(66621),l=s(47313),o=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"Time out error. Please login again!"})})})})}}]),s}(l.Component);t.Z=p},86450:function(e,t,s){var r=s(27853),n=s(84531),i=s(78932),a=s(66621),l=s(47313),o=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),s}(l.Component);t.Z=p},465:function(e,t,s){var r=s(1368),n=s(38321),i=s(46123),a=s.n(i),l=s(47313),o=s(68524),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],c=l.forwardRef((function(e,t){var s=e.bsPrefix,i=e.className,c=e.striped,u=e.bordered,h=e.borderless,p=e.hover,m=e.size,f=e.variant,x=e.responsive,j=(0,n.Z)(e,d),Z=(0,o.vE)(s,"table"),v=a()(i,Z,f&&Z+"-"+f,m&&Z+"-"+m,c&&Z+"-striped",u&&Z+"-bordered",h&&Z+"-borderless",p&&Z+"-hover"),b=l.createElement("table",(0,r.Z)({},j,{className:v,ref:t}));if(x){var C=Z+"-responsive";return"string"===typeof x&&(C=C+"-"+x),l.createElement("div",{className:C},b)}return b}));t.Z=c}}]);