"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[9621],{26454:function(e,t,n){var s=n(18489),r=n(27853),i=n(84531),o=n(78932),a=n(38128),d=n(47313),l=n(94611),c=n(86450),u=n(52500),h=(n(79489),n(37062)),p=(n(31974),n(85463),n(43636),n(4901)),f=n(44030),Z=n(63849),x=n(31616),m=n(51426),j=n(46417),v=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={timeouterror:null,unauthorizederror:null,student:e.props.student,deleteFileWarningModel:!1,SetAsFinalFileModel:!1,Requirements_Modal:!1,in_edit_mode:!1,student_id:"",doc_thread_id:"",applicationId:"",editorState:null,ConvertedContent:"",isLoaded:!1,requirements:"",file:"",isThreadExisted:!1},e.handleClickEdit=function(t){t.preventDefault(),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!0})}))},e.handleClickCancel=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e.handleClickSave=function(t,n){t.preventDefault();var r=JSON.stringify((0,u.convertToRaw)(n.getCurrentContent())),i={prop:e.props.item,text:r};(0,m.Pd)(i).then((function(t){var s=t.data,r=s.success;s.data;r?e.setState({success:r,editorState:n,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e.handleEditorChange=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{editorState:t})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=null;if(this.props.message){var t=(0,u.convertFromRaw)(JSON.parse(this.props.message));e=u.EditorState.createWithContent(t)}else e=u.EditorState.createEmpty();this.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{editorState:e,ConvertedContent:e,isLoaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.timeouterror,s=t.unauthorizederror,r=(t.error,t.isLoaded);if(n)return(0,j.jsx)("div",{children:(0,j.jsx)(l.Z,{})});if(s)return(0,j.jsx)("div",{children:(0,j.jsx)(c.Z,{})});return r||this.state.student?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Z.Z,{children:(0,j.jsxs)(x.Z,{sm:10,children:[(0,j.jsx)(p.apv,{size:24,color:"red",title:"Delete",style:{cursor:"pointer"},onClick:function(){return e.props.openDeleteDocModalWindow(e.props.document)}}),this.props.idx,". ",(0,j.jsx)(h.Z,{to:"".concat(this.props.path,"/").concat(this.props.document._id),children:this.props.document.title})]})})}):(0,j.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,j.jsx)(f.Z,{animation:"border",role:"status",children:(0,j.jsx)("span",{className:"visually-hidden"})})})}}]),n}(d.Component);t.Z=v},5715:function(e,t,n){n.r(t);var s=n(18489),r=n(35531),i=n(27853),o=n(84531),a=n(78932),d=n(38128),l=n(47313),c=n(44030),u=n(63849),h=n(31616),p=n(65832),f=n(93298),Z=n(67203),x=n(47939),m=n(94395),j=n(54991),v=n(26454),_=n(31974),S=n(51767),y=n(66417),D=n(51426),C=n(46417),g=function(e){(0,a.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var o=arguments.length,a=new Array(o),d=0;d<o;d++)a[d]=arguments[d];return(e=t.call.apply(t,[this].concat(a))).state={error:null,isLoaded:!1,data:null,success:!1,documentlists:[],doc_id_toBeDelete:"",doc_title_toBeDelete:"",doc_title:"",category:"internal",SetDeleteDocModel:!1,isEdit:!1,expand:!0,editorState:"",accordionKeys:!Object.keys(window.checklist)||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(Object.keys(window.checklist).length).fill().map((function(e,t){return t})),res_status:0},e.singleExpandtHandler=function(t){var n=(0,r.Z)(e.state.accordionKeys);n[t]=n[t]!==t?t:-1,e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{accordionKeys:n})}))},e.AllCollapsetHandler=function(){var t=Object.keys(window.checklist);e.setState((function(n){return(0,s.Z)((0,s.Z)({},n),{},{expand:!1,accordionKeys:!t||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[-1]:new Array(t.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){var t=Object.keys(window.checklist);e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{expand:!0,accordionKeys:t&&new Array(t.length).fill().map((function(e,t){return t}))})}))},e.handleChange_doc_title=function(t){var n=t.target.value;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_title:n})}))},e.handleClick=function(){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickAdd=function(e){e.preventDefault()},e.handleChange_category=function(t){t.preventDefault();var n=t.target.value;e.setState({category:n})},e.handleDeleteDoc=function(t){(0,D.R4)(e.state.doc_id_toBeDelete).then((function(t){var n=t.data.success,s=t.status,i=(0,r.Z)(e.state.documentlists),o=i.findIndex((function(t){return t._id.toString()===e.state.doc_id_toBeDelete}));o>-1&&i.splice(o,1),n?e.setState({success:n,documentlists:i,SetDeleteDocModel:!1,isEdit:!1,isLoaded:!0,res_status:s}):e.setState({isLoaded:!0,res_status:s})}),(function(t){e.setState({error:t})}))},e.openDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_id_toBeDelete:t._id,doc_title_toBeDelete:t.title,SetDeleteDocModel:!0})}))},e.closeDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{SetDeleteDocModel:!1})}))},e.handleClickCancel=function(t){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickSave=function(t,n){t.preventDefault();var i=JSON.stringify(n),o={title:e.state.doc_title,category:e.state.category,prop:e.props.item,text:i};(0,D.lL)(o).then((function(t){var n=t.data,s=n.success,i=n.data,o=t.status,a=(0,r.Z)(e.state.documentlists);a.push(i),s?e.setState({success:s,documentlists:a,editorState:"",isEdit:!e.state.isEdit,isLoaded:!0,res_status:o}):e.setState({isLoaded:!0,res_status:o})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,D.Jc)().then((function(t){var n=t.data,s=n.data,r=n.success,i=t.status;r?e.setState({isLoaded:!0,documentlists:s,success:r,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,C.jsx)(m.Z,{to:"/dashboard/default"});var t=this.state,n=t.res_status,s=t.isLoaded;if(!s)return(0,C.jsx)("div",{style:S.nT,children:(0,C.jsx)(c.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})});if(n>=400)return(0,C.jsx)(y.Z,{res_status:n});var r=Object.keys(window.internaldocumentlist),i=function(t){var n={};return n["".concat(t)]=e.state.documentlists.filter((function(e){return e.category===t})),n["".concat(t)].map((function(t,n){return(0,C.jsx)(v.Z,{idx:n,path:"/docs/internal/search",document:t,role:e.props.user.role,openDeleteDocModalWindow:e.openDeleteDocModalWindow},n)}))};return(0,C.jsxs)(j.Z,{children:[(0,C.jsx)(u.Z,{className:"sticky-top ",children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,C.jsx)(p.Z.Header,{text:"dark",children:(0,C.jsx)(p.Z.Title,{children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:"All Internal Documentations"}),(0,C.jsx)(h.Z,{md:{span:2,offset:0},children:this.state.expand?(0,C.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,C.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})})]})})})})})}),(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{sm:12,children:(0,C.jsx)(p.Z,{className:"mb-2 mx-0",children:this.state.isEdit?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(p.Z.Body,{children:[(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(Z.Z.Group,{controlId:"decided",children:(0,C.jsxs)(Z.Z.Control,{as:"select",onChange:function(t){return e.handleChange_category(t)},children:[(0,C.jsx)("option",{value:"",children:"Select Document Category"}),S.pD.map((function(e,t){return(0,C.jsx)("option",{value:e.key,children:e.value},t)}))]})})})})," ",(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{children:(0,C.jsx)(Z.Z.Group,{controlId:"doc_title",className:"mb-4",children:(0,C.jsx)(Z.Z.Control,{type:"text",placeholder:"Title",defaultValue:"",onChange:function(t){return e.handleChange_doc_title(t)}})})})}),(0,C.jsx)(_.Z,{category:this.state.category,doc_title:this.state.doc_title,editorState:this.state.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.handleClickCancel,role:this.props.role})]})}):(0,C.jsxs)(p.Z.Body,{children:[r.map((function(e,t){return(0,C.jsxs)(u.Z,{className:"mb-4",children:[(0,C.jsxs)("h5",{children:["- ",window.internaldocumentlist["".concat(e)]]}),i(e)]},t)})),("Admin"===this.props.user.role||"Agent"===this.props.user.role)&&(0,C.jsx)(f.Z,{onClick:this.handleClick,children:"Add"})]})})})}),(0,C.jsxs)(x.Z,{show:this.state.SetDeleteDocModel,onHide:this.closeDeleteDocModalWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,C.jsx)(x.Z.Header,{children:(0,C.jsx)(x.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,C.jsxs)(x.Z.Body,{children:["Do you want to delete documentation of title:"," ",this.state.doc_title_toBeDelete,"?"]}),(0,C.jsxs)(x.Z.Footer,{children:[(0,C.jsx)(f.Z,{disabled:!s,onClick:this.handleDeleteDoc,children:"Yes"}),(0,C.jsx)(f.Z,{onClick:this.closeDeleteDocModalWindow,children:"No"})]})]})]})}}]),n}(l.Component);t.default=g}}]);