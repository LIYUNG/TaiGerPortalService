"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[4637],{84637:function(e,t,n){n.r(t);var s=n(18489),r=n(35531),a=n(27853),o=n(84531),i=n(78932),l=n(38128),c=n(47313),d=n(44030),u=n(63849),h=n(31616),f=n(65832),p=n(93298),m=n(67203),Z=n(47939),x=n(94395),_=n(54991),v=n(26454),g=n(31974),j=n(51767),y=n(82423),C=n(20688),S=n(51426),k=n(46417),F=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={error:null,isLoaded:!1,data:null,success:!1,documentlists:[],doc_id_toBeDelete:"",doc_title_toBeDelete:"",doc_title:"",category:"",SetDeleteDocModel:!1,isEdit:!1,expand:!0,editorState:"",accordionKeys:!Object.keys(window.checklist)||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(Object.keys(window.checklist).length).fill().map((function(e,t){return t})),res_status:0,res_modal_message:"",res_modal_status:0},e.singleExpandtHandler=function(t){var n=(0,r.Z)(e.state.accordionKeys);n[t]=n[t]!==t?t:-1,e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{accordionKeys:n})}))},e.AllCollapsetHandler=function(){var t=Object.keys(window.checklist);e.setState((function(n){return(0,s.Z)((0,s.Z)({},n),{},{expand:!1,accordionKeys:!t||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[-1]:new Array(t.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){var t=Object.keys(window.checklist);e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{expand:!0,accordionKeys:t&&new Array(t.length).fill().map((function(e,t){return t}))})}))},e.handleChange_doc_title=function(t){var n=t.target.value;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_title:n})}))},e.handleClick=function(){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickAdd=function(e){e.preventDefault()},e.handleChange_category=function(t){t.preventDefault();var n=t.target.value;e.setState({category:n})},e.handleDeleteDoc=function(t){(0,S.V0)(e.state.doc_id_toBeDelete).then((function(t){var n=t.data.success,a=t.status;if(n){var o=(0,r.Z)(e.state.documentlists),i=o.findIndex((function(t){return t._id.toString()===e.state.doc_id_toBeDelete}));i>-1&&o.splice(i,1),e.setState({success:n,documentlists:o,SetDeleteDocModel:!1,isEdit:!1,isLoaded:!0,res_modal_status:a})}else{var l=t.data.message;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{isLoaded:!0,res_modal_message:l,res_modal_status:a})}))}}),(function(t){e.setState({error:t})}))},e.openDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_id_toBeDelete:t._id,doc_title_toBeDelete:t.title,SetDeleteDocModel:!0})}))},e.closeDeleteDocModalWindow=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{SetDeleteDocModel:!1})}))},e.handleClickCancel=function(t){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickSave=function(t,n){t.preventDefault();var a=JSON.stringify(n),o={title:e.state.doc_title,category:e.state.category,prop:e.props.item,text:a};(0,S.p8)(o).then((function(t){var n=t.data,a=n.success,o=n.data,i=t.status;if(a){var l=(0,r.Z)(e.state.documentlists);l.push(o),e.setState({success:a,documentlists:l,editorState:"",isEdit:!e.state.isEdit,isLoaded:!0,res_modal_status:i})}else{var c=t.data.message;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{isLoaded:!0,res_modal_message:c,res_modal_status:i})}))}}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e.ConfirmError=function(){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,S.kB)().then((function(t){var n=t.data,s=n.data,r=n.success,a=t.status;r?e.setState({isLoaded:!0,documentlists:s,success:r,res_status:a}):e.setState({isLoaded:!0,res_status:a})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,k.jsx)(x.Z,{to:"/dashboard/default"});var t=this.state,n=t.res_status,s=t.isLoaded,r=t.res_modal_status,a=t.res_modal_message;if(!s)return(0,k.jsx)("div",{style:j.nT,children:(0,k.jsx)(d.Z,{animation:"border",role:"status",children:(0,k.jsx)("span",{className:"visually-hidden"})})});if(n>=400)return(0,k.jsx)(y.Z,{res_status:n});var o=Object.keys(window.documentlist),i=function(t){var n={};return n["".concat(t)]=e.state.documentlists.filter((function(e){return e.category===t})),n["".concat(t)].map((function(t,n){return(0,k.jsx)(v.Z,{idx:n,path:"/docs/search",document:t,role:e.props.user.role,openDeleteDocModalWindow:e.openDeleteDocModalWindow},n)}))};return(0,k.jsxs)(_.Z,{children:[r>=400&&(0,k.jsx)(C.Z,{ConfirmError:this.ConfirmError,res_modal_status:r,res_modal_message:a}),(0,k.jsx)(u.Z,{className:"sticky-top ",children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(f.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,k.jsx)(f.Z.Header,{text:"dark",children:(0,k.jsx)(f.Z.Title,{children:(0,k.jsxs)(u.Z,{children:[(0,k.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:"All Documentations"}),(0,k.jsx)(h.Z,{md:{span:2,offset:0},children:this.state.expand?(0,k.jsx)(p.Z,{size:"sm",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,k.jsx)(p.Z,{size:"sm",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})})]})})})})})}),(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{sm:12,children:(0,k.jsx)(f.Z,{className:"mb-2 mx-0",children:this.state.isEdit?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(f.Z.Body,{children:[(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(m.Z.Group,{controlId:"decided",children:(0,k.jsxs)(m.Z.Control,{as:"select",onChange:function(t){return e.handleChange_category(t)},children:[(0,k.jsx)("option",{value:"",children:"Select Document Category"}),j.XA.map((function(e,t){return(0,k.jsx)("option",{value:e.key,children:e.value},t)}))]})})})})," ",(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(m.Z.Group,{controlId:"doc_title",className:"mb-4",children:(0,k.jsx)(m.Z.Control,{type:"text",placeholder:"title",defaultValue:"",onChange:function(t){return e.handleChange_doc_title(t)}})})})}),(0,k.jsx)(g.Z,{category:this.state.category,doc_title:this.state.doc_title,editorState:this.state.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.handleClickCancel,role:this.props.role})]})}):(0,k.jsxs)(f.Z.Body,{children:[o.map((function(e,t){return(0,k.jsxs)(u.Z,{className:"mb-4",children:[(0,k.jsxs)("h5",{children:["- ",window.documentlist["".concat(e)]]}),i(e)]},t)})),("Admin"===this.props.user.role||"Agent"===this.props.user.role)&&(0,k.jsx)(p.Z,{onClick:this.handleClick,children:"Add"})]})})})}),(0,k.jsxs)(Z.Z,{show:this.state.SetDeleteDocModel,onHide:this.closeDeleteDocModalWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,k.jsx)(Z.Z.Header,{children:(0,k.jsx)(Z.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,k.jsxs)(Z.Z.Body,{children:["Do you want to delete documentation of title:"," ",this.state.doc_title_toBeDelete,"?"]}),(0,k.jsxs)(Z.Z.Footer,{children:[(0,k.jsx)(p.Z,{disabled:!s,onClick:this.handleDeleteDoc,children:"Yes"}),(0,k.jsx)(p.Z,{onClick:this.closeDeleteDocModalWindow,children:"No"})]})]})]})}}]),n}(c.Component);t.default=F},26454:function(e,t,n){var s=n(18489),r=n(27853),a=n(84531),o=n(78932),i=n(38128),l=n(47313),c=n(52500),d=n(44030),u=n(63849),h=n(31616),f=n(37062),p=(n(85463),n(4901)),m=(n(43636),n(51767)),Z=n(82423),x=n(51426),_=n(46417),v=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={timeouterror:null,unauthorizederror:null,student:e.props.student,deleteFileWarningModel:!1,SetAsFinalFileModel:!1,Requirements_Modal:!1,in_edit_mode:!1,student_id:"",doc_thread_id:"",applicationId:"",editorState:null,ConvertedContent:"",isLoaded:!1,requirements:"",file:"",isThreadExisted:!1,res_status:0},e.handleClickEdit=function(t){t.preventDefault(),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!0})}))},e.handleClickCancel=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e.handleClickSave=function(t,n){t.preventDefault();var r=JSON.stringify((0,c.convertToRaw)(n.getCurrentContent())),a={prop:e.props.item,text:r};(0,x.Pd)(a).then((function(t){var s=t.data,r=s.success,a=(s.data,t.status);r?e.setState({success:r,editorState:n,isLoaded:!0,res_status:a}):e.setState({isLoaded:!0,res_status:a})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{in_edit_mode:!1})}))},e.handleEditorChange=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{editorState:t})}))},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=null;if(this.props.message){var t=(0,c.convertFromRaw)(JSON.parse(this.props.message));e=c.EditorState.createWithContent(t)}else e=c.EditorState.createEmpty();this.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{editorState:e,ConvertedContent:e,isLoaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.res_status;t.error;return t.isLoaded||this.state.student?n>=400?(0,_.jsx)(Z.Z,{res_status:n}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(u.Z,{children:(0,_.jsxs)(h.Z,{sm:10,children:[(0,_.jsx)(p.apv,{size:24,color:"red",title:"Delete",style:{cursor:"pointer"},onClick:function(){return e.props.openDeleteDocModalWindow(e.props.document)}}),this.props.idx,". ",(0,_.jsx)(f.Z,{to:"".concat(this.props.path,"/").concat(this.props.document._id),children:this.props.document.title})]})})}):(0,_.jsx)("div",{style:m.nT,children:(0,_.jsx)(d.Z,{animation:"border",role:"status",children:(0,_.jsx)("span",{className:"visually-hidden"})})})}}]),n}(l.Component);t.Z=v},31974:function(e,t,n){n(47313);var s=n(1110),r=(n(85463),n(43636),n(63849)),a=n(31616),o=n(46417);t.Z=function(e){return(0,o.jsx)(r.Z,{style:{textDecoration:"none"},children:(0,o.jsx)(a.Z,{className:"my-0 mx-0",children:(0,o.jsx)(s.Z,{category:e.category,doc_title:e.doc_title,readOnly:!1,handleClickSave:e.handleClickSave,handleClickCancel:e.handleClickCancel,editorState:e.editorState})})})}},1110:function(e,t,n){var s=n(33032),r=n(23430),a=n(78994),o=n.n(a),i=n(47313),l=n(63849),c=n(31616),d=n(93298),u=(n(89351),n(88195)),h=n.n(u),f=n(82737),p=n.n(f),m=n(67989),Z=n.n(m),x=n(1693),_=n.n(x),v=n(87606),g=n.n(v),j=n(60823),y=n.n(j),C=(n(44789),n(37417)),S=n.n(C),k=n(68234),F=n.n(k),D=n(87366),w=n.n(D),b=n(70021),E=n.n(b),A=n(44236),M=n.n(A),L=n(65911),B=n.n(L),N=(n(99086),n(19893)),O=n.n(N),T=n(28668),W=n.n(T),H=n(51426),R=n(46417);t.Z=function(e){var t,n=(0,i.useRef)(),a=(0,i.useState)(e.editorState),u=(0,r.Z)(a,2),f=u[0],m=u[1],x=(0,i.useState)(!0),v=(0,r.Z)(x,2),j=v[0],C=v[1];(0,i.useEffect)((function(){m(e.editorState)}),[e.editorState]),(0,i.useEffect)((function(){return n.current||k(),function(){n.current.destroy(),n.current=null}}),[e.editorState]);var k=function(){t=new(h())({holder:"editorjs",logLevel:"ERROR",data:e.editorState,onReady:function(){n.current=t},onChange:function(){var e=(0,s.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!1),t.saver.save().then((function(e){m(e),C(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),readOnly:e.readOnly,autofocus:!0,minHeight:30,tools:{header:{class:p(),config:{placeholder:"Enter a header",levels:[2,3,4,5,6],defaultLevel:3},inlineToolbar:!0},list:{class:Z(),inlineToolbar:!0},underline:M(),code:w(),Color:{class:O(),config:{colorCollections:["#000000","#FF0000","#00FF00","#0000FF","#999999","#00FFFF","#FF00FF","#800080","#FFF"],type:"text"}},Marker:{class:O(),config:{colorCollections:["#000000","#FF0000","#00FF00","#0000FF","#999999","#00FFFF","#FF00FF","#800080","#FFF"],defaultColor:"#FFF",type:"marker"}},textAlign:W(),attaches:{class:B(),config:{uploader:{uploadByFile:function(e){return(0,s.Z)(o().mark((function t(){var n,s,r,a,i,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("file",e),t.next=4,(0,H.w_)(n);case 4:if(s=t.sent,r=s.data,a=r.url,i=r.title,l=r.extension,!r.success){t.next=10;break}return t.abrupt("return",{success:1,file:{url:a,title:i,extension:l}});case 10:alert(s.data.message);case 11:case"end":return t.stop()}}),t)})))()}}}},quote:E(),table:{class:y(),inlineToolbar:!0,config:{rows:2,cols:3}},image:{class:g(),config:{uploader:{uploadByFile:function(e){return(0,s.Z)(o().mark((function t(){var n,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("file",e),t.next=4,(0,H.Ix)(n);case 4:return s=t.sent,t.abrupt("return",{success:1,file:{url:s.data.data}});case 6:case"end":return t.stop()}}),t)})))()},uploadByUrl:function(e){return(0,s.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:1,file:{url:e}});case 1:case"end":return t.stop()}}),t)})))()}}}},elimiter:F(),embed:{class:_(),inlineToolbar:!1,config:{services:{youtube:!0,coub:!0}}},inlineCode:{class:S()}}})};return(0,R.jsxs)(i.Fragment,{children:[(0,R.jsx)("div",{id:"editorjs"}),e.readOnly?(0,R.jsx)(R.Fragment,{}):(0,R.jsx)(l.Z,{children:(0,R.jsxs)(c.Z,{className:"my-0 mx-0",children:[(0,R.jsx)(d.Z,{disabled:!j||0===e.doc_title.replace(/ /g,"").length||""===e.category||!f.blocks||0===f.blocks.length,onClick:function(t){return e.handleClickSave(t,f)},children:"Save"}),(0,R.jsx)(d.Z,{onClick:function(t){return e.handleClickCancel(t)},children:"Cancel"})]})})]})}},43636:function(){}}]);