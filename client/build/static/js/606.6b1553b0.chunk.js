"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[606],{50099:function(e,t,s){var n=s(35531),r=s(27853),i=s(84531),a=s(78932),d=s(38128),o=s(47313),l=s(73158),c=s(65832),u=s(62396),h=s(29678),p=s.n(h),x=s(54991),m=s(12401),Z=s(46417),j=function(e){(0,a.Z)(s,e);var t=(0,d.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(s,[{key:"render",value:function(){var e,t,s,r,i,a=this,d=[];return this.state.isOption&&(s=(0,Z.jsx)("div",{className:"card-header-right",children:(0,Z.jsxs)(l.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,Z.jsx)(l.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,Z.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,Z.jsxs)(l.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,Z.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,Z.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,Z.jsxs)("a",{href:m.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,Z.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,Z.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,Z.jsxs)("a",{href:m.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,Z.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,Z.jsx)("i",{className:"feather icon-refresh-cw"}),(0,Z.jsx)("a",{href:m.Z.BLANK_LINK,children:" Reload "})]}),(0,Z.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,Z.jsx)("i",{className:"feather icon-trash"}),(0,Z.jsx)("a",{href:m.Z.BLANK_LINK,children:" Remove "})]})]})]})})),r=(0,Z.jsxs)(c.Z.Header,{children:[(0,Z.jsx)(c.Z.Title,{as:"h5",children:this.props.title}),s]}),this.state.fullCard&&(d=[].concat((0,n.Z)(d),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(d=[].concat((0,n.Z)(d),["card-load"]),t=(0,Z.jsx)("div",{className:"card-loader",children:(0,Z.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(d=[].concat((0,n.Z)(d),["d-none"])),this.props.cardClass&&(d=[].concat((0,n.Z)(d),[this.props.cardClass])),i=(0,Z.jsxs)(c.Z,{className:d.join(" "),style:e,children:[r,(0,Z.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,Z.jsx)("div",{children:(0,Z.jsx)(c.Z.Body,{children:this.props.children})})}),t]}),(0,Z.jsx)(x.Z,{children:i})}}]),s}(o.Component);t.Z=p()(j)},4454:function(e,t,s){var n=s(18489),r=s(27853),i=s(84531),a=s(78932),d=s(38128),o=s(47313),l=s(44030),c=s(63849),u=s(31616),h=s(67203),p=s(93298),x=s(65832),m=s(47939),Z=s(60860),j=s(51426),f=s(57864),g=s(37062),v=s(94611),N=s(86450),_=s(46417),S=function(e){(0,a.Z)(s,e);var t=(0,d.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(e=t.call.apply(t,[this].concat(a))).state={student_id:"",program_id:"",isLoaded:!1,student:e.props.student,timeouterror:null,unauthorizederror:null,deleteVPDFileWarningModel:!1,setAsNotNeededModel:!1},e.closeWarningWindow=function(){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{deleteVPDFileWarningModel:!1})}))},e.handleUniAssistDocSubmit=function(t,s,n){t.preventDefault(),e.onSubmitGeneralFile(t,t.target.files[0],s,n)},e.closesetAsNotNeededWindow=function(){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{setAsNotNeededModel:!1})}))},e.opensetAsNotNeededWindow=function(t,s,r){t.preventDefault(),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{setAsNotNeededModel:!0,student_id:s,program_id:r})}))},e.handleSetAsNotNeeded=function(t){t.preventDefault(),(0,j.bV)(e.state.student_id,e.state.program_id).then((function(t){var s=t.data,n=s.data,r=s.success;r?e.setState({isLoaded:!0,student:n,success:r,setAsNotNeededModel:!1,student_id:"",program_id:""}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.handleUniAssistDocDelete=function(t){e.setState({isLoaded:!1}),(0,j.Ws)(e.state.student_id,e.state.program_id).then((function(t){var s=t.data,r=s.data,i=s.success;i?e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isLoaded:!0,student:r,success:i,deleteVPDFileWarningModel:!1})})):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.onDeleteVPDFileWarningPopUp=function(t,s,r){t.preventDefault(),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{student_id:s,program_id:r,deleteVPDFileWarningModel:!0})}))},e.handleUniAssistDocDownload=function(t,s,n){t.preventDefault(),(0,j.$Y)(s,n).then((function(t){if(200===t.status){var s=t.headers["content-disposition"].split('"')[1],n=t.data;if(0===n.size)return;var r=s.split(".");if("pdf"===(r=r.pop())){var i=window.URL.createObjectURL(new Blob([n],{type:"application/pdf"}));window.open(i)}else{var a=window.URL.createObjectURL(new Blob([n])),d=document.createElement("a");d.href=a,d.setAttribute("download",s),document.body.appendChild(d),d.click(),d.parentNode.removeChild(d)}}else 401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(e){alert("The file is not available.")}))},e.onSubmitGeneralFile=function(t,s,r,i){t.preventDefault();var a=new FormData;a.append("file",s),e.setState({isLoaded:!1}),(0,j.pJ)(r,i,a).then((function(t){var s=t.data,r=s.data,i=s.success;i?e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{student:r,success:i,category:"",isLoaded:!0,file:""})})):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:t})}))},e}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.student?this.setState({isLoaded:!0}):(0,j.u6)(this.props.user._id.toString()).then((function(t){var s=t.data,n=s.data,r=s.success;r?e.setState({isLoaded:!0,student:n,success:r}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.unauthorizederror,n=t.timeouterror,r=t.isLoaded;if(n)return(0,_.jsx)("div",{children:(0,_.jsx)(v.Z,{})});if(s)return(0,_.jsx)("div",{children:(0,_.jsx)(N.Z,{})});var i={position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"};if(!r&&!this.state.student)return(0,_.jsx)("div",{style:i,children:(0,_.jsx)(l.Z,{animation:"border",role:"status",children:(0,_.jsx)("span",{className:"visually-hidden"})})});var a=this.state.student.applications.map((function(t,s){return(0,_.jsxs)("div",{children:["Yes-FULL"===t.programId.uni_assist&&"O"===t.decided&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.Z,{children:(0,_.jsx)(g.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,_.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," Yes-FULL"]})})}),(0,_.jsx)(c.Z,{children:t.uni_assist&&"notstarted"!==t.uni_assist.status?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.Z,{onClick:function(s){return e.handleUniAssistDocDownload(s,e.state.student._id.toString(),t.programId._id.toString())},size:"sm",children:(0,_.jsx)(f.RFS,{size:16})}),(0,_.jsx)(p.Z,{onClick:function(s){return e.onDeleteVPDFileWarningPopUp(s,e.state.student._id.toString(),t.programId._id.toString())},size:"sm",children:(0,_.jsx)(f.VPh,{size:16})})]}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(c.Z,{children:e.state.isLoaded?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{children:(0,_.jsxs)(h.Z.Group,{controlId:"formFile",children:[(0,_.jsx)(h.Z.Label,{children:(0,_.jsx)(Z.lnH,{color:"lightgray",size:32})}),(0,_.jsx)(h.Z.Control,{hidden:!0,type:"file",onChange:function(s){return e.handleUniAssistDocSubmit(s,e.state.student._id.toString(),t.programId._id.toString())}})]})}),"Agent"===e.props.role||"Admin"===e.props.role&&(0,_.jsx)(u.Z,{children:"Agent"===e.props.role||"Admin"===e.props.role&&(0,_.jsx)(p.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set Not Needed"})})]}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{style:i,children:(0,_.jsx)(l.Z,{className:"mx-2 my-2",animation:"border",role:"status",variant:"light",children:(0,_.jsx)("span",{className:"visually-hidden"})})})})})})})]}),"Yes-VPD"===t.programId.uni_assist&&"O"===t.decided&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.Z,{children:(0,_.jsx)(g.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,_.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," Yes-VPD"]})})}),(0,_.jsx)(c.Z,{children:t.uni_assist&&"missing"!==t.uni_assist.status&&"notstarted"!==t.uni_assist.status?t.uni_assist&&"notneeded"===t.uni_assist.status?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{children:(0,_.jsx)("p",{className:"text-light",children:"Uni-assist is not necessary as it can be reused from another program."})}),(0,_.jsx)(u.Z,{children:(0,_.jsx)(p.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set Needed"})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{md:2,children:(0,_.jsx)(p.Z,{onClick:function(s){return e.handleUniAssistDocDownload(s,e.state.student._id.toString(),t.programId._id.toString())},size:"sm",children:(0,_.jsx)(f.RFS,{size:16})})}),(0,_.jsx)(u.Z,{children:(0,_.jsx)(p.Z,{onClick:function(s){return e.onDeleteVPDFileWarningPopUp(s,e.state.student._id.toString(),t.programId._id.toString())},variant:"danger",size:"sm",children:(0,_.jsx)(f.VPh,{size:16})})})]}):(0,_.jsx)(_.Fragment,{children:e.state.isLoaded?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{md:1,children:(0,_.jsxs)(h.Z.Group,{controlId:"formFile",children:[(0,_.jsx)(h.Z.Label,{children:(0,_.jsx)(Z.lnH,{color:"lightgray",size:32})}),(0,_.jsx)(h.Z.Control,{hidden:!0,type:"file",onChange:function(s){return e.handleUniAssistDocSubmit(s,e.state.student._id.toString(),t.programId._id.toString())}})]})}),(0,_.jsx)(u.Z,{children:"Agent"===e.props.role||"Admin"===e.props.role&&(0,_.jsx)(p.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set Not Needed"})})]}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{children:(0,_.jsx)(l.Z,{animation:"border",role:"status",variant:"light",children:(0,_.jsx)("span",{className:"visually-hidden"})})})})})})]}),"No"===t.programId.uni_assist&&"O"===t.decided&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,_.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name]})}),(0,_.jsx)("p",{className:"text-light",children:"This program does NOT require Uni-Assist."})]}),void 0===t.programId.uni_assist&&"O"===t.decided&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," "]}),(0,_.jsx)("p",{className:"text-light",children:"This program does NOT require Uni-Assist."})]})]},s)}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,_.jsx)(x.Z.Body,{children:a})}),(0,_.jsxs)(m.Z,{show:this.state.deleteVPDFileWarningModel,onHide:this.closeWarningWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,_.jsx)(m.Z.Header,{children:(0,_.jsx)(m.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,_.jsx)(m.Z.Body,{children:"Do you want to delete?"}),(0,_.jsxs)(m.Z.Footer,{children:[(0,_.jsx)(p.Z,{disabled:!this.state.isLoaded,onClick:function(t){return e.handleUniAssistDocDelete(t)},children:"Yes"}),(0,_.jsx)(p.Z,{onClick:this.closeWarningWindow,children:"No"})]})]}),(0,_.jsxs)(m.Z,{show:this.state.setAsNotNeededModel,onHide:this.closesetAsNotNeededWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,_.jsx)(m.Z.Header,{children:(0,_.jsx)(m.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,_.jsx)(m.Z.Body,{children:"Is VPD not necessary for this program (because other programs have already VPD and it can be reused for this)?"}),(0,_.jsxs)(m.Z.Footer,{children:[(0,_.jsx)(p.Z,{onClick:function(t){return e.handleSetAsNotNeeded(t)},children:"Yes"}),(0,_.jsx)(p.Z,{onClick:this.closesetAsNotNeededWindow,children:"No"})]})]})]})}}]),s}(o.Component);t.Z=S},30606:function(e,t,s){s.r(t);var n=s(27853),r=s(84531),i=s(78932),a=s(38128),d=s(47313),o=s(44030),l=s(63849),c=s(31616),u=s(65832),h=s(94395),p=s(4454),x=s(51767),m=s(66417),Z=s(51426),j=s(46417),f=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isLoaded:!1,student:null,deleteVPDFileWarningModel:!1,res_status:0},e}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,Z.u6)(this.props.user._id.toString()).then((function(t){var s=t.data,n=s.data,r=s.success,i=t.status;r?e.setState({isLoaded:!0,student:n,success:r,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){if("Student"!==this.props.user.role)return(0,j.jsx)(h.Z,{to:"/dashboard/default"});var e=this.state,t=e.res_status;return e.isLoaded||this.state.student?t>=400?(0,j.jsx)(m.Z,{res_status:t}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,j.jsx)(u.Z.Header,{children:(0,j.jsx)(u.Z.Title,{className:"my-0 mx-0 text-light",children:"Uni-Assist Tasks & VPD"})})})})}),(0,j.jsx)(l.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,j.jsx)(u.Z.Body,{className:"my-0 mx-0 text-light",children:"Instructions"})})})}),(0,j.jsx)(p.Z,{student:this.state.student,role:this.props.user.role})]}):(0,j.jsx)("div",{style:x.nT,children:(0,j.jsx)(o.Z,{animation:"border",role:"status",children:(0,j.jsx)("span",{className:"visually-hidden"})})})}}]),s}(d.Component);t.default=f},66417:function(e,t,s){s.d(t,{Z:function(){return N}});var n=s(27853),r=s(84531),i=s(78932),a=s(38128),d=s(47313),o=s(63849),l=s(31616),c=s(50099),u=s(54991),h=s(29021),p=s(94611),x=s(86450),m=(s(89351),s(46417)),Z=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return(0,m.jsx)(u.Z,{children:(0,m.jsx)(o.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:"Session is expired. Please refresh the page and login again."})})})})}}]),s}(d.Component),j=Z,f=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return(0,m.jsx)(u.Z,{children:(0,m.jsx)(o.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:"Too many requests. Please try later."})})})})}}]),s}(d.Component),g=f,v=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return 401===this.props.res_status?(0,m.jsx)(j,{}):403===this.props.res_status?(0,m.jsx)(x.Z,{}):404===this.props.res_status?(0,m.jsx)(h.Z,{}):408===this.props.res_status?(0,m.jsx)(p.Z,{}):429===this.props.res_status?(0,m.jsx)(g,{}):this.props.res_status>=500?(0,m.jsx)(u.Z,{children:(0,m.jsx)(o.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:"Server problem. Please try later."})})})}):void 0}}]),s}(d.Component),N=v},29021:function(e,t,s){var n=s(27853),r=s(84531),i=s(78932),a=s(38128),d=s(47313),o=s(63849),l=s(31616),c=s(65832),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(c.Z.Body,{children:(0,h.jsx)("h4",{children:"Page Not Found!"})})})})})})}}]),s}(d.Component);t.Z=p},94611:function(e,t,s){var n=s(27853),r=s(84531),i=s(78932),a=s(38128),d=s(47313),o=s(63849),l=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:"Time out error. Please login again!"})})})})}}]),s}(d.Component);t.Z=p},86450:function(e,t,s){var n=s(27853),r=s(84531),i=s(78932),a=s(38128),d=s(47313),o=s(63849),l=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),s}(d.Component);t.Z=p}}]);