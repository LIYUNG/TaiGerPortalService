"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[7936],{41975:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var r=s(18489),n=s(27853),a=s(84531),i=s(78932),o=s(38128),d=s(47313),l=s(44030),c=s(63849),u=s(31616),h=s(65832),m=s(93298),p=s(94395),f=s(54991),Z=s(35531),_=s(465),v=s(41251),x=s(73158),g=s(46417),j=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this;return this.props.success?(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:(0,g.jsxs)(v.Z,{size:"sm",title:"Option",variant:"primary",id:"dropdown-variants-".concat(this.props.user._id),children:[(0,g.jsx)(x.Z.Item,{eventKey:"2",onClick:function(){return e.props.setModalShow(e.props.user.firstname,e.props.user.lastname,e.props.user.role,e.props.user._id)},children:"Set User as..."}),(0,g.jsx)(x.Z.Item,{eventKey:"3",onClick:function(){return e.props.setModalShowDelete(e.props.user.firstname,e.props.user.lastname,e.props.user._id)},children:"Delete"})]},this.props.user._id)}),this.props.header.map((function(t,s){return(0,g.jsx)("td",{children:e.props.user[t.prop]},s)}))]},this.props.user._id):(0,g.jsx)(g.Fragment,{})}}]),s}(d.Component),y=j,S=s(47939),b=s(67203),C=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={data:[]},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this;return(0,g.jsxs)(S.Z,{show:this.props.show,onHide:this.props.setModalHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(S.Z.Header,{children:(0,g.jsxs)(S.Z.Title,{id:"contained-modal-title-vcenter",children:["Assign ",this.props.firstname," - ",this.props.lastname," as"]})}),(0,g.jsx)(S.Z.Body,{children:(0,g.jsx)("table",{children:(0,g.jsx)("tbody",{children:["Guest","Student","Editor","Agent","Admin"].map((function(t,s){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:(0,g.jsx)(b.Z.Group,{children:(0,g.jsx)(b.Z.Check,{custom:!0,type:"radio",name:"user_role",defaultChecked:e.props.selected_user_role===t,id:t,value:t,onChange:e.props.handleChange2})})}),(0,g.jsx)("td",{children:(0,g.jsx)("h4",{className:"mb-1",children:t})})]},s+1)}))})})}),(0,g.jsxs)(S.Z.Footer,{children:[(0,g.jsx)(m.Z,{onClick:function(t){return e.props.onSubmit2(t)},children:"Assign"}),(0,g.jsx)(m.Z,{onClick:this.props.setModalHide,children:"Cancel"})]})]})}}]),s}(d.Component),M=C,w=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this;return(0,g.jsxs)(S.Z,{show:this.props.deleteUserWarning,onHide:this.props.setModalHideDDelete,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(S.Z.Header,{closeButton:!0,children:(0,g.jsx)(S.Z.Title,{children:"Warning"})}),(0,g.jsx)(S.Z.Body,{children:(0,g.jsxs)("h5",{children:["Do you want to delete ",this.props.firstname," - ",this.props.lastname,"?"]})}),(0,g.jsxs)(S.Z.Footer,{children:[(0,g.jsx)(m.Z,{variant:"primary",disabled:!this.props.isLoaded,onClick:function(){return e.props.RemoveUserHandler3(e.props.selected_user_id)},children:this.props.isLoaded?"Yes":"Loading"}),(0,g.jsx)(m.Z,{variant:"secondary",onClick:this.props.setModalHideDDelete,children:"No"})]})]})}}]),s}(d.Component),U=w,L=s(51767),E=s(20688),A=s(51426),k=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={modalShow:!1,timeouterror:null,unauthorizederror:null,firstname:"",lastname:"",selected_user_role:"",selected_user_id:"",data:e.props.user,modalShowNewProgram:!1,deleteUserWarning:!1,success:e.props.success,isLoaded:e.props.isLoaded,res_status:0,res_modal_message:"",res_modal_status:0},e.setModalShow=function(t,s,r,n){e.setState({modalShow:!0,firstname:t,lastname:s,selected_user_role:r,selected_user_id:n})},e.setModalHide=function(){e.setState({modalShow:!1})},e.setModalHideDDelete=function(){e.setState({deleteUserWarning:!1})},e.setModalShowDelete=function(t,s,r){e.setState({deleteUserWarning:!0,firstname:t,lastname:s,selected_user_id:r})},e.handleChange2=function(t){var s=t.target.value;e.setState((function(e){return{selected_user_role:s}}))},e.deleteUser=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!1})}));var s=(0,Z.Z)(e.state.data),n=e.state.data.findIndex((function(e){return e._id===t}));-1!==n&&s.splice(n,1),(0,A.h8)(t).then((function(t){var n=t.data.success,a=t.status;if(n)e.setState({isLoaded:!0,success:n,deleteUserWarning:!1,data:s,res_modal_status:a});else{var i=t.data.message;e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,res_modal_message:i,res_modal_status:a})}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.assignUserAs=function(t){var s=e.state.data.map((function(e){return e._id===t._id?Object.assign(e,t):e}));(0,A.wc)(t._id,t.role).then((function(t){var n=t.data,a=(n.data,n.success),i=t.status;if(a)e.setState({modalShow:!1,isLoaded:!0,success:a,data:s,res_modal_status:i});else{var o=t.data.message;e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,res_modal_message:o,res_modal_status:i})}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onSubmit2=function(t){t.preventDefault();var s=e.state.selected_user_role,r=e.state.selected_user_id;e.assignUserAs({role:s,_id:r})},e.RemoveUserHandler3=function(t){e.deleteUser(t)},e.ConfirmError=function(){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,a.Z)(s,[{key:"componentDidUpdate",value:function(e,t){this.props.user!==e.user&&this.setState({data:this.props.user})}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_modal_message,r=t.res_modal_status,n=(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:" "}),this.props.header.map((function(e,t){return(0,g.jsx)("th",{children:e.name},t)}))]}),a=this.state.data.map((function(t){return(0,g.jsx)(y,{user:t,header:e.props.header,setModalShowDelete:e.setModalShowDelete,setModalShow:e.setModalShow,success:e.state.success},t._id)}));return(0,g.jsxs)(g.Fragment,{children:[r>=400&&(0,g.jsx)(E.Z,{ConfirmError:this.ConfirmError,res_modal_status:r,res_modal_message:s}),(0,g.jsxs)(_.Z,{responsive:!0,className:"my-0 mx-0",variant:"dark",text:"light",size:"sm",children:[(0,g.jsx)("thead",{children:n}),(0,g.jsx)("tbody",{children:a})]}),(0,g.jsx)(M,{show:this.state.modalShow,setModalHide:this.setModalHide,firstname:this.state.firstname,lastname:this.state.lastname,selected_user_role:this.state.selected_user_role,selected_user_id:this.state.selected_user_id,handleChange2:this.handleChange2,onSubmit2:this.onSubmit2}),(0,g.jsx)(U,{isLoaded:this.state.isLoaded,deleteUserWarning:this.state.deleteUserWarning,setModalHideDDelete:this.setModalHideDDelete,firstname:this.state.firstname,lastname:this.state.lastname,selected_user_id:this.state.selected_user_id,RemoveUserHandler3:this.RemoveUserHandler3})]})}}]),s}(d.Component),D=k,H=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={user_information:{}},e.handleChange=function(t){t.preventDefault();var s=(0,r.Z)({},e.state.user_information);s[t.target.id]=t.target.value,e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{user_information:s})}))},e.AddUserSubmit=function(t,s){t.preventDefault(),s.firstname&&s.lastname&&s.email&&e.props.AddUserSubmit(t,s)},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this;return(0,g.jsxs)(S.Z,{show:this.props.addUserModalState,onHide:this.props.cloaseAddUserModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(S.Z.Header,{closeButton:!0,children:(0,g.jsx)(S.Z.Title,{children:"Add new user"})}),(0,g.jsxs)(S.Z.Body,{children:[(0,g.jsxs)(b.Z.Group,{className:"my-2",controlId:"firstname",children:[(0,g.jsx)(b.Z.Label,{children:"First Name"}),(0,g.jsx)(b.Z.Control,{type:"text",placeholder:"Chung-Ming",onChange:function(t){return e.handleChange(t)}})]}),(0,g.jsxs)(b.Z.Group,{className:"my-2",controlId:"lastname",children:[(0,g.jsx)(b.Z.Label,{children:"Last Name"}),(0,g.jsx)(b.Z.Control,{type:"text",placeholder:"Chen",onChange:function(t){return e.handleChange(t)}})]}),(0,g.jsxs)(b.Z.Group,{className:"my-2",controlId:"email",children:[(0,g.jsx)(b.Z.Label,{children:"Email"}),(0,g.jsx)(b.Z.Control,{type:"text",placeholder:"chung.ming.wang@gmail.com",onChange:function(t){return e.handleChange(t)}})]})]}),(0,g.jsxs)(S.Z.Footer,{children:[(0,g.jsx)(m.Z,{variant:"primary",disabled:!this.state.user_information.firstname||!this.state.user_information.lastname||!this.state.user_information.email||!this.props.isLoaded,onClick:function(t){return e.AddUserSubmit(t,e.state.user_information)},children:this.props.isLoaded?"Add User":"Loading"}),(0,g.jsx)(m.Z,{variant:"secondary",onClick:this.props.cloaseAddUserModal,children:"Cancel"})]})]})}}]),s}(d.Component),N=H,R=s(82423),z=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={error:null,addUserModalState:!1,role:"",isLoaded:!1,user:null,success:!1,res_status:0,res_modal_message:"",res_modal_status:0},e.openAddUserModal=function(){e.setState({addUserModalState:!0})},e.cloaseAddUserModal=function(){e.setState({addUserModalState:!1})},e.AddUserSubmit=function(t,s){t.preventDefault(),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!1})})),(0,A.cn)(s).then((function(t){var s=t.data,n=s.data,a=s.success,i=t.status;if(a)console.log(n),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,user:n,success:a,addUserModalState:!1,res_modal_status:i})}));else{var o=t.data.message;e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,addUserModalState:!1,res_modal_message:o,res_modal_status:i})}))}}),(function(t){return e.setState({isLoaded:!0,error:t})}))},e.ConfirmError=function(){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,A.Rf)().then((function(t){var s=t.data,r=s.data,n=s.success,a=t.status;n?e.setState({isLoaded:!0,user:r,success:n,res_status:a}):e.setState({isLoaded:!0,res_status:a})}),(function(t){return e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){if("Admin"!==this.props.user.role)return(0,g.jsx)(p.Z,{to:"/dashboard/default"});var e=this.state,t=e.res_modal_message,s=e.res_modal_status,r=e.res_status;return e.isLoaded||this.state.user?r>=400?(0,g.jsx)(R.Z,{res_status:r}):(0,g.jsxs)(f.Z,{children:[s>=400&&(0,g.jsx)(E.Z,{ConfirmError:this.ConfirmError,res_modal_status:s,res_modal_message:t}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(u.Z,{children:(0,g.jsxs)(h.Z,{bg:"primary",text:"light",children:[(0,g.jsx)(h.Z.Header,{children:(0,g.jsx)(h.Z.Title,{className:"my-0 mx-0 text-light",children:"Users List"})}),(0,g.jsx)(D,{success:this.state.success,isLoaded:this.state.isLoaded,user:this.state.user,onSubmit2:this.onSubmit2,header:window.UserlistHeader})]})})}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(m.Z,{onClick:this.openAddUserModal,children:"Add New User"})}),(0,g.jsx)(N,{isLoaded:this.state.isLoaded,addUserModalState:this.state.addUserModalState,cloaseAddUserModal:this.cloaseAddUserModal,firstname:this.state.firstname,lastname:this.state.lastname,selected_user_id:this.state.selected_user_id,AddUserSubmit:this.AddUserSubmit})]}):(0,g.jsx)("div",{style:L.nT,children:(0,g.jsx)(l.Z,{animation:"border",role:"status",children:(0,g.jsx)("span",{className:"visually-hidden"})})})}}]),s}(d.Component),O=z},62396:function(e,t,s){s.d(t,{Z:function(){return S}});var r=s(18489),n=s(83738),a=s(36222),i=s(46123),o=s.n(i),d=s(46988),l=s(47313),c=s(22752),u=s(59498);var h,m=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];e.apply(this,r),t.apply(this,r)}}),null)},p=s(6280),f=s(39776),Z=s(46417),_=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],v={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function x(e,t){var s=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=v[e];return s+parseInt((0,d.Z)(t,r[0]),10)+parseInt((0,d.Z)(t,r[1]),10)}var g=(h={},(0,a.Z)(h,c.Wj,"collapse"),(0,a.Z)(h,c.Ix,"collapsing"),(0,a.Z)(h,c.d0,"collapsing"),(0,a.Z)(h,c.cn,"collapse show"),h),j={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:x},y=l.forwardRef((function(e,t){var s=e.onEnter,a=e.onEntering,i=e.onEntered,d=e.onExit,c=e.onExiting,h=e.className,v=e.children,j=e.dimension,y=void 0===j?"height":j,S=e.getDimensionValue,b=void 0===S?x:S,C=(0,n.Z)(e,_),M="function"===typeof y?y():y,w=(0,l.useMemo)((function(){return m((function(e){e.style[M]="0"}),s)}),[M,s]),U=(0,l.useMemo)((function(){return m((function(e){var t="scroll".concat(M[0].toUpperCase()).concat(M.slice(1));e.style[M]="".concat(e[t],"px")}),a)}),[M,a]),L=(0,l.useMemo)((function(){return m((function(e){e.style[M]=null}),i)}),[M,i]),E=(0,l.useMemo)((function(){return m((function(e){e.style[M]="".concat(b(M,e),"px"),(0,p.Z)(e)}),d)}),[d,b,M]),A=(0,l.useMemo)((function(){return m((function(e){e.style[M]=null}),c)}),[M,c]);return(0,Z.jsx)(f.Z,(0,r.Z)((0,r.Z)({ref:t,addEndListener:u.Z},C),{},{"aria-expanded":C.role?C.in:null,onEnter:w,onEntering:U,onEntered:L,onExit:E,onExiting:A,childRef:v.ref,children:function(e,t){return l.cloneElement(v,(0,r.Z)((0,r.Z)({},t),{},{className:o()(h,v.props.className,g[e],"width"===M&&"collapse-horizontal")}))}}))}));y.defaultProps=j;var S=y},41251:function(e,t,s){s.d(t,{Z:function(){return _}});var r=s(18489),n=s(83738),a=s(47313),i=s(75192),o=s.n(i),d=s(73158),l=s(1683),c=s(38388),u=o().oneOf(["start","end"]),h=o().oneOfType([u,o().shape({sm:u}),o().shape({md:u}),o().shape({lg:u}),o().shape({xl:u}),o().shape({xxl:u}),o().object]),m=s(46417),p=["title","children","bsPrefix","rootCloseEvent","variant","size","menuRole","renderMenuOnMount","disabled","href","id","menuVariant","flip"],f={id:o().string,href:o().string,onClick:o().func,title:o().node.isRequired,disabled:o().bool,align:h,menuRole:o().string,renderMenuOnMount:o().bool,rootCloseEvent:o().string,menuVariant:o().oneOf(["dark"]),flip:o().bool,bsPrefix:o().string,variant:o().string,size:o().string},Z=a.forwardRef((function(e,t){var s=e.title,a=e.children,i=e.bsPrefix,o=e.rootCloseEvent,u=e.variant,h=e.size,f=e.menuRole,Z=e.renderMenuOnMount,_=e.disabled,v=e.href,x=e.id,g=e.menuVariant,j=e.flip,y=(0,n.Z)(e,p);return(0,m.jsxs)(d.Z,(0,r.Z)((0,r.Z)({ref:t},y),{},{children:[(0,m.jsx)(l.Z,{id:x,href:v,size:h,variant:u,disabled:_,childBsPrefix:i,children:s}),(0,m.jsx)(c.Z,{role:f,renderOnMount:Z,rootCloseEvent:o,variant:g,flip:j,children:a})]}))}));Z.displayName="DropdownButton",Z.propTypes=f;var _=Z},465:function(e,t,s){var r=s(18489),n=s(83738),a=s(46123),i=s.n(a),o=s(47313),d=s(68524),l=s(46417),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=o.forwardRef((function(e,t){var s=e.bsPrefix,a=e.className,o=e.striped,u=e.bordered,h=e.borderless,m=e.hover,p=e.size,f=e.variant,Z=e.responsive,_=(0,n.Z)(e,c),v=(0,d.vE)(s,"table"),x=i()(a,v,f&&"".concat(v,"-").concat(f),p&&"".concat(v,"-").concat(p),o&&"".concat(v,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),u&&"".concat(v,"-bordered"),h&&"".concat(v,"-borderless"),m&&"".concat(v,"-hover")),g=(0,l.jsx)("table",(0,r.Z)((0,r.Z)({},_),{},{className:x,ref:t}));if(Z){var j="".concat(v,"-responsive");return"string"===typeof Z&&(j="".concat(j,"-").concat(Z)),(0,l.jsx)("div",{className:j,children:g})}return g}));t.Z=u}}]);