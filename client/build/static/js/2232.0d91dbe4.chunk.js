"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2232],{15253:function(t,e,r){r.r(e);var a=r(18489),s=r(36222),i=r(27853),o=r(84531),n=r(78932),d=r(38128),c=r(47313),u=r(44030),l=r(63849),h=r(31616),p=r(65832),m=r(51025),f=r(92634),x=r(94611),S=r(86450),Z=r(29021),g=r(51426),v=r(51767),j=r(94395),k=r(46417),y=function(t){(0,n.Z)(r,t);var e=(0,d.Z)(r);function r(){var t,o;(0,i.Z)(this,r);for(var n=arguments.length,d=new Array(n),c=0;c<n;c++)d[c]=arguments[c];return(o=e.call.apply(e,[this].concat(d))).state=(t={isLoaded:!1,success:!1,error:null,editorState:null,unauthorizederror:null},(0,s.Z)(t,"unauthorizederror",null),(0,s.Z)(t,"isEdit",!1),t),o.handleClickCancel=function(t){o.setState((function(t){return(0,a.Z)((0,a.Z)({},t),{},{isEdit:!o.state.isEdit})}))},o.handleClickSave=function(t,e,r){t.preventDefault();var s=JSON.stringify(r),i={category:o.props.match.params.category,title:e,prop:o.props.item,text:s};(0,g.Y0)(o.props.match.params.category,i).then((function(t){var e=t.data,a=e.success,s=e.data;a?o.setState({success:a,timeouterror:!1,pagenotfounderror:!1,document_title:s.title,editorState:r,isEdit:!o.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?o.setState({isLoaded:!0,timeouterror:!0}):403===t.status?o.setState({isLoaded:!0,unauthorizederror:!0}):(t.status,o.setState({isLoaded:!0,pagenotfounderror:!0}))}),(function(t){o.setState({error:t})})),o.setState((function(t){return(0,a.Z)((0,a.Z)({},t),{},{in_edit_mode:!1})}))},o.handleClick=function(){o.setState((function(t){return(0,a.Z)((0,a.Z)({},t),{},{isEdit:!o.state.isEdit})}))},o}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){var t=this;(0,g.go)(this.props.match.params.category).then((function(e){var r=e.data,a=r.data,s=r.success;if(s){var i=null;i=a.text?JSON.parse(a.text):{time:new Date,blocks:[]},t.setState({isLoaded:!0,editorState:i,timeouterror:!1,pagenotfounderror:!1,success:s})}else 401===e.status||500===e.status?t.setState({isLoaded:!0,timeouterror:!0}):403===e.status?t.setState({isLoaded:!0,unauthorizederror:!0}):t.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(e){t.setState({isLoaded:!0,error:!0})}))}},{key:"componentDidUpdate",value:function(t,e){var r=this;t.match.params.category!==this.props.match.params.category&&(0,g.go)(this.props.match.params.category).then((function(t){var e=t.data,a=e.data,s=e.success;if(s){var i=null;i=a.text?JSON.parse(a.text):{time:new Date,blocks:[]},r.setState({isLoaded:!0,editorState:i,timeouterror:!1,pagenotfounderror:!1,success:s})}else 401===t.status||500===t.status?r.setState({isLoaded:!0,timeouterror:!0}):403===t.status?r.setState({isLoaded:!0,unauthorizederror:!0}):r.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){r.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var t=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role&&"Student"!==this.props.user.role)return(0,k.jsx)(j.Z,{to:"/dashboard/default"});var e=this.state,r=e.unauthorizederror,a=e.timeouterror,s=e.pagenotfounderror,i=(e.error,e.editorState),o=e.isLoaded;if(a)return(0,k.jsx)("div",{children:(0,k.jsx)(x.Z,{})});if(r)return(0,k.jsx)("div",{children:(0,k.jsx)(S.Z,{})});if(s)return(0,k.jsx)("div",{children:(0,k.jsx)(Z.Z,{})});return o||i?this.state.isEdit?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.Z,{className:"sticky-top ",children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,k.jsx)(p.Z.Header,{text:"dark",children:(0,k.jsx)(p.Z.Title,{children:(0,k.jsx)(l.Z,{children:(0,k.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:v.XA.find((function(e){return e.key===t.props.match.params.category})).value})})})})})})}),(0,k.jsx)(f.Z,{category:"category",document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:o,handleClick:this.handleClick,handleClickCancel:this.handleClickCancel,handleClickSave:this.handleClickSave})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(l.Z,{className:"sticky-top ",children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,k.jsx)(p.Z.Header,{text:"dark",children:(0,k.jsx)(p.Z.Title,{children:(0,k.jsx)(l.Z,{children:(0,k.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:v.XA.find((function(e){return e.key===t.props.match.params.category})).value})})})})})})}),(0,k.jsx)(m.Z,{document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:o,role:this.props.user.role,handleClick:this.handleClick})]}):(0,k.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,k.jsx)(u.Z,{animation:"border",role:"status",children:(0,k.jsx)("span",{className:"visually-hidden"})})})}}]),r}(c.Component);e.default=y},85463:function(){}}]);