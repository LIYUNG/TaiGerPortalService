"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[7370],{27370:function(e,t,a){a.r(t);var s=a(27853),n=a(84531),d=a(78932),o=a(38128),r=a(47313),i=a(44030),c=a(93298),l=a(47939),u=a(54991),h=a(93105),p=a(51426),g=a(46417),f=function(e,t){console.log("drag started"),console.log("cardId: ".concat(e)),console.log("laneId: ".concat(t))},m=function(e,t,a){console.log("drag ended"),console.log("cardId: ".concat(e)),console.log("sourceLaneId: ".concat(t)),console.log("targetLaneId: ".concat(a))},C=function(e){console.log(e)},_=function(e){(0,d.Z)(a,e);var t=(0,o.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var n=arguments.length,d=new Array(n),o=0;o<n;o++)d[o]=arguments[o];return(e=t.call.apply(t,[this].concat(d))).state={error:null,isLoaded:!1,tasks:null,success:null,card_title:"",card_description:"",card_modal_flag:!1,empty:!1},e.completeCard=function(){e.state.eventBus.publish({type:"ADD_CARD",laneId:"COMPLETED",card:{id:"Milk",title:"Buy Milk",label:"15 mins",description:"Use Headspace app"}}),e.state.eventBus.publish({type:"REMOVE_CARD",laneId:"PLANNED",cardId:"Milk"})},e.closeCardWindow=function(){e.setState({card_modal_flag:!1})},e.onCardClick=function(t,a,s){console.log(t),console.log(a),console.log(s);var n=e.state.tasks.lanes.find((function(e){return e.id===s}));console.log(n);var d=n.cards.find((function(e){return e.id===t}));e.setState({card_title:d.title,card_description:d.description,card_modal_flag:!0})},e.addCard=function(){e.state.eventBus.publish({type:"ADD_CARD",laneId:"BLOCKED",card:{id:"Ec2Error",title:"EC2 Instance Down",label:"30 mins",description:"Main EC2 instance down"}})},e.setEventBus=function(t){e.setState({eventBus:t})},e.handleCardAdd=function(e,t){console.log("New card added to lane ".concat(t)),console.dir(e)},e.shouldReceiveNewData=function(e){console.log("New card has been added"),console.log(e)},e.initTask=function(){var t=e.props.match?e.props.match.params.student_id:e.props.student_id;(0,p.i8)(t).then((function(t){var a=t.data,s=a.success,n=a.data,d=n[0];0!==n.length?s?e.setState({success:s,tasks:d,empty:!1,isLoaded:!0}):alert(t.data.message):s?e.setState({success:s,empty:!0,isLoaded:!0}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!1,error:t})}))},e}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match?this.props.match.params.student_id:this.props.student_id;t&&(0,p._B)(t).then((function(t){var a=t.data,s=a.success,n=a.data,d=n[0];0!==n.length?s?e.setState({success:s,tasks:d,empty:!1,isLoaded:!0}):alert(t.data.message):s?e.setState({success:s,empty:!0,isLoaded:!0}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!1,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,s={position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"};return t?(0,g.jsx)("div",{children:"Error: your session is timeout! Please refresh the page and Login"}):a||this.state.tasks?(0,g.jsxs)(u.Z,{children:[this.state.empty?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(c.Z,{style:s,onClick:this.initTask,children:"Create Tasks"})}):(0,g.jsx)(h.ZP,{data:this.state.tasks,style:{backgroundColor:"transparent"},cardDraggable:!0,onDataChange:C,onCardAdd:this.handleCardAdd,eventBusHandle:this.setEventBus,handleDragStart:f,handleDragEnd:m,onCardClick:this.onCardClick}),(0,g.jsxs)(l.Z,{show:this.state.card_modal_flag,onHide:this.closeCardWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,g.jsx)(l.Z.Header,{children:(0,g.jsx)(l.Z.Title,{id:"contained-modal-title-vcenter",children:this.state.card_title})}),(0,g.jsxs)(l.Z.Body,{children:[this.state.card_description," "]}),(0,g.jsx)(l.Z.Footer,{children:(0,g.jsx)(c.Z,{onClick:this.closeCardWindow,children:"Close"})})]})]}):(0,g.jsx)("div",{style:s,children:(0,g.jsx)(i.Z,{animation:"border",role:"status",children:(0,g.jsx)("span",{className:"visually-hidden"})})})}}]),a}(r.Component);t.default=_}}]);