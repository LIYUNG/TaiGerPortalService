"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2646],{50099:function(e,t,a){var n=a(35531),s=a(27853),r=a(84531),i=a(78932),o=a(66621),d=a(47313),l=a(58050),c=a(72880),h=a(88815),p=a(29678),u=a.n(p),m=a(54991),f=a(12401),x=a(46417),j=function(e){(0,i.Z)(a,e);var t=(0,o.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,r.Z)(a,[{key:"render",value:function(){var e,t,a,s,r,i=this,o=[];return this.state.isOption&&(a=(0,x.jsx)("div",{className:"card-header-right",children:(0,x.jsxs)(l.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,x.jsx)(l.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,x.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,x.jsxs)(l.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,x.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){i.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,x.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,x.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){i.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,x.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,x.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,x.jsx)("i",{className:"feather icon-refresh-cw"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Reload "})]}),(0,x.jsxs)(l.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,x.jsx)("i",{className:"feather icon-trash"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Remove "})]})]})]})})),s=(0,x.jsxs)(c.Z.Header,{children:[(0,x.jsx)(c.Z.Title,{as:"h5",children:this.props.title}),a]}),this.state.fullCard&&(o=[].concat((0,n.Z)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat((0,n.Z)(o),["card-load"]),t=(0,x.jsx)("div",{className:"card-loader",children:(0,x.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(o=[].concat((0,n.Z)(o),["d-none"])),this.props.cardClass&&(o=[].concat((0,n.Z)(o),[this.props.cardClass])),r=(0,x.jsxs)(c.Z,{className:o.join(" "),style:e,children:[s,(0,x.jsx)(h.Z,{in:!this.state.collapseCard,children:(0,x.jsx)("div",{children:(0,x.jsx)(c.Z.Body,{children:this.props.children})})}),t]}),(0,x.jsx)(m.Z,{children:r})}}]),a}(d.Component);t.Z=u()(j)},42646:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var n=a(35531),s=a(18489),r=a(27853),i=a(84531),o=a(78932),d=a(66621),l=a(47313),c=a(44030),h=a(63849),p=a(72880),u=a(93298),m=a(31616),f=a(83109),x=a(54991),j=a(88815),Z=a(54972),g=a(52500),v=a(79489),C=(a(85463),a(43636),a(46417)),y=function(e){(0,o.Z)(a,e);var t=(0,d.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={editorState:null,ConvertedContent:"",isLoaded:!1},e}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=null;if(this.props.message.message){var a=(0,g.convertFromRaw)(JSON.parse(this.props.message.message));t=g.EditorState.createWithContent(a)}else t=g.EditorState.createEmpty();this.setState((function(a){return(0,s.Z)((0,s.Z)({},a),{},{editorState:t,ConvertedContent:t,isLoaded:e.props.isLoaded})}))}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded)return(0,C.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,C.jsx)(c.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})});var t=this.props.message.file.map((function(t){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:t._id}),(0,C.jsx)("div",{children:t.name}),(0,C.jsx)(u.Z,{size:"sm",onClick:function(a){return e.props.onDownloadFileInMessage(a,e.props.message._id,t._id)}})]})}));return(0,C.jsxs)(p.Z,{border:"primary",className:"mb-2 mx-0",children:[(0,C.jsxs)(p.Z.Header,{onClick:function(){return e.props.singleExpandtHandler(e.props.idx)},children:[(0,C.jsxs)(p.Z.Title,{as:"h5","aria-controls":"accordion"+this.props.idx,"aria-expanded":this.props.accordionKeys[this.props.idx]===this.props.idx,children:[this.props.message.user_id.firstname," ",this.props.message.user_id.lastname," on ",new Date(this.props.message.createdAt).toLocaleTimeString(),", ",new Date(this.props.message.createdAt).toLocaleDateString()]}),(0,C.jsx)(Z.job,{})]}),(0,C.jsx)(j.Z,{in:this.props.accordionKeys[this.props.idx]===this.props.idx,children:(0,C.jsxs)(p.Z.Body,{children:[(0,C.jsx)(v.Editor,{spellCheck:!0,readOnly:!0,toolbarHidden:!0,editorState:this.state.editorState,onEditorStateChange:this.handleEditorChange}),t]})})]})}}]),a}(l.Component),_=y,w=function(e){(0,o.Z)(a,e);var t=(0,d.Z)(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,i.Z)(a,[{key:"render",value:function(){var e=this,t=this.props.thread.messages.map((function(t,a){return(0,C.jsx)(_,{onDownloadFileInMessage:e.props.onDownloadFileInMessage,accordionKeys:e.props.accordionKeys,singleExpandtHandler:e.props.singleExpandtHandler,id:t._id,idx:a,message:t,onTrashClick:e.props.onTrashClick,lastupdate:e.props.lastupdate,isLoaded:e.props.isLoaded},t._id)}));return(0,C.jsx)(C.Fragment,{children:t})}}]),a}(l.Component),N=w,b=a(94611),S=a(86450),L=a(29021),k=a(51426),E=function(e){(0,o.Z)(a,e);var t=(0,d.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];return(e=t.call.apply(t,[this].concat(o))).state={error:null,timeouterror:null,unauthorizederror:null,pagenotfounderror:null,file:null,isLoaded:!1,articles:[],thread:[],editFormOpen:!1,defaultStep:1,editorState:null,expand:!0,accordionKeys:[0]},e.onFileChange=function(t){e.setState({file:t.target.files[0]})},e.handleEditorChange=function(t){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{editorState:t})}))},e.ConfirmSubmitMessageHandler=function(t,a){var n=JSON.stringify((0,g.convertToRaw)(a.getCurrentContent())),s=new FormData;s.append("file",e.state.file),s.append("message",n),(0,k.me)(e.state.documentsthreadId,e.state.thread.student_id._id,s).then((function(t){var a=t.data,n=a.success,s=a.data;n?e.setState({success:n,file:null,editorState:null,thread:s,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})}))},e.onDownloadTemplate=function(e,t){e.preventDefault(),(0,k.Bl)(t).then((function(e){var t=e.headers["content-disposition"].split('"')[1],a=e.data;if(0!==a.size){var n=t.split(".");if("pdf"===(n=n.pop())){var s=window.URL.createObjectURL(new Blob([a],{type:"application/pdf"}));window.open(s,"_blank").document.title=t}else{var r=window.URL.createObjectURL(new Blob([a])),i=document.createElement("a");i.href=r,i.setAttribute("download",t),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}}}),(function(e){alert("The file is not available.")}))},e.onDownloadFileInMessage=function(t,a,n){t.preventDefault(),(0,k.qu)(e.state.documentsthreadId,a,n).then((function(e){var t=e.headers["content-disposition"].split('"')[1],a=e.data;if(0!==a.size){var n=t.split(".");if("pdf"===(n=n.pop())){var s=window.URL.createObjectURL(new Blob([a],{type:"application/pdf"}));window.open(s,"_blank").document.title=t}else{var r=window.URL.createObjectURL(new Blob([a])),i=document.createElement("a");i.href=r,i.setAttribute("download",t),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}}}),(function(e){alert("The file is not available.")}))},e.handleTrashClick=function(t){e.deleteArticle(t)},e.deleteArticle=function(t){e.setState({articles:e.state.articles.filter((function(e){return e._id!==t}))}),(0,k.oe)(t).then((function(e){}),(function(t){e.setState({isLoaded:!1,error:t})}))},e.singleExpandtHandler=function(t){var a=(0,n.Z)(e.state.accordionKeys);a[t]=a[t]!==t?t:-1,e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{accordionKeys:a})}))},e.AllCollapsetHandler=function(){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{expand:!1,accordionKeys:new Array(e.state.thread.messages.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){e.setState((function(t){return(0,s.Z)((0,s.Z)({},t),{},{expand:!0,accordionKeys:new Array(e.state.thread.messages.length).fill().map((function(e,t){return t}))})}))},e.getRequirement=function(t){return t.file_type.includes("Essay")?"yes"===t.program_id.essay_required?(0,C.jsx)("p",{children:e.state.thread.program_id.essay_requirements?e.state.thread.program_id.essay_requirements:"No"}):(0,C.jsx)("p",{children:"No"}):t.file_type.includes("ML")?"yes"===t.program_id.ml_required?(0,C.jsx)("p",{children:e.state.thread.program_id.ml_requirements?e.state.thread.program_id.ml_requirements:"No"}):(0,C.jsx)("p",{children:"No"}):t.file_type.includes("RL")?"yes"===t.program_id.rl_required?(0,C.jsx)("p",{children:e.state.thread.program_id.rl_requirements?e.state.thread.program_id.rl_requirements:"No"}):(0,C.jsx)("p",{children:"No"}):void 0},e}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e=this;(0,k.vn)(this.props.match.params.documentsthreadId).then((function(t){var a=t.data,n=a.success,s=a.data;n?e.setState({success:n,thread:s,isLoaded:!0,documentsthreadId:e.props.match.params.documentsthreadId,file:null,accordionKeys:new Array(s.messages.length).fill().map((function(e,t){return t}))}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({isLoaded:!1,error:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.pagenotfounderror,n=t.unauthorizederror,s=t.timeouterror,r=t.isLoaded,i={position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"};if(s)return(0,C.jsx)("div",{children:(0,C.jsx)(b.Z,{})});if(n)return(0,C.jsx)("div",{children:(0,C.jsx)(S.Z,{})});if(a)return(0,C.jsx)("div",{children:(0,C.jsx)(L.Z,{})});if(!r&&!this.state.data)return(0,C.jsx)("div",{style:i,children:(0,C.jsx)(c.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})});var o=window.templatelist.find((function(t){return t.prop.includes(e.state.thread.file_type.split("_")[0])}));return(0,C.jsxs)(x.Z,{children:[!r&&(0,C.jsx)("div",{style:i,children:(0,C.jsx)(c.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(p.Z,{className:"mb-2 mx-0",children:(0,C.jsx)(p.Z.Header,{children:(0,C.jsxs)(p.Z.Title,{as:"h5",children:[this.state.thread.student_id.firstname," ",this.state.thread.student_id.lastname," - ",this.state.thread.program_id?this.state.thread.program_id.school+" "+this.state.thread.program_id.program_name:""," ",this.state.thread.file_type," Discussion thread","   ",this.state.expand?(0,C.jsx)(u.Z,{className:"btn-sm float-right",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,C.jsx)(u.Z,{className:"btn-sm float-right",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})]})})})}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(p.Z,{className:"mb-2 mx-0",children:(0,C.jsxs)(p.Z.Body,{children:[(0,C.jsxs)(m.Z,{md:6,children:[(0,C.jsx)("h5",{children:"Instruction"}),(0,C.jsx)("p",{children:"Please fill our TaiGer template and attach the filled template in this discussion."}),(0,C.jsxs)("p",{children:["Download template:"," ",o?(0,C.jsx)("b",{style:{cursor:"pointer"},onClick:function(t){return e.onDownloadTemplate(t,o.prop)},children:"Link"}):(0,C.jsx)(C.Fragment,{children:"Not available"})]})]}),(0,C.jsxs)(m.Z,{md:6,children:[(0,C.jsx)("h6",{children:(0,C.jsx)("b",{children:"Requirements:"})}),this.state.thread.program_id?(0,C.jsx)(C.Fragment,{children:this.getRequirement(this.state.thread)}):(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("p",{children:"No"})}),(0,C.jsx)("h6",{children:(0,C.jsx)("b",{children:"Deadline"})}),this.state.thread.program_id&&(0,C.jsxs)("h6",{children:[this.state.thread.student_id.application_preference&&this.state.thread.student_id.application_preference.expected_application_date?this.state.thread.student_id.application_preference.expected_application_date+"-":"",this.state.thread.program_id.application_deadline]})]})]})})}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(N,{onDownloadFileInMessage:this.onDownloadFileInMessage,accordionKeys:this.state.accordionKeys,singleExpandtHandler:this.singleExpandtHandler,thread:this.state.thread,onTrashClick:this.handleTrashClick,isLoaded:this.state.isLoaded})}),(0,C.jsx)(h.Z,{children:(0,C.jsxs)(p.Z,{className:"my-0 mx-0",children:[(0,C.jsx)(p.Z.Header,{children:(0,C.jsxs)(p.Z.Title,{as:"h5",children:[this.props.user.firstname," ",this.props.user.lastname]})}),(0,C.jsx)(h.Z,{style:{textDecoration:"none"},children:(0,C.jsx)(m.Z,{className:"my-0 mx-0",children:(0,C.jsx)(v.Editor,{spellCheck:!0,placeholder:"Write comments",editorState:this.state.editorState,onEditorStateChange:this.handleEditorChange,wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class",toolbar:{link:{defaultTargetOption:"_blank",popupClassName:"mail-editor-link"},image:{urlEnabled:!0,uploadEnabled:!0,uploadCallback:this.uploadImageCallBack,alignmentEnabled:!0,defaultSize:{height:"auto",width:"auto"},inputAccept:"application/pdf,text/plain,application/vnd.openxmlformatsofficedocument.wordprocessingml.document,application/msword,application/vnd.ms-excel"}}})})}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(m.Z,{children:(0,C.jsx)(f.Z,{className:"my-2 mx-2",children:(0,C.jsx)(f.Z.File.Label,{onClick:function(t){return t.target.value=e.state.file||""},children:(0,C.jsx)(f.Z.File.Input,{onChange:function(t){return e.onFileChange(t)}})})})})}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(m.Z,{children:(0,C.jsx)(u.Z,{disabled:!this.state.editorState||!this.state.editorState.getCurrentContent().hasText(),className:"my-2 mx-2 float-right",onClick:function(t){return e.ConfirmSubmitMessageHandler(t,e.state.editorState)},children:"Submit"})})})]})})]})}}]),a}(l.Component),R=E},29021:function(e,t,a){var n=a(27853),s=a(84531),r=a(78932),i=a(66621),o=a(47313),d=a(63849),l=a(31616),c=a(72880),h=a(54991),p=a(46417),u=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){return(0,p.jsx)(h.Z,{children:(0,p.jsx)(d.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(c.Z.Body,{children:(0,p.jsx)("h4",{children:"Page Not Found!"})})})})})})}}]),a}(o.Component);t.Z=u},94611:function(e,t,a){var n=a(27853),s=a(84531),r=a(78932),i=a(66621),o=a(47313),d=a(63849),l=a(31616),c=a(50099),h=a(54991),p=a(46417),u=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){return(0,p.jsx)(h.Z,{children:(0,p.jsx)(d.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:"Time out error. Please login again!"})})})})}}]),a}(o.Component);t.Z=u},86450:function(e,t,a){var n=a(27853),s=a(84531),r=a(78932),i=a(66621),o=a(47313),d=a(63849),l=a(31616),c=a(50099),h=a(54991),p=a(46417),u=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){return(0,p.jsx)(h.Z,{children:(0,p.jsx)(d.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),a}(o.Component);t.Z=u},43636:function(){}}]);