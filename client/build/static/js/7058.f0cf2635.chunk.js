"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[7058],{2932:function(e,t,n){n.r(t);var a=n(18489),s=n(27853),r=n(84531),i=n(78932),l=n(38128),o=n(47313),d=n(44030),c=n(63849),u=n(31616),h=n(65832),m=n(67203),x=n(93298),p=n(47939),f=n(37062),Z=n(58821),j=n(54991),g=n(51767),_=n(82423),y=n(20688),w=n(51426),C=n(46417),v=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={error:null,timeouterror:null,unauthorizederror:null,role:"",isLoaded:!1,data:null,success:!1,user:{},changed_personaldata:!1,personaldata:{firstname:e.props.user.firstname,lastname:e.props.user.lastname,birthday:e.props.user.birthday},credentials:{current_password:"",new_password:"",new_password_again:""},updateconfirmed:!1,updatecredentialconfirmed:!1,res_status:0,res_modal_message:"",res_modal_status:0},e.handleChange_PersonalData=function(t){var n=(0,a.Z)({},e.state.personaldata);n[t.target.id]=t.target.value,e.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{changed_personaldata:!0,personaldata:n})}))},e.handleSubmit_PersonalData=function(t,n){(0,w.pA)(n).then((function(t){var n=t.data,s=n.data,r=n.success,i=t.status;if(r)e.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isLoaded:!0,personaldata:s,success:r,changed_personaldata:!1,updateconfirmed:!0,res_modal_status:i})}));else{var l=t.data.message;e.setState({isLoaded:!0,res_modal_message:l,res_modal_status:i})}}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.handleChange_Credentials=function(t){var n=(0,a.Z)({},e.state.credentials);n[t.target.id]=t.target.value,e.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{credentials:n})}))},e.handleSubmit_Credentials=function(t,n,s){n.new_password===n.new_password_again?n.new_password.length<8?alert("New password should have at least 8 characters."):(0,w.eX)(n,s,n.current_password).then((function(t){var n=t.data.success,s=t.status;if(n)e.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isLoaded:!0,success:n,updatecredentialconfirmed:!0,res_modal_status:s})}));else{var r=t.data.message;e.setState({isLoaded:!0,res_modal_message:r,res_modal_status:s})}}),(function(t){alert(t),e.setState({isLoaded:!0})})):alert("New password not matched")},e.onHide=function(){e.setState({updateconfirmed:!1})},e.onHideCredential=function(){e.setState({updateconfirmed:!1})},e.onHideUnauthorizederror=function(){e.setState({unauthorizederror:!1})},e.setmodalhide=function(){window.location.reload(!0)},e.setmodalhideUpdateCredentials=function(){(0,w.kS)().then((function(e){window.location.reload(!0)}),(function(e){}))},e.ConfirmError=function(){e.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.setState((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isLoaded:!0,success:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.res_status,a=t.isLoaded,s=t.res_modal_status,r=t.res_modal_message;return a?n>=400?(0,C.jsx)(_.Z,{res_status:n}):(0,C.jsxs)(j.Z,{children:[s>=400&&(0,C.jsx)(y.Z,{ConfirmError:this.ConfirmError,res_modal_status:s,res_modal_message:r}),(0,C.jsx)(c.Z,{children:(0,C.jsxs)(u.Z,{children:[(0,C.jsxs)(h.Z,{className:"my-0 mx-0",bg:"dark",text:"white",children:[(0,C.jsx)(h.Z.Header,{children:(0,C.jsx)(h.Z.Title,{className:"my-0 mx-0 text-light",children:"Personal Data"})}),(0,C.jsxs)(h.Z.Body,{children:[""===this.state.personaldata.birthday&&(0,C.jsx)(c.Z,{children:(0,C.jsx)(u.Z,{children:(0,C.jsx)(h.Z,{className:"my-2 mx-0",bg:"danger",text:"light",children:(0,C.jsxs)("p",{className:"text-light my-3 mx-3",style:{textAlign:"left"},children:[(0,C.jsx)(Z.SgR,{size:18}),(0,C.jsx)("b",{className:"mx-2",children:"Reminder:"})," Please fill your birthday:"," ",(0,C.jsx)(f.Z,{to:"/settings",style:{textDecoration:"none"},className:"text-info",children:"Survey"})," "]})})})}),(0,C.jsxs)(c.Z,{children:[(0,C.jsxs)(u.Z,{children:[(0,C.jsxs)(m.Z.Group,{controlId:"firstname",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Firstname"}),(0,C.jsx)(m.Z.Control,{type:"text",placeholder:"First name",autoComplete:"nope",defaultValue:this.state.personaldata.firstname,onChange:function(t){return e.handleChange_PersonalData(t)}})]}),(0,C.jsx)("br",{}),(0,C.jsxs)(m.Z.Group,{className:"mb-2",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Email"}),(0,C.jsx)("p",{className:"text-primary",children:this.props.user.email})]})]}),(0,C.jsxs)(u.Z,{md:6,children:[(0,C.jsxs)(m.Z.Group,{controlId:"lastname",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Lastname"}),(0,C.jsx)(m.Z.Control,{type:"text",placeholder:"Last name",defaultValue:this.state.personaldata.lastname,onChange:function(t){return e.handleChange_PersonalData(t)}})]}),(0,C.jsxs)(m.Z.Group,{className:"my-2",controlId:"birthday",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Birthday"}),(0,C.jsx)(m.Z.Control,{type:"date",placeholder:"1999/01/01",defaultValue:this.state.personaldata.birthday,onChange:function(t){return e.handleChange_PersonalData(t)}})]}),(0,C.jsx)(x.Z,{variant:"primary",disabled:""===this.state.personaldata.firstname||""===this.state.personaldata.lastname||!this.state.changed_personaldata,onClick:function(t){return e.handleSubmit_PersonalData(t,e.state.personaldata)},children:"Update"})]})]})]})]}),!a&&(0,C.jsx)("div",{style:g.nT,children:(0,C.jsx)(d.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})})]})}),(0,C.jsx)(c.Z,{children:(0,C.jsxs)(u.Z,{md:6,children:[(0,C.jsxs)(h.Z,{className:"my-4 mx-0",bg:"dark",text:"white",children:[(0,C.jsx)(h.Z.Header,{children:(0,C.jsx)(h.Z.Title,{className:"my-0 mx-0 text-light",children:"Reset Login Password"})}),(0,C.jsxs)(h.Z.Body,{children:[(0,C.jsx)(c.Z,{className:"my-0 mx-0",children:(0,C.jsx)(u.Z,{children:(0,C.jsxs)(m.Z.Group,{controlId:"current_password",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Current Password"}),(0,C.jsx)(m.Z.Control,{type:"password",onChange:function(t){return e.handleChange_Credentials(t)}})]})})}),(0,C.jsx)(c.Z,{className:"my-4 mx-0",children:(0,C.jsx)(u.Z,{children:(0,C.jsxs)(m.Z.Group,{controlId:"new_password",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"New Password"}),(0,C.jsx)(m.Z.Control,{type:"password",onChange:function(t){return e.handleChange_Credentials(t)}})]})})}),(0,C.jsx)(c.Z,{className:"my-0 mx-0",children:(0,C.jsxs)(u.Z,{children:[(0,C.jsxs)(m.Z.Group,{controlId:"new_password_again",children:[(0,C.jsx)(m.Z.Label,{className:"my-0 mx-0 text-light",children:"Enter New Password Again"}),(0,C.jsx)(m.Z.Control,{type:"password",onChange:function(t){return e.handleChange_Credentials(t)}})]}),(0,C.jsx)("br",{}),(0,C.jsx)(x.Z,{disabled:""===this.state.credentials.current_password||""===this.state.credentials.new_password||""===this.state.credentials.new_password_again,variant:"primary",onClick:function(t){return e.handleSubmit_Credentials(t,e.state.credentials,e.props.user.email)},children:"Reset Password"})]})})]})]}),!a&&(0,C.jsx)("div",{style:g.nT,children:(0,C.jsx)(d.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})})]})}),(0,C.jsxs)(p.Z,{show:this.state.updateconfirmed,onHide:this.onHide,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,C.jsx)(p.Z.Header,{children:(0,C.jsx)(p.Z.Title,{id:"contained-modal-title-vcenter",children:"Update Success"})}),(0,C.jsx)(p.Z.Body,{children:"Personal Data is updated successfully!"}),(0,C.jsx)(p.Z.Footer,{children:(0,C.jsx)(x.Z,{onClick:this.setmodalhide,children:"Close"})})]}),(0,C.jsxs)(p.Z,{show:this.state.unauthorizederror,onHide:this.onHideUnauthorizederror,size:"sm",bg:"danger","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,C.jsx)(p.Z.Header,{children:(0,C.jsx)(p.Z.Title,{id:"contained-modal-title-vcenter",children:"Error"})}),(0,C.jsx)(p.Z.Body,{children:"Your current passwords are wrong. Please enter correct the current passwords."}),(0,C.jsx)(p.Z.Footer,{children:(0,C.jsx)(x.Z,{onClick:function(t){return e.onHideUnauthorizederror(t)},children:"Ok"})})]}),(0,C.jsxs)(p.Z,{show:this.state.updatecredentialconfirmed,onHide:this.onHideCredential,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,C.jsx)(p.Z.Header,{children:(0,C.jsx)(p.Z.Title,{id:"contained-modal-title-vcenter",children:"Update Credentials Successfully"})}),(0,C.jsx)(p.Z.Body,{children:"Credentials are updated successfully! Please login again."}),(0,C.jsx)(p.Z.Footer,{children:(0,C.jsx)(x.Z,{onClick:function(t){return e.setmodalhideUpdateCredentials(t)},children:"Ok"})})]})]}):(0,C.jsx)("div",{style:g.nT,children:(0,C.jsx)(d.Z,{animation:"border",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden"})})})}}]),n}(o.Component);t.default=v},62396:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(18489),s=n(83738),r=n(36222),i=n(46123),l=n.n(i),o=n(46988),d=n(47313),c=n(22752),u=n(59498);var h,m=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];e.apply(this,a),t.apply(this,a)}}),null)},x=n(6280),p=n(39776),f=n(46417),Z=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],j={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function g(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],a=j[e];return n+parseInt((0,o.Z)(t,a[0]),10)+parseInt((0,o.Z)(t,a[1]),10)}var _=(h={},(0,r.Z)(h,c.Wj,"collapse"),(0,r.Z)(h,c.Ix,"collapsing"),(0,r.Z)(h,c.d0,"collapsing"),(0,r.Z)(h,c.cn,"collapse show"),h),y={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:g},w=d.forwardRef((function(e,t){var n=e.onEnter,r=e.onEntering,i=e.onEntered,o=e.onExit,c=e.onExiting,h=e.className,j=e.children,y=e.dimension,w=void 0===y?"height":y,C=e.getDimensionValue,v=void 0===C?g:C,b=(0,s.Z)(e,Z),N="function"===typeof w?w():w,E=(0,d.useMemo)((function(){return m((function(e){e.style[N]="0"}),n)}),[N,n]),S=(0,d.useMemo)((function(){return m((function(e){var t="scroll".concat(N[0].toUpperCase()).concat(N.slice(1));e.style[N]="".concat(e[t],"px")}),r)}),[N,r]),L=(0,d.useMemo)((function(){return m((function(e){e.style[N]=null}),i)}),[N,i]),P=(0,d.useMemo)((function(){return m((function(e){e.style[N]="".concat(v(N,e),"px"),(0,x.Z)(e)}),o)}),[o,v,N]),k=(0,d.useMemo)((function(){return m((function(e){e.style[N]=null}),c)}),[N,c]);return(0,f.jsx)(p.Z,(0,a.Z)((0,a.Z)({ref:t,addEndListener:u.Z},b),{},{"aria-expanded":b.role?b.in:null,onEnter:E,onEntering:S,onEntered:L,onExit:P,onExiting:k,childRef:j.ref,children:function(e,t){return d.cloneElement(j,(0,a.Z)((0,a.Z)({},t),{},{className:l()(h,j.props.className,_[e],"width"===N&&"collapse-horizontal")}))}}))}));w.defaultProps=y;var C=w}}]);