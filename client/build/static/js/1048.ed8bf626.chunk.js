"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[1048],{81048:function(e,t,s){s.r(t),s.d(t,{default:function(){return U}});var n=s(27853),r=s(84531),a=s(78932),i=s(38128),o=s(47313),d=s(44030),l=s(63849),u=s(65832),c=s(465),p=s(54991),f=s(37062),m=s(3394),h=s(57864),_=s(58821),x=s(46417),j=function(e){(0,a.Z)(s,e);var t=(0,i.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={student:e.props.student,student_id:"",docName:"",file:""},e}return(0,r.Z)(s,[{key:"render",value:function(){for(var e=this,t=(Object.values(window.profile_list),Object.keys(window.profile_list)),s={},n={},r={},a={},i=0;i<t.length;i++)s[t[i]]="missing",n[t[i]]="",r[t[i]]="",a[t[i]]="";if(this.props.student.profile)for(var o=0;o<this.props.student.profile.length;o++)"uploaded"===this.props.student.profile[o].status?s[this.props.student.profile[o].name]="uploaded":"accepted"===this.props.student.profile[o].status?s[this.props.student.profile[o].name]="accepted":"rejected"===this.props.student.profile[o].status?s[this.props.student.profile[o].name]="rejected":"notneeded"===this.props.student.profile[o].status?s[this.props.student.profile[o].name]="notneeded":"missing"===this.props.student.profile[o].status&&(s[this.props.student.profile[o].name]="missing"),n[this.props.student.profile[o].name]=this.props.student.profile[o].feedback?this.props.student.profile[o].feedback:"",r[this.props.student.profile[o].name]=new Date(this.props.student.profile[o].updatedAt).toLocaleDateString(),a[this.props.student.profile[o].name]=new Date(this.props.student.profile[o].updatedAt).toLocaleTimeString();for(var d,l=Object.keys(window.profile_list),u={background:"red"},c={background:"green"},p="Complete",j=0;j<l.length;j++)if("uploaded"===s[l[j]]||"rejected"===s[l[j]]||"missing"===s[l[j]]){c=u,p="Incomplete";break}return d=l.map((function(t,n){return"uploaded"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.QRz,{size:24,color:"orange",title:"Uploaded successfully"})})},n):"accepted"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(m.cfq,{size:24,color:"limegreen",title:"Valid Document"})})},n):"rejected"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.LHV,{size:24,color:"red",title:"Invalid Document"})})},n):"notneeded"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(_.pZ2,{size:24,color:"lightgray",title:"Not needed"})})},n):(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.znh,{size:24,color:"lightgray",title:"No Document uploaded"})})},n)})),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{style:c,title:p,children:(0,x.jsxs)(f.Z,{to:"/student-database/"+this.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-light",children:[this.props.student.firstname," ",this.props.student.lastname]})}),d]})})}}]),s}(o.Component),Z=j,g=s(36222),v=s(18489),b=s(31616),k=s(75828),L=s(60257),F=s(46090),y=s(3735),D=s(59931),N=s(20688),S=s(51767),w=s(51426),A=function(e){(0,a.Z)(s,e);var t=(0,i.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={student:e.props.student,student_id:"",isLoaded:{},ready:!1,docName:"",file:"",deleteFileWarningModel:!1,res_status:0,res_modal_status:""},e.onUpdateProfileFilefromstudent=function(t,s,n,r){e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!1))}})),(0,w.dn)(t,s,n,r).then((function(s){var n=s.data,r=n.data,a=n.success,i=s.status;if(a)e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student:r,success:a,isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!0)),res_modal_status:i})}));else{var o=s.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!0)),res_modal_message:o,res_modal_status:i}}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onDeleteFilefromstudent=function(t,s){var n=(0,v.Z)({},e.state.student),r=n.profile.findIndex((function(e){return e.name===t}));e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!1))}})),(0,w._I)(t,s).then((function(s){var a=s.data,i=a.data,o=a.success,d=s.status;if(o)n.profile[r]=i,e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student_id:"",category:"",isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!0)),student:n,success:o,deleteFileWarningModel:!1,res_modal_status:d})}));else{var l=s.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},t,!0)),deleteFileWarningModel:!1,res_modal_message:l,res_modal_status:d}}))}}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.ConfirmError=function(){e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e.handleGeneralDocSubmit=function(t,s,n){t.preventDefault(),e.onSubmitGeneralFile(t,t.target.files[0],s,n)},e.onSubmitGeneralFile=function(t,s,n,r){t.preventDefault();var a=new FormData;a.append("file",s),e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},n,!1))}})),(0,w.HQ)(n,r,a).then((function(t){var s=t.data,r=s.data,a=s.success,i=t.status;if(a)e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student:r,success:a,category:"",isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},n,!0)),file:"",res_modal_status:i})}));else{var o=t.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,g.Z)({},n,!0)),res_modal_message:o,res_modal_status:i}}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){for(var e=Object.keys(window.profile_wtih_doc_link_list),t={},s=0;s<e.length;s++)t[e[s]]=!0;this.setState({isLoaded:t,ready:!0})}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_modal_status,n=t.res_modal_message;if(!t.ready)return(0,x.jsx)("div",{style:S.nT,children:(0,x.jsx)(d.Z,{animation:"border",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden"})})});for(var r,a=Object.values(window.profile_list),i=Object.keys(window.profile_wtih_doc_link_list),o={},p={},f={},m={},h=0;h<i.length;h++)o[i[h]]={status:"missing",link:""},p[i[h]]="",f[i[h]]="",m[i[h]]="";if(this.props.base_docs_link)for(var _=0;_<this.props.base_docs_link.length;_++)o[this.props.base_docs_link[_].key].link=this.props.base_docs_link[_].link;if(this.state.student.profile)for(var j=0;j<this.state.student.profile.length;j++){var Z=this.state.student.profile[j].path.replace(/\\/g,"/");"uploaded"===this.state.student.profile[j].status?(o[this.state.student.profile[j].name].status="uploaded",o[this.state.student.profile[j].name].path=Z.split("/")[1]):"accepted"===this.state.student.profile[j].status?(o[this.state.student.profile[j].name].status="accepted",o[this.state.student.profile[j].name].path=Z.split("/")[1]):"rejected"===this.state.student.profile[j].status?(o[this.state.student.profile[j].name].status="rejected",o[this.state.student.profile[j].name].path=Z.split("/")[1]):"notneeded"===this.state.student.profile[j].status?o[this.state.student.profile[j].name].status="notneeded":"missing"===this.state.student.profile[j].status&&(o[this.state.student.profile[j].name].status="missing"),p[this.state.student.profile[j].name]=this.state.student.profile[j].feedback?this.state.student.profile[j].feedback:"",f[this.state.student.profile[j].name]=new Date(this.state.student.profile[j].updatedAt).toLocaleDateString(),m[this.state.student.profile[j].name]=new Date(this.state.student.profile[j].updatedAt).toLocaleTimeString()}return r=i.map((function(t,s){return"uploaded"===o[t].status?(0,x.jsx)(k.Z,{role:e.props.role,link:o[t].link,path:o[t].path,isLoaded:e.state.isLoaded[t],docName:a[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent},s+1):"accepted"===o[t].status?(0,x.jsx)(L.Z,{role:e.props.role,link:o[t].link,path:o[t].path,isLoaded:e.state.isLoaded[t],docName:a[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):"rejected"===o[t].status?(0,x.jsx)(F.Z,{role:e.props.role,link:o[t].link,path:o[t].path,isLoaded:e.state.isLoaded[t],docName:a[s],date:f[t],time:m[t],k:t,message:p[t],student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):"notneeded"===o[t].status?("Admin"===e.props.role||"Agent"===e.props.role)&&(0,x.jsx)(y.Z,{role:e.props.role,link:o[t].link,isLoaded:e.state.isLoaded[t],docName:a[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):(0,x.jsx)(D.Z,{role:e.props.role,link:o[t].link,isLoaded:e.state.isLoaded[t],docName:a[s],date:f[t],time:m[t],k:t,message:p[t],student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,handleGeneralDocSubmit:e.handleGeneralDocSubmit},s+1)})),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:[(0,x.jsx)(u.Z.Header,{children:(0,x.jsxs)(u.Z.Title,{className:"my-0 mx-0 text-light",children:[this.state.student.firstname," ,",this.state.student.lastname]})}),(0,x.jsx)(l.Z,{children:(0,x.jsxs)(c.Z,{responsive:!0,className:"my-0 mx-0",variant:"dark",text:"light",size:"sm",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"File Name:"}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{children:"Delete"})]})}),(0,x.jsx)("tbody",{children:r})]})}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(b.Z,{className:"md-4",children:this.props.SYMBOL_EXPLANATION})})]},this.props.idx),s>=400&&(0,x.jsx)(N.Z,{ConfirmError:this.ConfirmError,res_modal_status:s,res_modal_message:n})]})}}]),s}(o.Component),M=A,P=s(82423),C=function(e){(0,a.Z)(s,e);var t=(0,i.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={error:null,isLoaded:!1,data:null,base_docs_link:null,success:!1,students:null,file:"",student_id:"",status:"",category:"",feedback:"",expand:!1,CommentModel:!1,accordionKeys:!e.props.user.students||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(e.props.user.students.length).fill().map((function(e,t){return t})),res_status:0,res_modal_status:""},e}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,w.Nc)().then((function(t){var s=t.data,n=s.base_docs_link,r=s.data,a=s.success,i=t.status;a?e.setState({isLoaded:!0,students:r,base_docs_link:n,success:a,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_status,n=t.base_docs_link,r=t.isLoaded,a=t.res_modal_status,i=t.res_modal_message;if(!r&&!this.state.students)return(0,x.jsx)("div",{style:S.nT,children:(0,x.jsx)(d.Z,{animation:"border",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden"})})});if(s>=400)return(0,x.jsx)(P.Z,{res_status:s});var o=Object.values(window.profile_list),f=this.state.students.map((function(t,s){return(0,x.jsx)(Z,{idx:s,student:t,role:e.props.user.role,user:e.props.user,SYMBOL_EXPLANATION:S.vE,isLoaded:r},s)})),m=this.state.students.map((function(t,s){return(0,x.jsx)(M,{idx:s,base_docs_link:n,student:t,role:e.props.user.role,user:e.props.user,SubmitGeneralFile:e.SubmitGeneralFile,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,onDeleteFilefromstudent:e.onDeleteFilefromstudent,SYMBOL_EXPLANATION:S.vE,isLoaded:r,deleteFileWarningModel:e.state.deleteFileWarningModel,CommentModel:e.state.CommentModel},s)}));return(0,x.jsx)(p.Z,{children:(0,x.jsxs)(l.Z,{children:["Admin"===this.props.user.role||"Agent"===this.props.user.role||"Editor"===this.props.user.role?(0,x.jsxs)(u.Z,{className:"mb-0 mx-0",bg:"dark",text:"light",children:[(0,x.jsx)(u.Z.Header,{as:"h5",children:"Base Documents"})," ",(0,x.jsxs)(c.Z,{size:"sm",responsive:!0,hover:!0,text:"light",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"my-0 mx-0 text-light",children:[(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("th",{style:S.NW,children:"First-, Last Name"})}),o.map((function(e,t){return(0,x.jsx)("th",{style:S.NW,children:(0,S.zY)(e)},t)}))]})}),(0,x.jsx)("tbody",{children:f})]})]}):(0,x.jsx)(x.Fragment,{children:m}),a>=400&&(0,x.jsx)(N.Z,{ConfirmError:this.ConfirmError,res_modal_status:a,res_modal_message:i})]})})}}]),s}(o.Component),U=C},465:function(e,t,s){var n=s(18489),r=s(83738),a=s(46123),i=s.n(a),o=s(47313),d=s(68524),l=s(46417),u=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],c=o.forwardRef((function(e,t){var s=e.bsPrefix,a=e.className,o=e.striped,c=e.bordered,p=e.borderless,f=e.hover,m=e.size,h=e.variant,_=e.responsive,x=(0,r.Z)(e,u),j=(0,d.vE)(s,"table"),Z=i()(a,j,h&&"".concat(j,"-").concat(h),m&&"".concat(j,"-").concat(m),o&&"".concat(j,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),c&&"".concat(j,"-bordered"),p&&"".concat(j,"-borderless"),f&&"".concat(j,"-hover")),g=(0,l.jsx)("table",(0,n.Z)((0,n.Z)({},x),{},{className:Z,ref:t}));if(_){var v="".concat(j,"-responsive");return"string"===typeof _&&(v="".concat(v,"-").concat(_)),(0,l.jsx)("div",{className:v,children:g})}return g}));t.Z=c}}]);