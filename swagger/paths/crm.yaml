/api/crm/leads:
  get:
    tags:
      - CRM
    summary: Get leads
    description: Get all CRM leads
    operationId: getLeads
    responses:
      '200':
        description: Leads retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMLeadListResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'

/api/crm/leads/{leadId}:
  get:
    tags:
      - CRM
    summary: Get lead
    description: Get lead details
    operationId: getLead
    parameters:
      - $ref: '../components/parameters/common.yaml#/leadId'
    responses:
      '200':
        description: Lead retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMLeadResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'
  put:
    tags:
      - CRM
    summary: Update lead
    description: Update lead
    operationId: updateLead
    parameters:
      - $ref: '../components/parameters/common.yaml#/leadId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/crm.yaml#/CRMLeadUpdate'
    responses:
      '200':
        description: Lead updated successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMLeadResponse'
      '400':
        $ref: '../components/responses/common.yaml#/Error'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'

/api/crm/students/{studentId}/lead:
  get:
    tags:
      - CRM
    summary: Get lead by student ID
    description: Get CRM lead associated with a specific student
    operationId: getLeadByStudentId
    parameters:
      - $ref: '../components/parameters/common.yaml#/studentId'
    responses:
      '200':
        description: Lead retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMLeadResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'

/api/crm/meetings:
  get:
    tags:
      - CRM
    summary: Get meetings
    description: Get all CRM meetings
    operationId: getMeetings
    responses:
      '200':
        description: Meetings retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMMeetingListResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'

/api/crm/meetings/{meetingId}:
  get:
    tags:
      - CRM
    summary: Get meeting
    description: Get CRM meeting details
    operationId: getMeeting
    parameters:
      - $ref: '../components/parameters/common.yaml#/meetingId'
    responses:
      '200':
        description: Meeting retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMMeetingResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'
  put:
    tags:
      - CRM
    summary: Update meeting
    description: Update CRM meeting
    operationId: updateMeeting
    parameters:
      - $ref: '../components/parameters/common.yaml#/meetingId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/crm.yaml#/CRMMeeting'
    responses:
      '200':
        description: Meeting updated successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMMeetingResponse'
      '400':
        $ref: '../components/responses/common.yaml#/Error'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'

/api/crm/stats:
  get:
    tags:
      - CRM
    summary: Get CRM statistics
    description: Get CRM statistics including weekly counts and metrics
    operationId: getCRMStats
    responses:
      '200':
        description: CRM statistics retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMStatsResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'

/api/crm/sales-reps:
  get:
    tags:
      - CRM
    summary: Get sales representatives
    description: Get all sales representatives
    operationId: getSalesReps
    responses:
      '200':
        description: Sales representatives retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/SalesRepListResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'

/api/crm/deals:
  get:
    tags:
      - CRM
    summary: Get deals
    description: Get all CRM deals
    operationId: getDeals
    responses:
      '200':
        description: Deals retrieved successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMDealListResponse'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
  post:
    tags:
      - CRM
    summary: Create deal
    description: Create a new CRM deal
    operationId: createDeal
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/crm.yaml#/CRMDeal'
    responses:
      '201':
        description: Deal created successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMDealResponse'
      '400':
        $ref: '../components/responses/common.yaml#/Error'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'

/api/crm/deals/{dealId}:
  put:
    tags:
      - CRM
    summary: Update deal
    description: Update CRM deal
    operationId: updateDeal
    parameters:
      - $ref: '../components/parameters/common.yaml#/dealId'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/crm.yaml#/CRMDeal'
    responses:
      '200':
        description: Deal updated successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/CRMDealResponse'
      '400':
        $ref: '../components/responses/common.yaml#/Error'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
      '404':
        $ref: '../components/responses/common.yaml#/NotFound'

/api/crm/instant-invite:
  post:
    tags:
      - CRM
    summary: Instant invite meeting assistant
    description: Send instant meeting invitation to assistant
    operationId: instantInviteMeetingAssistant
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../components/schemas/crm.yaml#/CRMInteractionCreate'
    responses:
      '200':
        description: Meeting invitation sent successfully
        content:
          application/json:
            schema:
              $ref: '../components/schemas/crm.yaml#/MeetingInviteResponse'
      '400':
        $ref: '../components/responses/common.yaml#/Error'
      '401':
        $ref: '../components/responses/common.yaml#/Unauthorized'
