"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2785],{50099:function(e,t,n){var s=n(35531),r=n(27853),i=n(84531),a=n(78932),o=n(38128),l=n(47313),c=n(73158),d=n(65832),u=n(62396),p=n(29678),h=n.n(p),f=n(54991),m=n(12401),x=n(46417),Z=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(n,[{key:"render",value:function(){var e,t,n,r,i,a=this,o=[];return this.state.isOption&&(n=(0,x.jsx)("div",{className:"card-header-right",children:(0,x.jsxs)(c.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,x.jsx)(c.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,x.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,x.jsxs)(c.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,x.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,x.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,x.jsxs)("a",{href:m.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,x.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,x.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,x.jsxs)("a",{href:m.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,x.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,x.jsx)("i",{className:"feather icon-refresh-cw"}),(0,x.jsx)("a",{href:m.Z.BLANK_LINK,children:" Reload "})]}),(0,x.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,x.jsx)("i",{className:"feather icon-trash"}),(0,x.jsx)("a",{href:m.Z.BLANK_LINK,children:" Remove "})]})]})]})})),r=(0,x.jsxs)(d.Z.Header,{children:[(0,x.jsx)(d.Z.Title,{as:"h5",children:this.props.title}),n]}),this.state.fullCard&&(o=[].concat((0,s.Z)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat((0,s.Z)(o),["card-load"]),t=(0,x.jsx)("div",{className:"card-loader",children:(0,x.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(o=[].concat((0,s.Z)(o),["d-none"])),this.props.cardClass&&(o=[].concat((0,s.Z)(o),[this.props.cardClass])),i=(0,x.jsxs)(d.Z,{className:o.join(" "),style:e,children:[r,(0,x.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,x.jsx)("div",{children:(0,x.jsx)(d.Z.Body,{children:this.props.children})})}),t]}),(0,x.jsx)(f.Z,{children:i})}}]),n}(l.Component);t.Z=h()(Z)},62785:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var s=n(27853),r=n(84531),i=n(78932),a=n(38128),o=n(47313),l=n(44030),c=n(63849),d=n(31616),u=n(65832),p=n(54991),h=n(18489),f=n(93298),m=n(67203),x=n(465),Z=n(57864),j=n(46417),v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isLoaded:e.props.isLoaded},e.submitFile=function(t,n){t.preventDefault(),e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{isLoaded:!1})})),e.props.submitFile(t,n)},e}return(0,r.Z)(n,[{key:"render",value:function(){for(var e,t=this,n=Object.keys(this.props.templatelist),s={},r=0;r<n.length;r++)s[n[r]]="missing";for(var i=0;i<this.props.templates.length;i++)s[this.props.templates[i].category_name]="uploaded";return e=this.props.templatelist.map((function(e,n){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:e.name}),"Student"!==t.props.role?"uploaded"===s[e.prop]?(0,j.jsxs)(j.Fragment,{children:["Admin"===t.props.role?(0,j.jsx)("td",{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(f.Z,{variant:"danger",size:"sm",type:"submit",title:"Delete",disabled:!t.props.isLoaded,onClick:function(n){return t.props.onDeleteTemplateFile(n,e.prop)},children:(0,j.jsx)(Z.VPh,{size:16})})})}):(0,j.jsx)("td",{}),(0,j.jsx)("td",{}),(0,j.jsx)("td",{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(m.Z,{onSubmit:function(n){return t.props.onDownloadFilefromstudent(n,e.prop)},children:(0,j.jsx)(m.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,j.jsx)(f.Z,{size:"sm",type:"submit",children:"Download"})})})})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(m.Z.Group,{controlId:"formFile",children:(0,j.jsx)(m.Z.Control,{type:"file",onChange:function(e){return t.props.onFileChange(e)}})})})}),(0,j.jsx)("td",{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(m.Z,{onSubmit:function(n){return t.submitFile(n,e.prop)},children:(0,j.jsx)(m.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,j.jsx)(f.Z,{size:"sm",type:"submit",children:t.state.isLoaded?"Upload":(0,j.jsx)("div",{children:(0,j.jsx)(l.Z,{size:"sm",animation:"border",role:"status",variant:"light",children:(0,j.jsx)("span",{className:"visually-hidden"})})})})})})})}),(0,j.jsx)("td",{})]}):"uploaded"===s[e.prop]?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{}),(0,j.jsx)("td",{children:(0,j.jsx)(d.Z,{children:(0,j.jsx)(m.Z,{onSubmit:function(n){return t.props.onDownloadFilefromstudent(n,e.prop)},children:(0,j.jsx)(m.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,j.jsx)(f.Z,{size:"sm",type:"submit",children:"Download"})})})})}),(0,j.jsx)("td",{})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{}),(0,j.jsx)("td",{}),(0,j.jsx)("td",{})]})]},n+1)})),(0,j.jsx)(x.Z,{variant:"dark",text:"light",className:"my-0 mx-0",size:"sm",children:(0,j.jsx)("tbody",{children:e})})}}]),n}(o.Component),g=v,y=n(51767),b=n(66417),C=n(51426),w=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:null,file:"",isLoaded:!1,students:[],templates:null,success:!1,res_status:0},e.onFileChange=function(t){e.setState({file:t.target.files[0]})},e.onSubmitFile=function(t,n){var s=new FormData;s.append("file",e.state.file),(0,C.b3)(n,s).then((function(t){var n=t.data,s=n.data,r=n.success,i=t.status;r?e.setState({isLoaded:!0,templates:s,success:r,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.submitFile=function(t,n){""===e.state.file?(t.preventDefault(),alert("Please select file")):(t.preventDefault(),e.onSubmitFile(t,n))},e.onDeleteTemplateFile=function(t,n){t.preventDefault(),(0,C.w1)(n).then((function(t){var n=t.data,s=n.data,r=n.success,i=t.status;r?e.setState({isLoaded:!0,templates:s,success:r,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onDownloadFilefromstudent=function(e,t){e.preventDefault(),(0,C.Bl)(t).then((function(e){var t=e.headers["content-disposition"].split('"')[1],n=e.data;if(0!==n.size){var s=t.split(".");if("pdf"===(s=s.pop())){var r=window.URL.createObjectURL(new Blob([n],{type:"application/pdf"}));window.open(r,"_blank").document.title=t}else{var i=window.URL.createObjectURL(new Blob([n])),a=document.createElement("a");a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}}}),(function(e){alert("The file is not available.")}))},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,C.uR)().then((function(t){var n=t.data,s=n.data,r=n.success,i=t.status;r?e.setState({isLoaded:!0,templates:s,success:r,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role&&"Student"!==this.props.user.role)return(0,j.jsx)(Redirect,{to:"/dashboard/default"});var e=this.state,t=e.res_status,n=e.isLoaded;return n||this.state.templates?t>=400?(0,j.jsx)(b.Z,{res_status:t}):(0,j.jsx)(p.Z,{children:(0,j.jsx)(c.Z,{children:(0,j.jsx)(d.Z,{children:(0,j.jsxs)(u.Z,{className:"my-0 mx-0",bg:"primary",text:"white",children:[(0,j.jsx)(u.Z.Header,{children:(0,j.jsx)(u.Z.Title,{className:"my-0 mx-0 text-light",children:"Download TaiGer Document Templates"})}),(0,j.jsx)(g,{isLoaded:n,role:this.props.user.role,userId:this.props.user._id,student:this.state.student,templates:this.state.templates,submitFile:this.submitFile,onFileChange:this.onFileChange,templatelist:window.templatelist,onDeleteTemplateFile:this.onDeleteTemplateFile,onDownloadFilefromstudent:this.onDownloadFilefromstudent})]})})})}):(0,j.jsx)("div",{style:y.nT,children:(0,j.jsx)(l.Z,{animation:"border",role:"status",children:(0,j.jsx)("span",{className:"visually-hidden"})})})}}]),n}(o.Component),N=w},66417:function(e,t,n){n.d(t,{Z:function(){return y}});var s=n(27853),r=n(84531),i=n(78932),a=n(38128),o=n(47313),l=n(63849),c=n(31616),d=n(50099),u=n(54991),p=n(29021),h=n(94611),f=n(86450),m=(n(89351),n(46417)),x=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,m.jsx)(u.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:(0,m.jsx)(d.Z,{children:"Session is expired. Please refresh the page and login again."})})})})}}]),n}(o.Component),Z=x,j=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,m.jsx)(u.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:(0,m.jsx)(d.Z,{children:"Too many requests. Please try later."})})})})}}]),n}(o.Component),v=j,g=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return 401===this.props.res_status?(0,m.jsx)(Z,{}):403===this.props.res_status?(0,m.jsx)(f.Z,{}):404===this.props.res_status?(0,m.jsx)(p.Z,{}):408===this.props.res_status?(0,m.jsx)(h.Z,{}):429===this.props.res_status?(0,m.jsx)(v,{}):this.props.res_status>=500?(0,m.jsx)(u.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{children:(0,m.jsx)(d.Z,{children:"Server problem. Please try later."})})})}):void 0}}]),n}(o.Component),y=g},29021:function(e,t,n){var s=n(27853),r=n(84531),i=n(78932),a=n(38128),o=n(47313),l=n(63849),c=n(31616),d=n(65832),u=n(54991),p=n(46417),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,p.jsx)(u.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{children:(0,p.jsx)(d.Z.Body,{children:(0,p.jsx)("h4",{children:"Page Not Found!"})})})})})})}}]),n}(o.Component);t.Z=h},94611:function(e,t,n){var s=n(27853),r=n(84531),i=n(78932),a=n(38128),o=n(47313),l=n(63849),c=n(31616),d=n(50099),u=n(54991),p=n(46417),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,p.jsx)(u.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{children:"Time out error. Please login again!"})})})})}}]),n}(o.Component);t.Z=h},86450:function(e,t,n){var s=n(27853),r=n(84531),i=n(78932),a=n(38128),o=n(47313),l=n(63849),c=n(31616),d=n(50099),u=n(54991),p=n(46417),h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,p.jsx)(u.Z,{children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(d.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),n}(o.Component);t.Z=h},62396:function(e,t,n){n.d(t,{Z:function(){return C}});var s=n(18489),r=n(83738),i=n(36222),a=n(46123),o=n.n(a),l=n(46988),c=n(47313),d=n(22752),u=n(59498);var p,h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];e.apply(this,s),t.apply(this,s)}}),null)},f=n(6280),m=n(39776),x=n(46417),Z=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],j={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function v(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],s=j[e];return n+parseInt((0,l.Z)(t,s[0]),10)+parseInt((0,l.Z)(t,s[1]),10)}var g=(p={},(0,i.Z)(p,d.Wj,"collapse"),(0,i.Z)(p,d.Ix,"collapsing"),(0,i.Z)(p,d.d0,"collapsing"),(0,i.Z)(p,d.cn,"collapse show"),p),y={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:v},b=c.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,a=e.onEntered,l=e.onExit,d=e.onExiting,p=e.className,j=e.children,y=e.dimension,b=void 0===y?"height":y,C=e.getDimensionValue,w=void 0===C?v:C,N=(0,r.Z)(e,Z),F="function"===typeof b?b():b,L=(0,c.useMemo)((function(){return h((function(e){e.style[F]="0"}),n)}),[F,n]),_=(0,c.useMemo)((function(){return h((function(e){var t="scroll".concat(F[0].toUpperCase()).concat(F.slice(1));e.style[F]="".concat(e[t],"px")}),i)}),[F,i]),S=(0,c.useMemo)((function(){return h((function(e){e.style[F]=null}),a)}),[F,a]),D=(0,c.useMemo)((function(){return h((function(e){e.style[F]="".concat(w(F,e),"px"),(0,f.Z)(e)}),l)}),[l,w,F]),E=(0,c.useMemo)((function(){return h((function(e){e.style[F]=null}),d)}),[F,d]);return(0,x.jsx)(m.Z,(0,s.Z)((0,s.Z)({ref:t,addEndListener:u.Z},N),{},{"aria-expanded":N.role?N.in:null,onEnter:L,onEntering:_,onEntered:S,onExit:D,onExiting:E,childRef:j.ref,children:function(e,t){return c.cloneElement(j,(0,s.Z)((0,s.Z)({},t),{},{className:o()(p,j.props.className,g[e],"width"===F&&"collapse-horizontal")}))}}))}));b.defaultProps=y;var C=b},465:function(e,t,n){var s=n(18489),r=n(83738),i=n(46123),a=n.n(i),o=n(47313),l=n(68524),c=n(46417),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=o.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.striped,u=e.bordered,p=e.borderless,h=e.hover,f=e.size,m=e.variant,x=e.responsive,Z=(0,r.Z)(e,d),j=(0,l.vE)(n,"table"),v=a()(i,j,m&&"".concat(j,"-").concat(m),f&&"".concat(j,"-").concat(f),o&&"".concat(j,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),u&&"".concat(j,"-bordered"),p&&"".concat(j,"-borderless"),h&&"".concat(j,"-hover")),g=(0,c.jsx)("table",(0,s.Z)((0,s.Z)({},Z),{},{className:v,ref:t}));if(x){var y="".concat(j,"-responsive");return"string"===typeof x&&(y="".concat(y,"-").concat(x)),(0,c.jsx)("div",{className:y,children:g})}return g}));t.Z=u}}]);