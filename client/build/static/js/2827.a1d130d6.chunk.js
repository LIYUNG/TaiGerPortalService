"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2827],{37010:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(18489),s=n(35531),o=n(27853),i=n(84531),a=n(78932),d=n(66621),l=n(47313),c=n(44030),u=n(63849),h=n(31616),p=n(72880),f=n(93298),Z=n(83109),x=n(64212),m=n(54991),j=n(94611),v=n(86450),S=n(52500),_=(n(79489),n(37062)),y=n(31974),C=(n(85463),n(43636),n(4901)),g=n(51426),D=n(46417),k=function(e){(0,a.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={timeouterror:null,unauthorizederror:null,student:e.props.student,deleteFileWarningModel:!1,SetAsFinalFileModel:!1,Requirements_Modal:!1,in_edit_mode:!1,student_id:"",doc_thread_id:"",applicationId:"",editorState:null,ConvertedContent:"",isLoaded:!1,requirements:"",file:"",isThreadExisted:!1},e.handleClickEdit=function(t){t.preventDefault(),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!0})}))},e.handleClickCancel=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e.handleClickSave=function(t,n){t.preventDefault();var s=JSON.stringify((0,S.convertToRaw)(n.getCurrentContent())),o={prop:e.props.item,text:s};(0,g.Pd)(o).then((function(t){var r=t.data,s=r.success;r.data;s?e.setState({success:s,editorState:n,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e.handleEditorChange=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{editorState:t})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=null;if(this.props.message){var t=(0,S.convertFromRaw)(JSON.parse(this.props.message));e=S.EditorState.createWithContent(t)}else e=S.EditorState.createEmpty();this.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{editorState:e,ConvertedContent:e,isLoaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.timeouterror,r=t.unauthorizederror,s=(t.error,t.isLoaded);if(n)return(0,D.jsx)("div",{children:(0,D.jsx)(j.Z,{})});if(r)return(0,D.jsx)("div",{children:(0,D.jsx)(v.Z,{})});return s||this.state.student?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(u.Z,{children:(0,D.jsxs)(h.Z,{sm:10,children:[(0,D.jsx)(C.apv,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.props.openDeleteDocModalWindow(e.props.document)}}),this.props.idx,". ",(0,D.jsx)(_.Z,{to:"/docs/search/".concat(this.props.document._id),children:this.props.document.title})]})})}):(0,D.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,D.jsx)(c.Z,{animation:"border",role:"status",children:(0,D.jsx)("span",{className:"visually-hidden"})})})}}]),n}(l.Component),w=k,L=n(29021),E=n(51767),A=function(e){(0,a.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(e=t.call.apply(t,[this].concat(a))).state={error:null,timeouterror:null,unauthorizederror:null,isLoaded:!1,data:null,success:!1,documentlists:[],doc_id_toBeDelete:"",doc_title_toBeDelete:"",doc_title:"",category:"",SetDeleteDocModel:!1,isEdit:!1,expand:!0,editorState:"",accordionKeys:!Object.keys(window.checklist)||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(Object.keys(window.checklist).length).fill().map((function(e,t){return t}))},e.singleExpandtHandler=function(t){var n=(0,s.Z)(e.state.accordionKeys);n[t]=n[t]!==t?t:-1,e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{accordionKeys:n})}))},e.AllCollapsetHandler=function(){var t=Object.keys(window.checklist);e.setState((function(n){return(0,r.Z)((0,r.Z)({},n),{},{expand:!1,accordionKeys:!t||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[-1]:new Array(t.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){var t=Object.keys(window.checklist);e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{expand:!0,accordionKeys:t&&new Array(t.length).fill().map((function(e,t){return t}))})}))},e.handleChange_doc_title=function(t){var n=t.target.value;e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{doc_title:n})}))},e.handleClick=function(){e.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickAdd=function(e){e.preventDefault()},e.handleChange_category=function(t){t.preventDefault();var n=t.target.value;e.setState({category:n})},e.handleDeleteDoc=function(t){(0,g.V0)(e.state.doc_id_toBeDelete).then((function(t){var n=t.data.success,r=(0,s.Z)(e.state.documentlists),o=r.findIndex((function(t){return t._id.toString()===e.state.doc_id_toBeDelete}));o>-1&&r.splice(o,1),n?e.setState({success:n,documentlists:r,SetDeleteDocModel:!1,isEdit:!1,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})}))},e.openDeleteDocModalWindow=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{doc_id_toBeDelete:t._id,doc_title_toBeDelete:t.title,SetDeleteDocModel:!0})}))},e.closeDeleteDocModalWindow=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{SetDeleteDocModel:!1})}))},e.handleClickCancel=function(t){e.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickSave=function(t,n){t.preventDefault();var o=JSON.stringify(n),i={title:e.state.doc_title,category:e.state.category,prop:e.props.item,text:o};(0,g.p8)(i).then((function(t){var n=t.data,r=n.success,o=n.data,i=(0,s.Z)(e.state.documentlists);i.push(o),r?e.setState({success:r,documentlists:i,editorState:"",isEdit:!e.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,g.kB)().then((function(t){var n=t.data,r=n.data,s=n.success;s?e.setState({isLoaded:!0,documentlists:r,success:s}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.unauthorizederror,r=t.timeouterror,s=t.isLoaded,o=t.pagenotfounderror;if(r)return(0,D.jsx)("div",{children:(0,D.jsx)(j.Z,{})});if(n)return(0,D.jsx)("div",{children:(0,D.jsx)(v.Z,{})});if(o)return(0,D.jsx)("div",{children:(0,D.jsx)(L.Z,{})});if(!s)return(0,D.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,D.jsx)(c.Z,{animation:"border",role:"status",children:(0,D.jsx)("span",{className:"visually-hidden"})})});var i=this.state.documentlists.map((function(t,n){return(0,D.jsx)(w,{idx:n,document:t,role:e.props.user.role,openDeleteDocModalWindow:e.openDeleteDocModalWindow},n)}));return(0,D.jsxs)(m.Z,{children:[(0,D.jsx)(u.Z,{className:"sticky-top ",children:(0,D.jsx)(h.Z,{children:(0,D.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,D.jsx)(p.Z.Header,{text:"dark",children:(0,D.jsx)(p.Z.Title,{children:(0,D.jsxs)(u.Z,{children:[(0,D.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:"All Documentations"}),(0,D.jsx)(h.Z,{md:{span:2,offset:0},children:this.state.expand?(0,D.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,D.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})})]})})})})})}),(0,D.jsx)(u.Z,{children:(0,D.jsx)(h.Z,{sm:12,children:(0,D.jsx)(p.Z,{className:"mb-2 mx-0",children:this.state.isEdit?(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(p.Z.Body,{children:[(0,D.jsx)(u.Z,{children:(0,D.jsx)(h.Z,{children:(0,D.jsx)(Z.Z.Group,{controlId:"decided",children:(0,D.jsxs)(Z.Z.Control,{as:"select",onChange:function(t){return e.handleChange_category(t)},children:[(0,D.jsx)("option",{value:"",children:"Select Document Category"}),E.XA.map((function(e,t){return(0,D.jsx)("option",{value:e.key,children:e.value})}))]})})})})," ",(0,D.jsx)(u.Z,{children:(0,D.jsx)(h.Z,{children:(0,D.jsx)(Z.Z.Group,{controlId:"doc_title",className:"mb-4",children:(0,D.jsx)(Z.Z.Control,{type:"text",placeholder:"title",defaultValue:"",onChange:function(t){return e.handleChange_doc_title(t)}})})})}),(0,D.jsx)(y.Z,{category:this.state.category,doc_title:this.state.doc_title,editorState:this.state.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.handleClickCancel,role:this.props.role})]})}):(0,D.jsxs)(p.Z.Body,{children:[(0,D.jsx)(u.Z,{children:(0,D.jsx)(h.Z,{sm:10,children:i})})," ",("Admin"===this.props.user.role||"Agent"===this.props.user.role)&&(0,D.jsx)(f.Z,{onClick:this.handleClick,children:"Add"})]})})})}),(0,D.jsxs)(x.Z,{show:this.state.SetDeleteDocModel,onHide:this.closeDeleteDocModalWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,D.jsx)(x.Z.Header,{children:(0,D.jsx)(x.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,D.jsxs)(x.Z.Body,{children:["Do you want to delete documentation of title:"," ",this.state.doc_title_toBeDelete,"?"]}),(0,D.jsxs)(x.Z.Footer,{children:[(0,D.jsx)(f.Z,{disabled:!s,onClick:this.handleDeleteDoc,children:"Yes"}),(0,D.jsx)(f.Z,{onClick:this.closeDeleteDocModalWindow,children:"No"})]})]})]})}}]),n}(l.Component),b=A}}]);