"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[502],{84637:function(e,t,n){n.r(t);var r=n(18489),o=n(35531),s=n(27853),i=n(84531),a=n(78932),d=n(38128),l=n(47313),c=n(44030),u=n(63849),h=n(31616),p=n(65832),f=n(93298),Z=n(76935),x=n(41965),m=n(54991),j=n(26454),v=n(31974),S=n(94611),_=n(86450),g=n(29021),y=n(51767),C=n(94395),D=n(51426),k=n(46417),w=function(e){(0,a.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var i=arguments.length,a=new Array(i),d=0;d<i;d++)a[d]=arguments[d];return(e=t.call.apply(t,[this].concat(a))).state={error:null,timeouterror:null,unauthorizederror:null,isLoaded:!1,data:null,success:!1,documentlists:[],doc_id_toBeDelete:"",doc_title_toBeDelete:"",doc_title:"",category:"",SetDeleteDocModel:!1,isEdit:!1,expand:!0,editorState:"",accordionKeys:!Object.keys(window.checklist)||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(Object.keys(window.checklist).length).fill().map((function(e,t){return t}))},e.singleExpandtHandler=function(t){var n=(0,o.Z)(e.state.accordionKeys);n[t]=n[t]!==t?t:-1,e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{accordionKeys:n})}))},e.AllCollapsetHandler=function(){var t=Object.keys(window.checklist);e.setState((function(n){return(0,r.Z)((0,r.Z)({},n),{},{expand:!1,accordionKeys:!t||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[-1]:new Array(t.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){var t=Object.keys(window.checklist);e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{expand:!0,accordionKeys:t&&new Array(t.length).fill().map((function(e,t){return t}))})}))},e.handleChange_doc_title=function(t){var n=t.target.value;e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{doc_title:n})}))},e.handleClick=function(){e.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickAdd=function(e){e.preventDefault()},e.handleChange_category=function(t){t.preventDefault();var n=t.target.value;e.setState({category:n})},e.handleDeleteDoc=function(t){(0,D.V0)(e.state.doc_id_toBeDelete).then((function(t){var n=t.data.success,r=(0,o.Z)(e.state.documentlists),s=r.findIndex((function(t){return t._id.toString()===e.state.doc_id_toBeDelete}));s>-1&&r.splice(s,1),n?e.setState({success:n,documentlists:r,SetDeleteDocModel:!1,isEdit:!1,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})}))},e.openDeleteDocModalWindow=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{doc_id_toBeDelete:t._id,doc_title_toBeDelete:t.title,SetDeleteDocModel:!0})}))},e.closeDeleteDocModalWindow=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{SetDeleteDocModel:!1})}))},e.handleClickCancel=function(t){e.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!e.state.isEdit})}))},e.handleClickSave=function(t,n){t.preventDefault();var s=JSON.stringify(n),i={title:e.state.doc_title,category:e.state.category,prop:e.props.item,text:s};(0,D.p8)(i).then((function(t){var n=t.data,r=n.success,s=n.data,i=(0,o.Z)(e.state.documentlists);i.push(s),r?e.setState({success:r,documentlists:i,editorState:"",isEdit:!e.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;(0,D.kB)().then((function(t){var n=t.data,r=n.data,o=n.success;o?e.setState({isLoaded:!0,documentlists:r,success:o}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,k.jsx)(C.Z,{to:"/dashboard/default"});var t=this.state,n=t.unauthorizederror,r=t.timeouterror,o=t.isLoaded,s=t.pagenotfounderror;if(r)return(0,k.jsx)("div",{children:(0,k.jsx)(S.Z,{})});if(n)return(0,k.jsx)("div",{children:(0,k.jsx)(_.Z,{})});if(s)return(0,k.jsx)("div",{children:(0,k.jsx)(g.Z,{})});if(!o)return(0,k.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,k.jsx)(c.Z,{animation:"border",role:"status",children:(0,k.jsx)("span",{className:"visually-hidden"})})});var i=Object.keys(window.documentlist),a=function(t){var n={};return n["".concat(t)]=e.state.documentlists.filter((function(e){return e.category===t})),n["".concat(t)].map((function(t,n){return(0,k.jsx)(j.Z,{idx:n,path:"/docs/search",document:t,role:e.props.user.role,openDeleteDocModalWindow:e.openDeleteDocModalWindow},n)}))};return(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(u.Z,{className:"sticky-top ",children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,k.jsx)(p.Z.Header,{text:"dark",children:(0,k.jsx)(p.Z.Title,{children:(0,k.jsxs)(u.Z,{children:[(0,k.jsx)(h.Z,{className:"my-0 mx-0 text-light",children:"All Documentations"}),(0,k.jsx)(h.Z,{md:{span:2,offset:0},children:this.state.expand?(0,k.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,k.jsx)(f.Z,{size:"sm",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})})]})})})})})}),(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{sm:12,children:(0,k.jsx)(p.Z,{className:"mb-2 mx-0",children:this.state.isEdit?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(p.Z.Body,{children:[(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(Z.Z.Group,{controlId:"decided",children:(0,k.jsxs)(Z.Z.Control,{as:"select",onChange:function(t){return e.handleChange_category(t)},children:[(0,k.jsx)("option",{value:"",children:"Select Document Category"}),y.XA.map((function(e,t){return(0,k.jsx)("option",{value:e.key,children:e.value},t)}))]})})})})," ",(0,k.jsx)(u.Z,{children:(0,k.jsx)(h.Z,{children:(0,k.jsx)(Z.Z.Group,{controlId:"doc_title",className:"mb-4",children:(0,k.jsx)(Z.Z.Control,{type:"text",placeholder:"title",defaultValue:"",onChange:function(t){return e.handleChange_doc_title(t)}})})})}),(0,k.jsx)(v.Z,{category:this.state.category,doc_title:this.state.doc_title,editorState:this.state.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.handleClickCancel,role:this.props.role})]})}):(0,k.jsxs)(p.Z.Body,{children:[i.map((function(e,t){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{children:(0,k.jsxs)("h5",{children:["- ",window.documentlist["".concat(e)]]})},t),(0,k.jsx)(u.Z,{children:a(e)},t)]})})),("Admin"===this.props.user.role||"Agent"===this.props.user.role)&&(0,k.jsx)(f.Z,{onClick:this.handleClick,children:"Add"})]})})})}),(0,k.jsxs)(x.Z,{show:this.state.SetDeleteDocModel,onHide:this.closeDeleteDocModalWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,k.jsx)(x.Z.Header,{children:(0,k.jsx)(x.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,k.jsxs)(x.Z.Body,{children:["Do you want to delete documentation of title:"," ",this.state.doc_title_toBeDelete,"?"]}),(0,k.jsxs)(x.Z.Footer,{children:[(0,k.jsx)(f.Z,{disabled:!o,onClick:this.handleDeleteDoc,children:"Yes"}),(0,k.jsx)(f.Z,{onClick:this.closeDeleteDocModalWindow,children:"No"})]})]})]})}}]),n}(l.Component);t.default=w},26454:function(e,t,n){var r=n(18489),o=n(27853),s=n(84531),i=n(78932),a=n(38128),d=n(47313),l=n(94611),c=n(86450),u=n(52500),h=(n(79489),n(37062)),p=(n(31974),n(85463),n(43636),n(4901)),f=n(44030),Z=n(63849),x=n(31616),m=n(51426),j=n(46417),v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={timeouterror:null,unauthorizederror:null,student:e.props.student,deleteFileWarningModel:!1,SetAsFinalFileModel:!1,Requirements_Modal:!1,in_edit_mode:!1,student_id:"",doc_thread_id:"",applicationId:"",editorState:null,ConvertedContent:"",isLoaded:!1,requirements:"",file:"",isThreadExisted:!1},e.handleClickEdit=function(t){t.preventDefault(),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!0})}))},e.handleClickCancel=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e.handleClickSave=function(t,n){t.preventDefault();var o=JSON.stringify((0,u.convertToRaw)(n.getCurrentContent())),s={prop:e.props.item,text:o};(0,m.Pd)(s).then((function(t){var r=t.data,o=r.success;r.data;o?e.setState({success:o,editorState:n,isLoaded:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status?e.setState({isLoaded:!0,unauthorizederror:!0}):400===t.status&&e.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{in_edit_mode:!1})}))},e.handleEditorChange=function(t){e.setState((function(e){return(0,r.Z)((0,r.Z)({},e),{},{editorState:t})}))},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e=null;if(this.props.message){var t=(0,u.convertFromRaw)(JSON.parse(this.props.message));e=u.EditorState.createWithContent(t)}else e=u.EditorState.createEmpty();this.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{editorState:e,ConvertedContent:e,isLoaded:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.timeouterror,r=t.unauthorizederror,o=(t.error,t.isLoaded);if(n)return(0,j.jsx)("div",{children:(0,j.jsx)(l.Z,{})});if(r)return(0,j.jsx)("div",{children:(0,j.jsx)(c.Z,{})});return o||this.state.student?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Z.Z,{children:(0,j.jsxs)(x.Z,{sm:10,children:[(0,j.jsx)(p.apv,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.props.openDeleteDocModalWindow(e.props.document)}}),this.props.idx,". ",(0,j.jsx)(h.Z,{to:"".concat(this.props.path,"/").concat(this.props.document._id),children:this.props.document.title})]})})}):(0,j.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,j.jsx)(f.Z,{animation:"border",role:"status",children:(0,j.jsx)("span",{className:"visually-hidden"})})})}}]),n}(d.Component);t.Z=v}}]);