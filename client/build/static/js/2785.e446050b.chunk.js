"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2785],{50099:function(e,t,s){var r=s(35531),n=s(27853),i=s(84531),a=s(78932),o=s(38128),l=s(47313),d=s(73158),c=s(65832),u=s(62396),h=s(29678),p=s.n(h),m=s(54991),f=s(12401),x=s(46417),j=function(e){(0,a.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(s,[{key:"render",value:function(){var e,t,s,n,i,a=this,o=[];return this.state.isOption&&(s=(0,x.jsx)("div",{className:"card-header-right",children:(0,x.jsxs)(d.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,x.jsx)(d.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,x.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,x.jsxs)(d.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,x.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,x.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,x.jsxs)("a",{href:f.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,x.jsx)("i",{className:"feather icon-refresh-cw"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Reload "})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,x.jsx)("i",{className:"feather icon-trash"}),(0,x.jsx)("a",{href:f.Z.BLANK_LINK,children:" Remove "})]})]})]})})),n=(0,x.jsxs)(c.Z.Header,{children:[(0,x.jsx)(c.Z.Title,{as:"h5",children:this.props.title}),s]}),this.state.fullCard&&(o=[].concat((0,r.Z)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat((0,r.Z)(o),["card-load"]),t=(0,x.jsx)("div",{className:"card-loader",children:(0,x.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(o=[].concat((0,r.Z)(o),["d-none"])),this.props.cardClass&&(o=[].concat((0,r.Z)(o),[this.props.cardClass])),i=(0,x.jsxs)(c.Z,{className:o.join(" "),style:e,children:[n,(0,x.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,x.jsx)("div",{children:(0,x.jsx)(c.Z.Body,{children:this.props.children})})}),t]}),(0,x.jsx)(m.Z,{children:i})}}]),s}(l.Component);t.Z=p()(j)},62785:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var r=s(27853),n=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(44030),d=s(63849),c=s(31616),u=s(65832),h=s(54991),p=s(51426),m=s(18489),f=s(93298),x=s(76935),j=s(465),Z=s(57864),v=s(46417),b=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isLoaded:e.props.isLoaded},e.submitFile=function(t,s){t.preventDefault(),e.setState((function(e){return(0,m.Z)((0,m.Z)({},e),{},{isLoaded:!1})})),e.props.submitFile(t,s)},e}return(0,n.Z)(s,[{key:"render",value:function(){for(var e,t=this,s=Object.keys(this.props.templatelist),r={},n=0;n<s.length;n++)r[s[n]]="missing";for(var i=0;i<this.props.templates.length;i++)r[this.props.templates[i].category_name]="uploaded";return e=this.props.templatelist.map((function(e,s){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.name}),"Student"!==t.props.role?"uploaded"===r[e.prop]?(0,v.jsxs)(v.Fragment,{children:["Admin"===t.props.role?(0,v.jsx)("td",{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(f.Z,{variant:"danger",size:"sm",type:"submit",title:"Delete",disabled:!t.props.isLoaded,onClick:function(s){return t.props.onDeleteTemplateFile(s,e.prop)},children:(0,v.jsx)(Z.VPh,{size:16})})})}):(0,v.jsx)("td",{}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(x.Z,{onSubmit:function(s){return t.props.onDownloadFilefromstudent(s,e.prop)},children:(0,v.jsx)(x.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,v.jsx)(f.Z,{size:"sm",type:"submit",children:"Download"})})})})})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("td",{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(x.Z.Group,{controlId:"formFile",children:(0,v.jsx)(x.Z.Control,{type:"file",onChange:function(e){return t.props.onFileChange(e)}})})})}),(0,v.jsx)("td",{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(x.Z,{onSubmit:function(s){return t.submitFile(s,e.prop)},children:(0,v.jsx)(x.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,v.jsx)(f.Z,{size:"sm",type:"submit",children:t.state.isLoaded?"Upload":(0,v.jsx)("div",{children:(0,v.jsx)(l.Z,{size:"sm",animation:"border",role:"status",variant:"light",children:(0,v.jsx)("span",{className:"visually-hidden"})})})})})})})}),(0,v.jsx)("td",{})]}):"uploaded"===r[e.prop]?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("td",{}),(0,v.jsx)("td",{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(x.Z,{onSubmit:function(s){return t.props.onDownloadFilefromstudent(s,e.prop)},children:(0,v.jsx)(x.Z.Group,{controlId:"exampleForm.ControlSelect1",children:(0,v.jsx)(f.Z,{size:"sm",type:"submit",children:"Download"})})})})}),(0,v.jsx)("td",{})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("td",{}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{})]})]},s+1)})),(0,v.jsx)(j.Z,{variant:"dark",text:"light",className:"my-0 mx-0",children:(0,v.jsx)("tbody",{children:e})})}}]),s}(o.Component),C=b,g=s(94611),w=s(86450),y=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:null,file:"",isLoaded:!1,students:[],templates:null,success:!1},e.onFileChange=function(t){e.setState({file:t.target.files[0]})},e.onSubmitFile=function(t,s){var r=new FormData;r.append("file",e.state.file),(0,p.b3)(s,r).then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.submitFile=function(t,s){""===e.state.file?(t.preventDefault(),alert("Please select file")):(t.preventDefault(),e.onSubmitFile(t,s))},e.onDeleteTemplateFile=function(t,s){t.preventDefault(),(0,p.w1)(s).then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):alert(t.data.message)}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onDownloadFilefromstudent=function(e,t){e.preventDefault(),(0,p.Bl)(t).then((function(e){var t=e.headers["content-disposition"].split('"')[1],s=e.data;if(0!==s.size){var r=t.split(".");if("pdf"===(r=r.pop())){var n=window.URL.createObjectURL(new Blob([s],{type:"application/pdf"}));window.open(n,"_blank").document.title=t}else{var i=window.URL.createObjectURL(new Blob([s])),a=document.createElement("a");a.href=i,a.setAttribute("download",t),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}}}),(function(e){alert("The file is not available.")}))},e}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,p.uR)().then((function(t){var s=t.data,r=s.data,n=s.success;n?e.setState({isLoaded:!0,templates:r,success:n}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"getFileNameFromContentDisposition",value:function(e){if(!e)return null;var t=e.match(/filename="?([^"]+)"?/);return t?t[1]:null}},{key:"render",value:function(){var e=this.state,t=e.unauthorizederror,s=e.timeouterror,r=e.isLoaded;if(s)return(0,v.jsx)("div",{children:(0,v.jsx)(g.Z,{})});if(t)return(0,v.jsx)("div",{children:(0,v.jsx)(w.Z,{})});return r||this.state.templates?"Student"===this.props.user.role||"Admin"===this.props.user.role||"Editor"===this.props.user.role||"Agent"===this.props.user.role?(0,v.jsx)(h.Z,{children:(0,v.jsx)(d.Z,{children:(0,v.jsx)(c.Z,{children:(0,v.jsxs)(u.Z,{className:"my-0 mx-0",bg:"primary",text:"white",children:[(0,v.jsx)(u.Z.Header,{children:(0,v.jsx)(u.Z.Title,{className:"my-0 mx-0 text-light",children:"Download TaiGer Document Templates"})}),(0,v.jsx)(C,{isLoaded:r,role:this.props.user.role,userId:this.props.user._id,student:this.state.student,templates:this.state.templates,submitFile:this.submitFile,onFileChange:this.onFileChange,templatelist:window.templatelist,onDeleteTemplateFile:this.onDeleteTemplateFile,onDownloadFilefromstudent:this.onDownloadFilefromstudent})]})})})}):(0,v.jsx)(h.Z,{children:(0,v.jsx)(d.Z,{children:(0,v.jsx)(c.Z,{children:(0,v.jsx)("div",{children:" This is for Premium only. Please contact our sales! "})})})}):(0,v.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,v.jsx)(l.Z,{animation:"border",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden"})})})}}]),s}(o.Component),N=y},94611:function(e,t,s){var r=s(27853),n=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"Time out error. Please login again!"})})})})}}]),s}(o.Component);t.Z=p},86450:function(e,t,s){var r=s(27853),n=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),s}(o.Component);t.Z=p},465:function(e,t,s){var r=s(18489),n=s(83738),i=s(46123),a=s.n(i),o=s(47313),l=s(68524),d=s(46417),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=o.forwardRef((function(e,t){var s=e.bsPrefix,i=e.className,o=e.striped,u=e.bordered,h=e.borderless,p=e.hover,m=e.size,f=e.variant,x=e.responsive,j=(0,n.Z)(e,c),Z=(0,l.vE)(s,"table"),v=a()(i,Z,f&&"".concat(Z,"-").concat(f),m&&"".concat(Z,"-").concat(m),o&&"".concat(Z,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),u&&"".concat(Z,"-bordered"),h&&"".concat(Z,"-borderless"),p&&"".concat(Z,"-hover")),b=(0,d.jsx)("table",(0,r.Z)((0,r.Z)({},j),{},{className:v,ref:t}));if(x){var C="".concat(Z,"-responsive");return"string"===typeof x&&(C="".concat(C,"-").concat(x)),(0,d.jsx)("div",{className:C,children:b})}return b}));t.Z=u}}]);