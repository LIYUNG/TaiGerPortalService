"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[8104],{50099:function(e,r,s){var n=s(35531),t=s(27853),i=s(84531),a=s(78932),o=s(38128),l=s(47313),d=s(73158),c=s(65832),u=s(62396),h=s(29678),p=s.n(h),m=s(54991),Z=s(12401),x=s(46417),f=function(e){(0,a.Z)(s,e);var r=(0,o.Z)(s);function s(){var e;(0,t.Z)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=r.call.apply(r,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(s,[{key:"render",value:function(){var e,r,s,t,i,a=this,o=[];return this.state.isOption&&(s=(0,x.jsx)("div",{className:"card-header-right",children:(0,x.jsxs)(d.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,x.jsx)(d.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,x.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,x.jsxs)(d.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,x.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,x.jsxs)("a",{href:Z.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,x.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,x.jsxs)("a",{href:Z.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,x.jsx)("i",{className:"feather icon-refresh-cw"}),(0,x.jsx)("a",{href:Z.Z.BLANK_LINK,children:" Reload "})]}),(0,x.jsxs)(d.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,x.jsx)("i",{className:"feather icon-trash"}),(0,x.jsx)("a",{href:Z.Z.BLANK_LINK,children:" Remove "})]})]})]})})),t=(0,x.jsxs)(c.Z.Header,{children:[(0,x.jsx)(c.Z.Title,{as:"h5",children:this.props.title}),s]}),this.state.fullCard&&(o=[].concat((0,n.Z)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat((0,n.Z)(o),["card-load"]),r=(0,x.jsx)("div",{className:"card-loader",children:(0,x.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(o=[].concat((0,n.Z)(o),["d-none"])),this.props.cardClass&&(o=[].concat((0,n.Z)(o),[this.props.cardClass])),i=(0,x.jsxs)(c.Z,{className:o.join(" "),style:e,children:[t,(0,x.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,x.jsx)("div",{children:(0,x.jsx)(c.Z.Body,{children:this.props.children})})}),r]}),(0,x.jsx)(m.Z,{children:i})}}]),s}(l.Component);r.Z=p()(f)},58104:function(e,r,s){s.r(r),s.d(r,{default:function(){return K}});var n=s(27853),t=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(94395),u=s(54991),h=s(18489),p=s(83738),m=s(35531),Z=s(23430),x=s(45110),f=s(37062),j=s(47939),g=s(67203),v=s(44030),C=s(93298),y=s(51767),w=s(82423),_=s(51426),S=s(46417),b=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(e){var t;return(0,n.Z)(this,s),(t=r.call(this,e)).state={students:[],isLoaded:!1,timeouterror:null,unauthorizederror:null,res_status:0},t}return(0,t.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,_.sK)().then((function(r){var s=r.data,n=s.data,t=s.success,i=r.status;t?e.setState({isLoaded:!0,students:n,success:t,res_status:i}):e.setState({isLoaded:!0,res_status:i})}),(function(r){e.setState({isLoaded:!0,error:r})}))}},{key:"render",value:function(){var e=this,r=this.state,s=r.res_status;if(!r.isLoaded&&!this.state.students)return(0,S.jsx)("div",{style:y.nT,children:(0,S.jsx)(v.Z,{animation:"border",role:"status",children:(0,S.jsx)("span",{className:"visually-hidden"})})});if(s>=400)return(0,S.jsx)(w.Z,{res_status:s});for(var n=[],t=0;t<this.props.uni_name.length;t++)n.push(this.props.uni_name[t]+" - "+this.props.program_name[t]);return(0,S.jsxs)(j.Z,{show:this.props.show,onHide:this.props.setModalHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,S.jsx)(j.Z.Header,{children:(0,S.jsxs)(j.Z.Title,{id:"contained-modal-title-vcenter",children:["Assign"," ",n.map((function(e){return(0,S.jsx)("h5",{children:e})}))," ","to"]})}),(0,S.jsxs)(j.Z.Body,{children:[(0,S.jsx)("h4",{children:"Student:"}),(0,S.jsx)("table",{children:(0,S.jsx)("tbody",{children:this.state.students.map((function(r){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:(0,S.jsx)("div",{children:(0,S.jsx)(g.Z.Group,{children:(0,S.jsx)(g.Z.Check,{custom:!0,type:"radio",name:"student_id",value:r._id,id:r._id,onChange:e.props.handleChange2})})})}),(0,S.jsx)("td",{children:(0,S.jsxs)("h4",{className:"mb-1",children:[r.firstname,", ",r.lastname]})})]},r._id)}))})})]}),(0,S.jsxs)(j.Z.Footer,{children:[(0,S.jsx)(C.Z,{onClick:function(r){return e.props.onSubmitAddToStudentProgramList(r)},children:"Assign"}),(0,S.jsx)(C.Z,{onClick:this.props.setModalHide,children:"Cancel"})]})]})}}]),s}(o.Component),N=s(41251),k=s(73158),A=s(465),F=s(65832),H=s(65777),P=["indeterminate"];function R(e){var r=e.preGlobalFilteredRows,s=e.globalFilter,n=e.setGlobalFilter,t=(r.length,o.useState(s)),i=(0,Z.Z)(t,2),a=i[0],l=i[1],d=(0,x.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,S.jsxs)("span",{children:["Search:"," ",(0,S.jsx)("input",{value:a||"",onChange:function(e){l(e.target.value),d(e.target.value)},placeholder:" TUM, Management ...",style:{fontSize:"0.9rem",border:"0"}})]})}function T(e){var r=e.column,s=r.filterValue,n=r.preFilteredRows,t=r.setFilter,i=n.length;return(0,S.jsx)("input",{value:s||"",onChange:function(e){t(e.target.value||void 0)},placeholder:"Search ".concat(i," records...")})}function z(e){var r=e.column,s=r.filterValue,n=r.setFilter,t=r.preFilteredRows,i=r.id,a=o.useMemo((function(){var e=new Set;return t.forEach((function(r){e.add(r.values[i])})),(0,m.Z)(e.values())}),[i,t]);return(0,S.jsxs)("select",{value:s,onChange:function(e){n(e.target.value||void 0)},children:[(0,S.jsx)("option",{value:"",children:"All"}),a.map((function(e,r){return(0,S.jsx)("option",{value:e,children:e},r)}))]})}function L(e,r,s){return(0,H.Lu)(e,s,{keys:[function(e){return e.values[r]}]})}L.autoRemove=function(e){return!e};var I=o.forwardRef((function(e,r){var s=e.indeterminate,n=(0,p.Z)(e,P),t=o.useRef(),i=r||t;return o.useEffect((function(){i.current.indeterminate=s}),[i,s]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",(0,h.Z)({type:"checkbox",ref:i},n))})}));function G(e){var r=e.columns,s=e.data,n=e.userId,t=(0,o.useState)({success:!1,isloaded:!1,error:null,modalShowAssignWindow:!1,modalShowAssignSuccessWindow:!1}),i=(0,Z.Z)(t,2),a=i[0],c=i[1],u=(0,o.useState)({programIds:[],schools:[],program_names:[]}),p=(0,Z.Z)(u,2),g=p[0],v=p[1],y=(0,o.useState)(""),w=(0,Z.Z)(y,2),F=w[0],H=w[1],P=o.useMemo((function(){return{fuzzyText:L,text:function(e,r,s){return e.filter((function(e){var n=e.values[r];return void 0===n||String(n).toLowerCase().startsWith(String(s).toLowerCase())}))}}}),[]),z=o.useMemo((function(){return{Filter:T}}),[]),G=(0,x.useTable)({columns:r,data:s,initialState:{pageSize:20},defaultColumn:z,filterTypes:P},x.useFilters,x.useGlobalFilter,x.usePagination,x.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var r=e.getToggleAllRowsSelectedProps;return(0,S.jsx)("div",{children:(0,S.jsx)(I,(0,h.Z)({},r()))})},Cell:function(e){var r=e.row;return(0,S.jsx)("div",{children:(0,S.jsx)(I,(0,h.Z)({},r.getToggleRowSelectedProps()))})}}].concat((0,m.Z)(e))}))})),M=G.getTableProps,W=G.getTableBodyProps,K=G.headerGroups,B=G.page,E=G.prepareRow,D=G.state,O=G.visibleColumns,V=G.canPreviousPage,U=G.canNextPage,q=G.pageOptions,J=G.pageCount,Q=G.gotoPage,X=G.nextPage,Y=G.previousPage,$=G.setPageSize,ee=G.preGlobalFilteredRows,re=G.setGlobalFilter,se=G.toggleAllRowsSelected,ne=G.state,te=ne.pageIndex,ie=ne.pageSize,ae=ne.selectedRowIds;(0,o.useEffect)((function(){var e=Object.keys(ae);v({programIds:e.map((function(e){return s[e]._id})),schools:e.map((function(e){return s[e].school})),program_names:e.map((function(e){return s[e].program_name}))})}),[ae]);var oe=function(){c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{modalShowAssignSuccessWindow:!1})}))};return(0,S.jsxs)(S.Fragment,{children:[0!==g.programIds.length&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(N.Z,{size:"sm",title:"Option",variant:"primary",children:(0,S.jsx)(k.Z.Item,{eventKey:"2",onClick:function(){c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{modalShowAssignWindow:!0})}))},children:"Assign to student..."})})}),(0,S.jsxs)(A.Z,(0,h.Z)((0,h.Z)({className:"my-0 mx-2",variant:"dark",text:"light",responsive:!0,hover:!0,size:"sm"},M()),{},{children:[(0,S.jsxs)("thead",{children:[K.map((function(e){return(0,S.jsx)("tr",(0,h.Z)((0,h.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,S.jsxs)("th",(0,h.Z)((0,h.Z)({},e.getHeaderProps()),{},{children:[e.render("Header"),(0,S.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]}))}))}))})),(0,S.jsx)("tr",{children:(0,S.jsx)("th",{colSpan:O.length,style:{textAlign:"left"},children:(0,S.jsx)(R,{preGlobalFilteredRows:ee,globalFilter:D.globalFilter,setGlobalFilter:re})})})]}),(0,S.jsx)("tbody",(0,h.Z)((0,h.Z)({},W()),{},{children:B.map((function(e,r){return E(e),(0,S.jsx)("tr",(0,h.Z)((0,h.Z)({},e.getRowProps()),{},{children:e.cells.map((function(r,s){return(0,S.jsx)("td",(0,h.Z)((0,h.Z)({},r.getCellProps()),{},{children:0===s?(0,S.jsx)(S.Fragment,{children:r.render("Cell")}):(0,S.jsx)(f.Z,{target:"_blank",to:"/programs/"+e.original._id,className:"text-info",style:{textDecoration:"none"},children:r.render("Cell")})}))}))}))}))}))]})),(0,S.jsx)("div",{className:"pagination",children:(0,S.jsxs)(l.Z,{children:[(0,S.jsx)(d.Z,{md:1,children:(0,S.jsx)(C.Z,{size:"sm",onClick:function(){return Q(0)},disabled:!V,children:"<<"})})," ",(0,S.jsx)(d.Z,{md:1,children:(0,S.jsx)(C.Z,{size:"sm",onClick:function(){return Y()},disabled:!V,children:"<"})})," ",(0,S.jsx)(d.Z,{md:1,children:(0,S.jsx)(C.Z,{size:"sm",onClick:function(){return X()},disabled:!U,children:">"})})," ",(0,S.jsx)(d.Z,{md:1,children:(0,S.jsx)(C.Z,{size:"sm",onClick:function(){return Q(J-1)},disabled:!U,children:">>"})})," ",(0,S.jsx)(d.Z,{md:2,children:(0,S.jsxs)("span",{className:"text-light",children:["Page"," ",(0,S.jsxs)("strong",{children:[te+1," of ",q.length]})," "]})}),(0,S.jsx)(d.Z,{md:4,children:(0,S.jsxs)("span",{className:"text-light",children:["| Go to page:"," ",(0,S.jsx)("input",{type:"number",defaultValue:te+1,onChange:function(e){var r=e.target.value?Number(e.target.value)-1:0;Q(r)},style:{width:"50px"}})]})}),(0,S.jsx)(d.Z,{md:2,children:(0,S.jsx)("select",{value:ie,onChange:function(e){$(Number(e.target.value))},children:[20,40,60,80,100].map((function(e){return(0,S.jsxs)("option",{value:e,children:["Show ",e]},e)}))})})]})}),(0,S.jsx)("div",{}),(0,S.jsx)(b,{userId:n,show:a.modalShowAssignWindow,setModalHide:function(){c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{modalShowAssignWindow:!1})}))},uni_name:g.schools,program_name:g.program_names,handleChange2:function(e){var r=e.target.value;H(r)},onSubmitAddToStudentProgramList:function(e){e.preventDefault(),function(e){var r=e.student_id,s=e.program_ids;(0,_.Cn)(r,s).then((function(e){var r=e.data.success;r?(re([]),se(!1),c((function(e){return(0,h.Z)((0,h.Z)({},e),{},{isLoaded:!0,modalShowAssignSuccessWindow:!0,modalShowAssignWindow:!1,success:r})}))):alert(e.data.message)}),(function(e){}))}({student_id:F,program_ids:g.programIds})}}),(0,S.jsxs)(j.Z,{show:a.modalShowAssignSuccessWindow,onHide:oe,size:"m","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,S.jsx)(j.Z.Header,{children:(0,S.jsx)(j.Z.Title,{id:"contained-modal-title-vcenter",children:"Success"})}),(0,S.jsx)(j.Z.Body,{children:"Program(s) assigned to student successfully!"}),(0,S.jsx)(j.Z.Footer,{children:(0,S.jsx)(C.Z,{onClick:oe,children:"Close"})})]})]})}var M=function(e){var r=(0,o.useState)({success:!1,programs:null,isloaded:!1,error:null,res_status:0}),s=(0,Z.Z)(r,2),n=s[0],t=s[1];(0,o.useEffect)((function(){(0,_.CV)().then((function(e){var r=e.data,s=r.data,n=r.success,i=e.status;t(n?function(e){return(0,h.Z)((0,h.Z)({},e),{},{success:n,programs:s,isloaded:!0,res_status:i})}:function(e){return(0,h.Z)((0,h.Z)({},e),{},{isloaded:!0,res_status:i})})}),(function(e){return t((function(r){return(0,h.Z)((0,h.Z)({},r),{},{error:e,isloaded:!0})}))}))}),[]);var i=o.useMemo((function(){return[{Header:"Program Database",columns:[{Header:"University",accessor:"school",Filter:z,filter:"includes"},{Header:"Program",accessor:"program_name",filter:"fuzzyText"},{Header:"Semester",accessor:"semester",Filter:z,filter:"includes"},{Header:"Language",accessor:"language"},{Header:"TOEFL",accessor:"toefl"},{Header:"IELTS",accessor:"ielts"},{Header:"Degree",accessor:"degree",filter:"fuzzyText"},{Header:"GRE/GMAT",accessor:"gre"},{Header:"Application Deadline",accessor:"application_deadline"},{Header:"Last Update",accessor:"updatedAt"}]}]}),[]);return n.isloaded||n.programs?n.res_status>=400?(0,S.jsx)(w.Z,{res_status:n.res_status}):(0,S.jsx)(F.Z,{className:"my-0 mx-0",bg:"dark",text:"white",children:(0,S.jsx)(G,{columns:i,data:n.programs,userId:e.userId})}):(0,S.jsx)("div",{style:y.nT,children:(0,S.jsx)(v.Z,{animation:"border",role:"status",children:(0,S.jsx)("span",{className:"visually-hidden"})})})},W=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return"Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role?(0,S.jsx)(c.Z,{to:"/dashboard/default"}):(0,S.jsx)(u.Z,{children:(0,S.jsx)(l.Z,{children:(0,S.jsx)(d.Z,{children:(0,S.jsx)(M,{role:this.props.user.role,userId:this.props.user._id})})})})}}]),s}(o.Component),K=W},82423:function(e,r,s){s.d(r,{Z:function(){return w}});var n=s(27853),t=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(29021),p=s(94611),m=s(86450),Z=(s(89351),s(46417)),x=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:"Session is expired. Please refresh the page and login again."})})})})}}]),s}(o.Component),f=x,j=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:"Too many requests. Please try later."})})})})}}]),s}(o.Component),g=j,v=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:"The resource is locked and can not be changed."})})})})}}]),s}(o.Component),C=v,y=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return 401===this.props.res_status?(0,Z.jsx)(f,{}):403===this.props.res_status?(0,Z.jsx)(m.Z,{}):404===this.props.res_status?(0,Z.jsx)(h.Z,{}):408===this.props.res_status?(0,Z.jsx)(p.Z,{}):423===this.props.res_status?(0,Z.jsx)(C,{}):429===this.props.res_status?(0,Z.jsx)(g,{}):this.props.res_status>=500?(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.Z,{children:"Server problem. Please try later."})})})}):void 0}}]),s}(o.Component),w=y},29021:function(e,r,s){var n=s(27853),t=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(65832),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(c.Z.Body,{children:(0,h.jsx)("h4",{children:"Page Not Found!"})})})})})})}}]),s}(o.Component);r.Z=p},94611:function(e,r,s){var n=s(27853),t=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"Time out error. Please login again!"})})})})}}]),s}(o.Component);r.Z=p},86450:function(e,r,s){var n=s(27853),t=s(84531),i=s(78932),a=s(38128),o=s(47313),l=s(63849),d=s(31616),c=s(50099),u=s(54991),h=s(46417),p=function(e){(0,i.Z)(s,e);var r=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),r.apply(this,arguments)}return(0,t.Z)(s,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{children:(0,h.jsx)(c.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),s}(o.Component);r.Z=p}}]);