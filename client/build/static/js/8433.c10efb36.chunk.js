"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[8433],{58433:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var n=s(27853),a=s(84531),i=s(78932),r=s(38128),d=s(47313),o=s(44030),l=s(35531),c=s(18489),p=s(93298),h=s(76935),u=s(63849),x=s(31616),m=s(65832),j=s(465),f=s(41965),g=s(37062),v=s(54991),Z=s(57864),_=s(51426),b=s(94611),y=s(86450),N=s(51767),C=s(83708),D=s(46417),S=function(e){(0,i.Z)(s,e);var t=(0,r.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={error:null,timeouterror:null,unauthorizederror:null,student:e.props.student,applications:e.props.student.applications,isLoaded:e.props.isLoaded,student_id:null,program_id:null,success:!1,application_status_changed:!1,applying_program_count:e.props.student.applying_program_count,modalDeleteApplication:!1,modalUpdatedApplication:!1},e.handleChangeProgramCount=function(t){t.preventDefault();var s=t.target.value;e.setState((function(e){return(0,c.Z)((0,c.Z)({},e),{},{application_status_changed:!0,applying_program_count:s})}))},e.handleChange=function(t,s){t.preventDefault();var n=(0,l.Z)(e.state.applications);n[s][t.target.id]=t.target.value,e.setState((function(e){return(0,c.Z)((0,c.Z)({},e),{},{application_status_changed:!0,applications:n})}))},e.handleDelete=function(t,s,n){t.preventDefault(),e.setState((function(e){return(0,c.Z)((0,c.Z)({},e),{},{student_id:n,program_id:s,modalDeleteApplication:!0})}))},e.onHideModalDeleteApplication=function(){e.setState({modalDeleteApplication:!1})},e.onHideUpdatedApplicationWindow=function(){e.setState({modalUpdatedApplication:!1})},e.handleDeleteConfirm=function(t){t.preventDefault(),e.setState({isLoaded:!1}),(0,_.Jr)(e.state.program_id,e.state.student_id).then((function(t){var s=t.data,n=s.data,a=s.success;a?e.setState({isLoaded:!0,student:n,success:a,modalDeleteApplication:!1}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0})}))},e.handleSubmit=function(t,s,n){t.preventDefault();for(var a=(0,l.Z)(e.state.applications),i=e.state.applying_program_count,r=0;r<a.length;r+=1)delete a[r].programId,delete a[r].doc_modification_thread;(0,_.A3)(s,a,i).then((function(t){var s=t.data,n=s.data,a=s.success;a?e.setState({isLoaded:!0,student:n,success:a,application_status_changed:!1,modalUpdatedApplication:!0}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0})}))},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this,t=this.state,s=t.unauthorizederror,n=t.timeouterror,a=t.isLoaded;if(n)return(0,D.jsx)("div",{children:(0,D.jsx)(b.Z,{})});if(s)return(0,D.jsx)("div",{children:(0,D.jsx)(y.Z,{})});var i;if(!a&&!this.state.student)return(0,D.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,D.jsx)(o.Z,{animation:"border",role:"status",children:(0,D.jsx)("span",{className:"visually-hidden"})})});var r=new Date;return i=void 0===this.props.student.applications||0===this.props.student.applications.length?(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("tr",{children:["Student"!==this.props.role&&(0,D.jsx)("td",{}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1 text-danger",children:" No University"})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1 text-danger",children:" No Program"})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1 text-danger",children:" No Date"})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1",children:" "})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1",children:" "})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1",children:" "})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1",children:" "})}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1",children:" "})})]})}):this.state.student.applications.map((function(t,s){return(0,D.jsxs)("tr",{children:["Student"!==e.props.role&&(0,D.jsx)("td",{children:(0,D.jsx)(p.Z,{size:"sm",onClick:function(s){return e.handleDelete(s,t.programId._id,e.state.student._id)},children:(0,D.jsx)(Z.YK6,{size:16})})}),(0,D.jsx)("td",{children:(0,D.jsx)(g.Z,{to:"/programs/"+t.programId._id,style:{textDecoration:"none"},children:(0,D.jsx)("p",{className:"mb-1 text-info",children:t.programId.school},s)})}),(0,D.jsx)("td",{children:(0,D.jsx)(g.Z,{to:"/programs/"+t.programId._id,style:{textDecoration:"none"},children:(0,D.jsx)("p",{className:"mb-1 text-info",children:t.programId.program_name},s)})}),(0,D.jsx)("td",{children:(0,D.jsx)(g.Z,{to:"/programs/"+t.programId._id,style:{textDecoration:"none"},children:(0,D.jsx)("p",{className:"mb-1 text-info",children:t.programId.semester},s)})}),(0,D.jsx)("td",{children:"O"===t.closed?(0,D.jsx)("p",{className:"mb-1 text-warning",children:"Close"},s):(0,D.jsx)("p",{className:"mb-1 text-info",children:(0,C.x8)(e.props.student,t)},s)}),(0,D.jsx)("td",{children:(0,D.jsx)(h.Z.Group,{controlId:"decided",children:(0,D.jsxs)(h.Z.Control,{as:"select",onChange:function(t){return e.handleChange(t,s)},defaultValue:t.decided,children:[(0,D.jsx)("option",{value:"-",children:"-"}),(0,D.jsx)("option",{value:"X",children:"No"}),(0,D.jsx)("option",{value:"O",children:"Yes"})]})})}),"O"===t.decided?(0,D.jsx)("td",{children:(0,D.jsx)(h.Z.Group,{controlId:"closed",children:(0,D.jsxs)(h.Z.Control,{as:"select",onChange:function(t){return e.handleChange(t,s)},disabled:!("-"!==t.decided&&"X"!==t.decided),defaultValue:t.closed,children:[(0,D.jsx)("option",{value:"-",children:"-"}),(0,D.jsx)("option",{value:"X",children:"No"}),(0,D.jsx)("option",{value:"O",children:"Yes"})]})})}):(0,D.jsx)("td",{}),"O"===t.closed?(0,D.jsx)("td",{children:(0,D.jsx)(h.Z.Group,{controlId:"admission",children:(0,D.jsxs)(h.Z.Control,{as:"select",onChange:function(t){return e.handleChange(t,s)},disabled:!("-"!==t.closed&&"X"!==t.closed),defaultValue:t.admission,children:[(0,D.jsx)("option",{value:"-",children:"-"}),(0,D.jsx)("option",{value:"X",children:"No"}),(0,D.jsx)("option",{value:"O",children:"Yes"})]})})}):(0,D.jsx)("td",{}),(0,D.jsx)("td",{children:(0,D.jsx)("p",{className:"mb-1 text-info",children:t.closed?"-":t.programId.application_deadline?e.props.student.application_preference&&e.props.student.application_preference.expected_application_date&&(0,N.Vb)(r,e.props.student.application_preference.expected_application_date+"-"+t.programId.application_deadline):"-"},s)})]},s)})),(0,D.jsxs)(v.Z,{children:[(0,D.jsx)(u.Z,{children:(0,D.jsx)(x.Z,{children:(0,D.jsx)(m.Z,{className:"my-2 mx-0",bg:"black",text:"light",children:(0,D.jsx)(m.Z.Header,{children:(0,D.jsxs)(m.Z.Title,{className:"my-0 mx-0 text-light",children:[this.props.student.firstname," ",this.props.student.lastname]})})})})}),(0,C.ys)([this.state.student])&&(0,D.jsx)(u.Z,{children:(0,D.jsx)(x.Z,{children:(0,D.jsx)(m.Z,{className:"mb-2 mx-0",bg:"danger",text:"light",children:(0,D.jsxs)(m.Z.Body,{children:[this.props.student.firstname," ",this.props.student.lastname," ","did not choose enough programs."]})})})}),"Admin"===this.props.role&&(0,C.aH)(this.state.student)&&(0,D.jsx)(u.Z,{children:(0,D.jsx)(x.Z,{children:(0,D.jsx)(m.Z,{className:"mb-2 mx-0",bg:"danger",text:"light",children:(0,D.jsx)(m.Z.Body,{children:"The number of student's applications is not specified! Please determine the number of the programs according to the contract"})})})}),(0,D.jsx)(u.Z,{children:(0,D.jsxs)(x.Z,{children:[(0,D.jsxs)(m.Z,{className:"my-0 mx-0",bg:"info",text:"white",children:[(0,D.jsxs)(u.Z,{bg:"info",children:[(0,D.jsx)(x.Z,{md:4,className:"mx-2 my-2",children:(0,D.jsx)("h4",{children:"Applying Program Count: "})}),"Admin"===this.props.role?(0,D.jsx)(x.Z,{md:2,className:"mx-2 my-1",children:(0,D.jsx)(h.Z.Group,{controlId:"applying_program_count",children:(0,D.jsxs)(h.Z.Control,{as:"select",defaultValue:this.state.student.applying_program_count,onChange:function(t){return e.handleChangeProgramCount(t)},children:[(0,D.jsx)("option",{value:"0",children:"Please Select"}),(0,D.jsx)("option",{value:"1",children:"1"}),(0,D.jsx)("option",{value:"2",children:"2"}),(0,D.jsx)("option",{value:"3",children:"3"}),(0,D.jsx)("option",{value:"4",children:"4"}),(0,D.jsx)("option",{value:"5",children:"5"}),(0,D.jsx)("option",{value:"6",children:"6"}),(0,D.jsx)("option",{value:"7",children:"7"}),(0,D.jsx)("option",{value:"8",children:"8"}),(0,D.jsx)("option",{value:"9",children:"9"}),(0,D.jsx)("option",{value:"10",children:"10"})]})})}):(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(x.Z,{md:2,className:"mx-2 my-3",children:(0,D.jsx)("h4",{children:this.state.student.applying_program_count})})})]}),(0,D.jsx)(u.Z,{children:(0,D.jsx)(x.Z,{children:(0,D.jsxs)(j.Z,{size:"sm",responsive:!0,className:"my-0 mx-0",variant:"dark",text:"light",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:["Student"!==this.props.role&&(0,D.jsx)("th",{}),window.programstatuslist.map((function(e,t){return(0,D.jsx)("th",{children:e.name},t)}))]})}),(0,D.jsx)("tbody",{children:i})]})})})]}),(0,D.jsx)(u.Z,{className:"my-2 mx-0",children:(0,D.jsx)(p.Z,{size:"sm",disabled:!this.state.application_status_changed,onClick:function(t){return e.handleSubmit(t,e.state.student._id,e.state.applications)},children:"Update"})}),(0,D.jsxs)(f.Z,{show:this.state.modalDeleteApplication,onHide:this.onHideModalDeleteApplication,size:"m","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,D.jsx)(f.Z.Header,{children:(0,D.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning: Delete an application"})}),(0,D.jsx)(f.Z.Body,{children:"This will delete all message and editted files in discussion. Are you sure?"}),(0,D.jsxs)(f.Z.Footer,{children:[(0,D.jsx)(p.Z,{disabled:!this.state.isLoaded,onClick:this.handleDeleteConfirm,children:"Yes"}),(0,D.jsx)(p.Z,{onClick:this.onHideModalDeleteApplication,children:"Close"})]})]}),(0,D.jsxs)(f.Z,{show:this.state.modalUpdatedApplication,onHide:this.onHideUpdatedApplicationWindow,size:"m","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,D.jsx)(f.Z.Header,{children:(0,D.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Info:"})}),(0,D.jsx)(f.Z.Body,{children:"Applications status updated successfully!"}),(0,D.jsx)(f.Z.Footer,{children:(0,D.jsx)(p.Z,{onClick:this.onHideUpdatedApplicationWindow,children:"Close"})})]})]})})]})}}]),s}(d.Component),A=S,L=function(e){(0,i.Z)(s,e);var t=(0,r.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={timeouterror:null,unauthorizederror:null,isLoaded:!1,student:null,success:!1,error:null},e}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,_.u6)(this.props.match.params.student_id).then((function(t){var s=t.data,n=s.data,a=s.success;a?e.setState({isLoaded:!0,student:n,success:a}):401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.unauthorizederror,s=e.timeouterror,n=e.isLoaded;if(s)return(0,D.jsx)("div",{children:(0,D.jsx)(b.Z,{})});if(t)return(0,D.jsx)("div",{children:(0,D.jsx)(y.Z,{})});return n||this.state.student?(0,D.jsx)(A,{isLoaded:n,role:this.props.user.role,student:this.state.student}):(0,D.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,D.jsx)(o.Z,{animation:"border",role:"status",children:(0,D.jsx)("span",{className:"visually-hidden"})})})}}]),s}(d.Component),w=L},465:function(e,t,s){var n=s(18489),a=s(83738),i=s(46123),r=s.n(i),d=s(47313),o=s(68524),l=s(46417),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],p=d.forwardRef((function(e,t){var s=e.bsPrefix,i=e.className,d=e.striped,p=e.bordered,h=e.borderless,u=e.hover,x=e.size,m=e.variant,j=e.responsive,f=(0,a.Z)(e,c),g=(0,o.vE)(s,"table"),v=r()(i,g,m&&"".concat(g,"-").concat(m),x&&"".concat(g,"-").concat(x),d&&"".concat(g,"-").concat("string"===typeof d?"striped-".concat(d):"striped"),p&&"".concat(g,"-bordered"),h&&"".concat(g,"-borderless"),u&&"".concat(g,"-hover")),Z=(0,l.jsx)("table",(0,n.Z)((0,n.Z)({},f),{},{className:v,ref:t}));if(j){var _="".concat(g,"-responsive");return"string"===typeof j&&(_="".concat(_,"-").concat(j)),(0,l.jsx)("div",{className:_,children:Z})}return Z}));t.Z=p}}]);