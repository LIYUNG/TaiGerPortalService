"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[1622],{91622:function(e,s,t){t.r(s),t.d(s,{default:function(){return M}});var r=t(18489),n=t(83738),a=t(35531),i=t(23430),o=t(47313),l=t(45110),d=t(37062),u=t(94395),c=t(27853),h=t(84531),m=t(78932),g=t(38128),f=t(47939),p=t(67203),x=t(44030),j=t(93298),Z=t(51767),v=t(82423),_=t(51426),b=t(46417),S=function(e){(0,m.Z)(t,e);var s=(0,g.Z)(t);function t(e){var r;return(0,c.Z)(this,t),(r=s.call(this,e)).state={students:[],isLoaded:!1,timeouterror:null,unauthorizederror:null,res_status:0},r}return(0,h.Z)(t,[{key:"componentDidMount",value:function(){var e=this;(0,_.sK)().then((function(s){var t=s.data,r=t.data,n=t.success,a=s.status;n?e.setState({isLoaded:!0,students:r,success:n,res_status:a}):e.setState({isLoaded:!0,res_status:a})}),(function(s){e.setState({isLoaded:!0,error:s})}))}},{key:"render",value:function(){var e=this,s=this.state,t=s.res_status;if(!s.isLoaded&&!this.state.students)return(0,b.jsx)("div",{style:Z.nT,children:(0,b.jsx)(x.Z,{animation:"border",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden"})})});if(t>=400)return(0,b.jsx)(v.Z,{res_status:t});for(var r=[],n=0;n<this.props.uni_name.length;n++)r.push(this.props.uni_name[n]+" - "+this.props.program_name[n]);return(0,b.jsxs)(f.Z,{show:this.props.show,onHide:this.props.setModalHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,b.jsx)(f.Z.Header,{children:(0,b.jsxs)(f.Z.Title,{id:"contained-modal-title-vcenter",children:["Assign"," ",r.map((function(e){return(0,b.jsx)("h5",{children:e})}))," ","to"]})}),(0,b.jsxs)(f.Z.Body,{children:[(0,b.jsx)("h4",{children:"Student:"}),(0,b.jsx)("table",{children:(0,b.jsx)("tbody",{children:this.state.students.map((function(s){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:(0,b.jsx)("div",{children:(0,b.jsx)(p.Z.Group,{children:(0,b.jsx)(p.Z.Check,{custom:!0,type:"radio",name:"student_id",value:s._id,id:s._id,onChange:e.props.handleChange2})})})}),(0,b.jsx)("td",{children:(0,b.jsxs)("h4",{className:"mb-1",children:[s.firstname,", ",s.lastname]})})]},s._id)}))})})]}),(0,b.jsxs)(f.Z.Footer,{children:[(0,b.jsx)(j.Z,{onClick:function(s){return e.props.onSubmitAddToStudentProgramList(s)},children:"Assign"}),(0,b.jsx)(j.Z,{onClick:this.props.setModalHide,children:"Cancel"})]})]})}}]),t}(o.Component),w=t(20688),C=t(41251),y=t(73158),F=t(465),A=t(63849),H=t(31616),P=t(65832),k=t(65777),z=["indeterminate"];function T(e){var s=e.preGlobalFilteredRows,t=e.globalFilter,r=e.setGlobalFilter,n=(s.length,o.useState(t)),a=(0,i.Z)(n,2),d=a[0],u=a[1],c=(0,l.useAsyncDebounce)((function(e){r(e||void 0)}),200);return(0,b.jsxs)("span",{children:["Search:"," ",(0,b.jsx)("input",{value:d||"",onChange:function(e){u(e.target.value),c(e.target.value)},placeholder:" TUM, Management ...",style:{fontSize:"0.9rem",border:"0"}})]})}function L(e){var s=e.column,t=s.filterValue,r=s.preFilteredRows,n=s.setFilter,a=r.length;return(0,b.jsx)("input",{value:t||"",onChange:function(e){n(e.target.value||void 0)},placeholder:"Search ".concat(a," records...")})}function R(e){var s=e.column,t=s.filterValue,r=s.setFilter,n=s.preFilteredRows,i=s.id,l=o.useMemo((function(){var e=new Set;return n.forEach((function(s){e.add(s.values[i])})),(0,a.Z)(e.values())}),[i,n]);return(0,b.jsxs)("select",{value:t,onChange:function(e){r(e.target.value||void 0)},children:[(0,b.jsx)("option",{value:"",children:"All"}),l.map((function(e,s){return(0,b.jsx)("option",{value:e,children:e},s)}))]})}function G(e,s,t){return(0,k.Lu)(e,t,{keys:[function(e){return e.values[s]}]})}G.autoRemove=function(e){return!e};var N=o.forwardRef((function(e,s){var t=e.indeterminate,a=(0,n.Z)(e,z),i=o.useRef(),l=s||i;return o.useEffect((function(){l.current.indeterminate=t}),[l,t]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("input",(0,r.Z)({type:"checkbox",ref:l},a))})}));function I(e){var s=e.columns,t=e.data,n=e.userId,u=(0,o.useState)({success:!1,isloaded:!1,error:null,modalShowAssignWindow:!1,modalShowAssignSuccessWindow:!1,res_modal_status:0,res_modal_message:""}),c=(0,i.Z)(u,2),h=c[0],m=c[1],g=(0,o.useState)({programIds:[],schools:[],program_names:[]}),p=(0,i.Z)(g,2),x=p[0],Z=p[1],v=(0,o.useState)(""),P=(0,i.Z)(v,2),k=P[0],z=P[1],R=o.useMemo((function(){return{fuzzyText:G,text:function(e,s,t){return e.filter((function(e){var r=e.values[s];return void 0===r||String(r).toLowerCase().startsWith(String(t).toLowerCase())}))}}}),[]),I=o.useMemo((function(){return{Filter:L}}),[]),M=(0,l.useTable)({columns:s,data:t,initialState:{pageSize:20},defaultColumn:I,filterTypes:R},l.useFilters,l.useGlobalFilter,l.usePagination,l.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var s=e.getToggleAllRowsSelectedProps;return(0,b.jsx)("div",{children:(0,b.jsx)(N,(0,r.Z)({},s()))})},Cell:function(e){var s=e.row;return(0,b.jsx)("div",{children:(0,b.jsx)(N,(0,r.Z)({},s.getToggleRowSelectedProps()))})}}].concat((0,a.Z)(e))}))})),W=M.getTableProps,E=M.getTableBodyProps,D=M.headerGroups,O=M.page,V=M.prepareRow,B=M.state,U=M.visibleColumns,K=M.canPreviousPage,q=M.canNextPage,J=M.pageOptions,Q=M.pageCount,X=M.gotoPage,Y=M.nextPage,$=M.previousPage,ee=M.setPageSize,se=M.preGlobalFilteredRows,te=M.setGlobalFilter,re=M.toggleAllRowsSelected,ne=M.state,ae=ne.pageIndex,ie=ne.pageSize,oe=ne.selectedRowIds;(0,o.useEffect)((function(){var e=Object.keys(oe);Z({programIds:e.map((function(e){return t[e]._id})),schools:e.map((function(e){return t[e].school})),program_names:e.map((function(e){return t[e].program_name}))})}),[oe]);var le=function(){m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{modalShowAssignSuccessWindow:!1})}))};return(0,b.jsxs)(b.Fragment,{children:[0!==x.programIds.length&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C.Z,{size:"sm",title:"Option",variant:"primary",children:(0,b.jsx)(y.Z.Item,{eventKey:"2",onClick:function(){m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{modalShowAssignWindow:!0})}))},children:"Assign to student..."})})}),h.res_modal_status>=400&&(0,b.jsx)(w.Z,{ConfirmError:function(){m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},res_modal_status:h.res_modal_status,res_modal_message:h.res_modal_message}),(0,b.jsxs)(F.Z,(0,r.Z)((0,r.Z)({className:"my-0 mx-2",variant:"dark",text:"light",responsive:!0,hover:!0,size:"sm"},W()),{},{children:[(0,b.jsxs)("thead",{children:[D.map((function(e){return(0,b.jsx)("tr",(0,r.Z)((0,r.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,b.jsxs)("th",(0,r.Z)((0,r.Z)({},e.getHeaderProps()),{},{children:[e.render("Header"),(0,b.jsx)("div",{children:e.canFilter?e.render("Filter"):null})]}))}))}))})),(0,b.jsx)("tr",{children:(0,b.jsx)("th",{colSpan:U.length,style:{textAlign:"left"},children:(0,b.jsx)(T,{preGlobalFilteredRows:se,globalFilter:B.globalFilter,setGlobalFilter:te})})})]}),(0,b.jsx)("tbody",(0,r.Z)((0,r.Z)({},E()),{},{children:O.map((function(e,s){return V(e),(0,b.jsx)("tr",(0,r.Z)((0,r.Z)({},e.getRowProps()),{},{children:e.cells.map((function(s,t){return(0,b.jsx)("td",(0,r.Z)((0,r.Z)({},s.getCellProps()),{},{children:0===t?(0,b.jsx)(b.Fragment,{children:s.render("Cell")}):(0,b.jsx)(d.Z,{target:"_blank",to:"/programs/"+e.original._id,className:"text-info",style:{textDecoration:"none"},children:s.render("Cell")})}))}))}))}))}))]})),(0,b.jsx)("div",{className:"pagination",children:(0,b.jsxs)(A.Z,{children:[(0,b.jsx)(H.Z,{md:1,children:(0,b.jsx)(j.Z,{size:"sm",onClick:function(){return X(0)},disabled:!K,children:"<<"})})," ",(0,b.jsx)(H.Z,{md:1,children:(0,b.jsx)(j.Z,{size:"sm",onClick:function(){return $()},disabled:!K,children:"<"})})," ",(0,b.jsx)(H.Z,{md:1,children:(0,b.jsx)(j.Z,{size:"sm",onClick:function(){return Y()},disabled:!q,children:">"})})," ",(0,b.jsx)(H.Z,{md:1,children:(0,b.jsx)(j.Z,{size:"sm",onClick:function(){return X(Q-1)},disabled:!q,children:">>"})})," ",(0,b.jsx)(H.Z,{md:2,children:(0,b.jsxs)("span",{className:"text-light",children:["Page"," ",(0,b.jsxs)("strong",{children:[ae+1," of ",J.length]})," "]})}),(0,b.jsx)(H.Z,{md:4,children:(0,b.jsxs)("span",{className:"text-light",children:["| Go to page:"," ",(0,b.jsx)("input",{type:"number",defaultValue:ae+1,onChange:function(e){var s=e.target.value?Number(e.target.value)-1:0;X(s)},style:{width:"50px"}})]})}),(0,b.jsx)(H.Z,{md:2,children:(0,b.jsx)("select",{value:ie,onChange:function(e){ee(Number(e.target.value))},children:[20,40,60,80,100].map((function(e){return(0,b.jsxs)("option",{value:e,children:["Show ",e]},e)}))})})]})}),(0,b.jsx)("div",{}),(0,b.jsx)(S,{userId:n,show:h.modalShowAssignWindow,setModalHide:function(){m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{modalShowAssignWindow:!1})}))},uni_name:x.schools,program_name:x.program_names,handleChange2:function(e){var s=e.target.value;z(s)},onSubmitAddToStudentProgramList:function(e){e.preventDefault(),function(e){var s=e.student_id,t=e.program_ids;(0,_.Cn)(s,t).then((function(e){var s=e.data.success,t=e.status;if(s)te([]),re(!1),m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,modalShowAssignSuccessWindow:!0,modalShowAssignWindow:!1,success:s,res_modal_status:t})}));else{var n=e.data.message;m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isLoaded:!0,res_modal_message:n,res_modal_status:t})}))}}),(function(e){}))}({student_id:k,program_ids:x.programIds})}}),(0,b.jsxs)(f.Z,{show:h.modalShowAssignSuccessWindow,onHide:le,size:"m","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,b.jsx)(f.Z.Header,{children:(0,b.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Success"})}),(0,b.jsx)(f.Z.Body,{children:"Program(s) assigned to student successfully!"}),(0,b.jsx)(f.Z.Footer,{children:(0,b.jsx)(j.Z,{onClick:le,children:"Close"})})]})]})}var M=function(e){var s=(0,o.useState)({success:!1,programs:null,isloaded:!1,error:null,res_status:0}),t=(0,i.Z)(s,2),n=t[0],a=t[1];if((0,o.useEffect)((function(){(0,_.CV)().then((function(e){var s=e.data,t=s.data,n=s.success,i=e.status;a(n?function(e){return(0,r.Z)((0,r.Z)({},e),{},{success:n,programs:t,isloaded:!0,res_status:i})}:function(e){return(0,r.Z)((0,r.Z)({},e),{},{isloaded:!0,res_status:i})})}),(function(e){return a((function(s){return(0,r.Z)((0,r.Z)({},s),{},{error:e,isloaded:!0})}))}))}),[]),"Admin"!==e.user.role&&"Editor"!==e.user.role&&"Agent"!==e.user.role)return(0,b.jsx)(u.Z,{to:"/dashboard/default"});var l=o.useMemo((function(){return[{Header:"Program Database",columns:[{Header:"University",accessor:"school",Filter:R,filter:"includes"},{Header:"Program",accessor:"program_name",filter:"fuzzyText"},{Header:"Semester",accessor:"semester",Filter:R,filter:"includes"},{Header:"Language",accessor:"language"},{Header:"TOEFL",accessor:"toefl"},{Header:"IELTS",accessor:"ielts"},{Header:"Degree",accessor:"degree",filter:"fuzzyText"},{Header:"GRE/GMAT",accessor:"gre"},{Header:"Application Deadline",accessor:"application_deadline"},{Header:"Last Update",accessor:"updatedAt"}]}]}),[]);return n.isloaded||n.programs?n.res_status>=400?(0,b.jsx)(v.Z,{res_status:n.res_status}):(0,b.jsx)(P.Z,{className:"my-0 mx-0",bg:"dark",text:"white",children:(0,b.jsx)(I,{columns:l,data:n.programs,userId:e.user._id.toString()})}):(0,b.jsx)("div",{style:Z.nT,children:(0,b.jsx)(x.Z,{animation:"border",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden"})})})}}}]);