"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[3025],{4454:function(e,t,s){var n=s(36222),i=s(18489),r=s(27853),a=s(84531),o=s(78932),d=s(38128),l=s(47313),c=s(44030),u=s(63849),h=s(31616),m=s(67203),g=s(93298),p=s(65832),f=s(47939),x=s(60860),Z=s(57864),_=s(37062),j=s(51767),v=s(82423),S=s(20688),N=s(51426),y=s(46417),L=function(e){(0,o.Z)(s,e);var t=(0,d.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var a=arguments.length,o=new Array(a),d=0;d<a;d++)o[d]=arguments[d];return(e=t.call.apply(t,[this].concat(o))).state={student_id:"",program_id:"",isLoaded2:{},isLoaded:!1,student:e.props.student,timeouterror:null,unauthorizederror:null,deleteVPDFileWarningModel:!1,setAsNotNeededModel:!1,res_status:0,res_modal_message:"",res_modal_status:0},e.closeWarningWindow=function(){e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{deleteVPDFileWarningModel:!1})}))},e.handleUniAssistDocSubmit=function(t,s,n){t.preventDefault(),e.onSubmitGeneralFile(t,t.target.files[0],s,n)},e.closesetAsNotNeededWindow=function(){e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{setAsNotNeededModel:!1})}))},e.opensetAsNotNeededWindow=function(t,s,n){t.preventDefault(),e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{setAsNotNeededModel:!0,student_id:s,program_id:n})}))},e.handleSetAsNotNeeded=function(t){t.preventDefault(),(0,N.bV)(e.state.student_id,e.state.program_id).then((function(t){var s=t.data,n=s.data,r=s.success,a=t.status;if(r)e.setState({isLoaded:!0,student:n,success:r,setAsNotNeededModel:!1,student_id:"",program_id:"",res_modal_status:a});else{var o=t.data.message;e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isLoaded:!0,res_modal_message:o,res_modal_status:a})}))}}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.handleUniAssistDocDelete=function(t,s){e.setState((function(e){return{isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},s,!1))}})),(0,N.Ws)(e.state.student_id,e.state.program_id).then((function(t){var r=t.data.success,a=t.status;if(r){var o=e.state.student.applications.find((function(e){return e.programId._id.toString()===s})),d=e.state.student.applications.findIndex((function(e){return e.programId._id.toString()===s}));o.uni_assist.status="missing",o.uni_assist.vpd_file_path="",o.uni_assist.updatedAt=new Date;var l=(0,i.Z)({},e.state.student);l.applications[d]=o,e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isLoaded:!0,isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},s,!0)),student:l,success:r,deleteVPDFileWarningModel:!1,res_modal_status:a})}))}else{var c=t.data.message;e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isLoaded:!0,isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},s,!0)),res_modal_message:c,res_modal_status:a})}))}}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.onDeleteVPDFileWarningPopUp=function(t,s,n){t.preventDefault(),e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{student_id:s,program_id:n,deleteVPDFileWarningModel:!0})}))},e.handleUniAssistDocDownload=function(t,s,n){t.preventDefault(),(0,N.$Y)(s,n).then((function(t){if(200===t.status){var s=t.headers["content-disposition"].split('"')[1],n=t.data;if(0===n.size)return;var i=s.split(".");if("pdf"===(i=i.pop())){var r=window.URL.createObjectURL(new Blob([n],{type:"application/pdf"}));window.open(r)}else{var a=window.URL.createObjectURL(new Blob([n])),o=document.createElement("a");o.href=a,o.setAttribute("download",s),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)}}else 401===t.status||500===t.status?e.setState({isLoaded:!0,timeouterror:!0}):403===t.status&&e.setState({isLoaded:!0,unauthorizederror:!0})}),(function(e){alert("The file is not available.")}))},e.onSubmitGeneralFile=function(t,s,r,a){t.preventDefault();var o=new FormData;o.append("file",s),e.setState((function(e){return{isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},a,!1))}})),(0,N.pJ)(r,a,o).then((function(t){var s=t.data,r=s.data,o=s.success,d=t.status;if(o)e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{student:r,success:o,category:"",isLoaded:!0,isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},a,!0)),file:"",res_modal_status:d})}));else{var l=t.data.message;e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isLoaded:!0,isLoaded2:(0,i.Z)((0,i.Z)({},e.isLoaded2),{},(0,n.Z)({},a,!0)),res_modal_message:l,res_modal_status:d})}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.ConfirmError=function(){e.setState((function(e){return(0,i.Z)((0,i.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){for(var e={},t=0;t<this.props.student.applications.length;t++)e["".concat(this.props.student.applications[t].programId._id.toString())]=!0;this.setState({isLoaded2:e})}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_status,n=t.isLoaded,i=t.res_modal_status,r=t.res_modal_message;if(!n&&!this.state.student)return(0,y.jsx)("div",{style:j.nT,children:(0,y.jsx)(c.Z,{animation:"border",role:"status",children:(0,y.jsx)("span",{className:"visually-hidden"})})});if(s>=400)return(0,y.jsx)(v.Z,{res_status:s});var a=this.state.student.applications.map((function(t,s){return(0,y.jsxs)("div",{children:["Yes-FULL"===t.programId.uni_assist&&"O"===t.decided&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Z,{children:(0,y.jsx)(_.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,y.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," Yes-FULL"]})})}),(0,y.jsx)(u.Z,{children:t.uni_assist&&"missing"!==t.uni_assist.status&&"notstarted"!==t.uni_assist.status?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{md:2,children:(0,y.jsx)(g.Z,{onClick:function(s){return e.handleUniAssistDocDownload(s,e.state.student._id.toString(),t.programId._id.toString())},disabled:!e.state.isLoaded2[t.programId._id.toString()],size:"sm",children:(0,y.jsx)(Z.RFS,{size:16})})}),(0,y.jsx)(h.Z,{children:(0,y.jsx)(g.Z,{onClick:function(s){return e.onDeleteVPDFileWarningPopUp(s,e.state.student._id.toString(),t.programId._id.toString())},disabled:!e.state.isLoaded2[t.programId._id.toString()],variant:"danger",size:"sm",children:(0,y.jsx)(Z.VPh,{size:16})})})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(u.Z,{children:e.state.isLoaded2["".concat(t.programId._id.toString())]?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{md:1,children:(0,y.jsxs)(m.Z.Group,{controlId:"".concat(t.programId._id.toString()),children:[(0,y.jsx)(m.Z.Label,{children:(0,y.jsx)(x.lnH,{color:"lightgray",size:32})}),(0,y.jsx)(m.Z.Control,{hidden:!0,type:"file",onChange:function(s){return e.handleUniAssistDocSubmit(s,e.state.student._id.toString(),t.programId._id.toString())}})]})}),(0,y.jsx)(h.Z,{children:("Agent"===e.props.role||"Admin"===e.props.role)&&(0,y.jsx)(g.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set Not Needed"})})]}):(0,y.jsx)("div",{children:(0,y.jsx)(c.Z,{animation:"border",role:"status",variant:"light",children:(0,y.jsx)("span",{className:"visually-hidden"})})})})})})]}),"Yes-VPD"===t.programId.uni_assist&&"O"===t.decided&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Z,{children:(0,y.jsx)(_.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,y.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," Yes-VPD"]})})}),(0,y.jsx)(u.Z,{children:t.uni_assist&&"missing"!==t.uni_assist.status&&"notstarted"!==t.uni_assist.status?t.uni_assist&&"notneeded"===t.uni_assist.status?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{children:(0,y.jsx)("p",{className:"text-light",children:"Uni-assist is not necessary as it can be reused from another program."})}),(0,y.jsx)(h.Z,{children:("Agent"===e.props.role||"Admin"===e.props.role)&&(0,y.jsx)(g.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set needed"})})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{md:2,children:(0,y.jsx)(g.Z,{onClick:function(s){return e.handleUniAssistDocDownload(s,e.state.student._id.toString(),t.programId._id.toString())},disabled:!e.state.isLoaded2[t.programId._id.toString()],size:"sm",children:(0,y.jsx)(Z.RFS,{size:16})})}),(0,y.jsx)(h.Z,{children:(0,y.jsx)(g.Z,{onClick:function(s){return e.onDeleteVPDFileWarningPopUp(s,e.state.student._id.toString(),t.programId._id.toString())},disabled:!e.state.isLoaded2[t.programId._id.toString()],variant:"danger",size:"sm",children:(0,y.jsx)(Z.VPh,{size:16})})})]}):(0,y.jsx)(y.Fragment,{children:e.state.isLoaded2["".concat(t.programId._id.toString())]?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.Z,{md:1,children:(0,y.jsxs)(m.Z.Group,{controlId:"".concat(t.programId._id.toString()),children:[(0,y.jsx)(m.Z.Label,{children:(0,y.jsx)(x.lnH,{color:"lightgray",size:32})}),(0,y.jsx)(m.Z.Control,{hidden:!0,type:"file",onChange:function(s){return e.handleUniAssistDocSubmit(s,e.state.student._id.toString(),t.programId._id.toString())}})]})}),(0,y.jsx)(h.Z,{children:("Agent"===e.props.role||"Admin"===e.props.role)&&(0,y.jsx)(g.Z,{size:"sm",color:"lightgray",onClick:function(s){return e.opensetAsNotNeededWindow(s,e.state.student._id.toString(),t.programId._id.toString())},children:"Set Not Needed"})})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:(0,y.jsx)(c.Z,{animation:"border",role:"status",variant:"light",children:(0,y.jsx)("span",{className:"visually-hidden"})})})})})})]}),"No"===t.programId.uni_assist&&"O"===t.decided&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(_.Z,{to:"/programs/"+t.programId._id.toString(),style:{textDecoration:"none"},children:(0,y.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name]})}),(0,y.jsx)("p",{className:"text-light",children:"This program does NOT require Uni-Assist."})]}),void 0===t.programId.uni_assist&&"O"===t.decided&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("h4",{className:"text-info",children:[t.programId.school," ",t.programId.program_name," "]}),(0,y.jsx)("p",{className:"text-light",children:"This program does NOT require Uni-Assist."})]})]},s)}));return(0,y.jsxs)(y.Fragment,{children:[i>=400&&(0,y.jsx)(S.Z,{ConfirmError:this.ConfirmError,res_modal_status:i,res_modal_message:r}),(0,y.jsx)(p.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,y.jsx)(p.Z.Body,{children:a})}),(0,y.jsxs)(f.Z,{show:this.state.deleteVPDFileWarningModel,onHide:this.closeWarningWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,y.jsx)(f.Z.Header,{children:(0,y.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,y.jsx)(f.Z.Body,{children:"Do you want to delete?"}),(0,y.jsxs)(f.Z.Footer,{children:[(0,y.jsx)(g.Z,{disabled:!this.state.isLoaded2[this.state.program_id],onClick:function(t){return e.handleUniAssistDocDelete(t,e.state.program_id)},children:this.state.isLoaded2[this.state.program_id]?"Yes":(0,y.jsx)(c.Z,{size:"sm",animation:"border",role:"status",variant:"light",children:(0,y.jsx)("span",{className:"visually-hidden"})})}),(0,y.jsx)(g.Z,{onClick:this.closeWarningWindow,children:"No"})]})]}),(0,y.jsxs)(f.Z,{show:this.state.setAsNotNeededModel,onHide:this.closesetAsNotNeededWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,y.jsx)(f.Z.Header,{children:(0,y.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,y.jsx)(f.Z.Body,{children:"Is VPD not necessary for this program (because other programs have already VPD and it can be reused for this)?"}),(0,y.jsxs)(f.Z.Footer,{children:[(0,y.jsx)(g.Z,{disabled:!this.state.isLoaded2[this.state.program_id],onClick:function(t){return e.handleSetAsNotNeeded(t)},children:this.state.isLoaded2[this.state.program_id]?"Yes":(0,y.jsx)(c.Z,{size:"sm",animation:"border",role:"status",variant:"light",children:(0,y.jsx)("span",{className:"visually-hidden"})})}),(0,y.jsx)(g.Z,{onClick:this.closesetAsNotNeededWindow,children:"No"})]})]})]})}}]),s}(l.Component);t.Z=L},30606:function(e,t,s){s.r(t);var n=s(27853),i=s(84531),r=s(78932),a=s(38128),o=s(47313),d=s(44030),l=s(63849),c=s(31616),u=s(65832),h=s(94395),m=s(4454),g=s(51767),p=s(82423),f=s(51426),x=s(46417),Z=function(e){(0,r.Z)(s,e);var t=(0,a.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isLoaded:!1,student:null,deleteVPDFileWarningModel:!1,res_status:0},e}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,f.u6)(this.props.user._id.toString()).then((function(t){var s=t.data,n=s.data,i=s.success,r=t.status;i?e.setState({isLoaded:!0,student:n,success:i,res_status:r}):e.setState({isLoaded:!0,res_status:r})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){if("Student"!==this.props.user.role)return(0,x.jsx)(h.Z,{to:"/dashboard/default"});var e=this.state,t=e.res_status;return e.isLoaded||this.state.student?t>=400?(0,x.jsx)(p.Z,{res_status:t}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,x.jsx)(u.Z.Header,{children:(0,x.jsx)(u.Z.Title,{className:"my-0 mx-0 text-light",children:"Uni-Assist Tasks & VPD"})})})})}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,x.jsx)(u.Z.Body,{className:"my-0 mx-0 text-light",children:"Instructions"})})})}),(0,x.jsx)(m.Z,{student:this.state.student,role:this.props.user.role})]}):(0,x.jsx)("div",{style:g.nT,children:(0,x.jsx)(d.Z,{animation:"border",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden"})})})}}]),s}(o.Component);t.default=Z},62396:function(e,t,s){s.d(t,{Z:function(){return N}});var n=s(18489),i=s(83738),r=s(36222),a=s(46123),o=s.n(a),d=s(46988),l=s(47313),c=s(22752),u=s(59498);var h,m=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];e.apply(this,n),t.apply(this,n)}}),null)},g=s(6280),p=s(39776),f=s(46417),x=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],Z={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function _(e,t){var s=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],n=Z[e];return s+parseInt((0,d.Z)(t,n[0]),10)+parseInt((0,d.Z)(t,n[1]),10)}var j=(h={},(0,r.Z)(h,c.Wj,"collapse"),(0,r.Z)(h,c.Ix,"collapsing"),(0,r.Z)(h,c.d0,"collapsing"),(0,r.Z)(h,c.cn,"collapse show"),h),v={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:_},S=l.forwardRef((function(e,t){var s=e.onEnter,r=e.onEntering,a=e.onEntered,d=e.onExit,c=e.onExiting,h=e.className,Z=e.children,v=e.dimension,S=void 0===v?"height":v,N=e.getDimensionValue,y=void 0===N?_:N,L=(0,i.Z)(e,x),D="function"===typeof S?S():S,b=(0,l.useMemo)((function(){return m((function(e){e.style[D]="0"}),s)}),[D,s]),I=(0,l.useMemo)((function(){return m((function(e){var t="scroll".concat(D[0].toUpperCase()).concat(D.slice(1));e.style[D]="".concat(e[t],"px")}),r)}),[D,r]),w=(0,l.useMemo)((function(){return m((function(e){e.style[D]=null}),a)}),[D,a]),A=(0,l.useMemo)((function(){return m((function(e){e.style[D]="".concat(y(D,e),"px"),(0,g.Z)(e)}),d)}),[d,y,D]),F=(0,l.useMemo)((function(){return m((function(e){e.style[D]=null}),c)}),[D,c]);return(0,f.jsx)(p.Z,(0,n.Z)((0,n.Z)({ref:t,addEndListener:u.Z},L),{},{"aria-expanded":L.role?L.in:null,onEnter:b,onEntering:I,onEntered:w,onExit:A,onExiting:F,childRef:Z.ref,children:function(e,t){return l.cloneElement(Z,(0,n.Z)((0,n.Z)({},t),{},{className:o()(h,Z.props.className,j[e],"width"===D&&"collapse-horizontal")}))}}))}));S.defaultProps=v;var N=S}}]);