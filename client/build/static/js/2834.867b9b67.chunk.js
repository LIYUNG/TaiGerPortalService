"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2834],{81048:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var n=s(27853),r=s(84531),i=s(78932),o=s(38128),a=s(47313),d=s(44030),l=s(63849),u=s(65832),c=s(465),p=s(54991),f=s(37062),m=s(3394),h=s(57864),_=s(58821),x=s(46417),g=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={student:e.props.student,student_id:"",docName:"",file:""},e}return(0,r.Z)(s,[{key:"render",value:function(){for(var e=this,t=(Object.values(window.profile_list),Object.keys(window.profile_list)),s={},n={},r={},i={},o=0;o<t.length;o++)s[t[o]]="missing",n[t[o]]="",r[t[o]]="",i[t[o]]="";if(this.props.student.profile)for(var a=0;a<this.props.student.profile.length;a++)"uploaded"===this.props.student.profile[a].status?s[this.props.student.profile[a].name]="uploaded":"accepted"===this.props.student.profile[a].status?s[this.props.student.profile[a].name]="accepted":"rejected"===this.props.student.profile[a].status?s[this.props.student.profile[a].name]="rejected":"notneeded"===this.props.student.profile[a].status?s[this.props.student.profile[a].name]="notneeded":"missing"===this.props.student.profile[a].status&&(s[this.props.student.profile[a].name]="missing"),n[this.props.student.profile[a].name]=this.props.student.profile[a].feedback?this.props.student.profile[a].feedback:"",r[this.props.student.profile[a].name]=new Date(this.props.student.profile[a].updatedAt).toLocaleDateString(),i[this.props.student.profile[a].name]=new Date(this.props.student.profile[a].updatedAt).toLocaleTimeString();for(var d,l=Object.keys(window.profile_list),u={background:"red"},c={background:"green"},p="Complete",g=0;g<l.length;g++)if("uploaded"===s[l[g]]||"rejected"===s[l[g]]||"missing"===s[l[g]]){c=u,p="Incomplete";break}return d=l.map((function(t,n){return"uploaded"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.QRz,{size:24,color:"orange",title:"Uploaded successfully"})})},n):"accepted"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(m.cfq,{size:24,color:"limegreen",title:"Valid Document"})})},n):"rejected"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.LHV,{size:24,color:"red",title:"Invalid Document"})})},n):"notneeded"===s[t]?(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(_.pZ2,{size:24,color:"lightgray",title:"Not needed"})})},n):(0,x.jsx)("td",{children:(0,x.jsx)(f.Z,{to:"/student-database/"+e.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-info",children:(0,x.jsx)(h.znh,{size:24,color:"lightgray",title:"No Document uploaded"})})},n)})),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{style:c,title:p,children:(0,x.jsxs)(f.Z,{to:"/student-database/"+this.props.student._id+"/profile",style:{textDecoration:"none"},className:"text-light",children:[this.props.student.firstname," ",this.props.student.lastname]})}),d]})})}}]),s}(a.Component),Z=g,j=s(36222),v=s(18489),y=s(31616),b=s(75828),k=s(60257),L=s(46090),F=s(3735),N=s(59931),D=s(20688),w=s(51767),E=s(51426),S=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={student:e.props.student,student_id:"",isLoaded:{},ready:!1,docName:"",file:"",deleteFileWarningModel:!1,res_status:0,res_modal_status:""},e.onUpdateProfileFilefromstudent=function(t,s,n,r){e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!1))}})),(0,E.dn)(t,s,n,r).then((function(s){var n=s.data,r=n.data,i=n.success,o=s.status;if(i)e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student:r,success:i,isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!0)),res_modal_status:o})}));else{var a=s.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!0)),res_modal_message:a,res_modal_status:o}}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e.onDeleteFilefromstudent=function(t,s){var n=(0,v.Z)({},e.state.student),r=n.profile.findIndex((function(e){return e.name===t}));e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!1))}})),(0,E._I)(t,s).then((function(s){var i=s.data,o=i.data,a=i.success,d=s.status;if(a)n.profile[r]=o,e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student_id:"",category:"",isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!0)),student:n,success:a,deleteFileWarningModel:!1,res_modal_status:d})}));else{var l=s.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},t,!0)),deleteFileWarningModel:!1,res_modal_message:l,res_modal_status:d}}))}}),(function(t){e.setState({isLoaded:!0,error:!0})}))},e.ConfirmError=function(){e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e.handleGeneralDocSubmit=function(t,s,n){t.preventDefault(),e.onSubmitGeneralFile(t,t.target.files[0],s,n)},e.onSubmitGeneralFile=function(t,s,n,r){t.preventDefault();var i=new FormData;i.append("file",s),e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},n,!1))}})),(0,E.HQ)(n,r,i).then((function(t){var s=t.data,r=s.data,i=s.success,o=t.status;if(i)e.setState((function(e){return(0,v.Z)((0,v.Z)({},e),{},{student:r,success:i,category:"",isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},n,!0)),file:"",res_modal_status:o})}));else{var a=t.data.message;e.setState((function(e){return{isLoaded:(0,v.Z)((0,v.Z)({},e.isLoaded),{},(0,j.Z)({},n,!0)),res_modal_message:a,res_modal_status:o}}))}}),(function(t){e.setState({isLoaded:!0,error:t})}))},e}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){for(var e=Object.keys(window.profile_wtih_doc_link_list),t={},s=0;s<e.length;s++)t[e[s]]=!0;this.setState({isLoaded:t,ready:!0})}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_modal_status,n=t.res_modal_message;if(!t.ready)return(0,x.jsx)("div",{style:w.nT,children:(0,x.jsx)(d.Z,{animation:"border",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden"})})});for(var r,i=Object.values(window.profile_list),o=Object.keys(window.profile_wtih_doc_link_list),a={},p={},f={},m={},h=0;h<o.length;h++)a[o[h]]={status:"missing",link:""},p[o[h]]="",f[o[h]]="",m[o[h]]="";if(this.props.base_docs_link)for(var _=0;_<this.props.base_docs_link.length;_++)a[this.props.base_docs_link[_].key].link=this.props.base_docs_link[_].link;if(this.state.student.profile)for(var g=0;g<this.state.student.profile.length;g++){var Z=this.state.student.profile[g].path.replace(/\\/g,"/");"uploaded"===this.state.student.profile[g].status?(a[this.state.student.profile[g].name].status="uploaded",a[this.state.student.profile[g].name].path=Z.split("/")[1]):"accepted"===this.state.student.profile[g].status?(a[this.state.student.profile[g].name].status="accepted",a[this.state.student.profile[g].name].path=Z.split("/")[1]):"rejected"===this.state.student.profile[g].status?(a[this.state.student.profile[g].name].status="rejected",a[this.state.student.profile[g].name].path=Z.split("/")[1]):"notneeded"===this.state.student.profile[g].status?a[this.state.student.profile[g].name].status="notneeded":"missing"===this.state.student.profile[g].status&&(a[this.state.student.profile[g].name].status="missing"),p[this.state.student.profile[g].name]=this.state.student.profile[g].feedback?this.state.student.profile[g].feedback:"",f[this.state.student.profile[g].name]=new Date(this.state.student.profile[g].updatedAt).toLocaleDateString(),m[this.state.student.profile[g].name]=new Date(this.state.student.profile[g].updatedAt).toLocaleTimeString()}return r=o.map((function(t,s){return"uploaded"===a[t].status?(0,x.jsx)(b.Z,{role:e.props.role,link:a[t].link,path:a[t].path,isLoaded:e.state.isLoaded[t],docName:i[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent},s+1):"accepted"===a[t].status?(0,x.jsx)(k.Z,{role:e.props.role,link:a[t].link,path:a[t].path,isLoaded:e.state.isLoaded[t],docName:i[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):"rejected"===a[t].status?(0,x.jsx)(L.Z,{role:e.props.role,link:a[t].link,path:a[t].path,isLoaded:e.state.isLoaded[t],docName:i[s],date:f[t],time:m[t],k:t,message:p[t],student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):"notneeded"===a[t].status?("Admin"===e.props.role||"Agent"===e.props.role)&&(0,x.jsx)(F.Z,{role:e.props.role,link:a[t].link,isLoaded:e.state.isLoaded[t],docName:i[s],date:f[t],time:m[t],k:t,student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,deleteFileWarningModel:e.state.deleteFileWarningModel},s+1):(0,x.jsx)(N.Z,{role:e.props.role,link:a[t].link,isLoaded:e.state.isLoaded[t],docName:i[s],date:f[t],time:m[t],k:t,message:p[t],student_id:e.state.student._id,onDeleteFilefromstudent:e.onDeleteFilefromstudent,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,handleGeneralDocSubmit:e.handleGeneralDocSubmit},s+1)})),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:[(0,x.jsx)(u.Z.Header,{children:(0,x.jsxs)(u.Z.Title,{className:"my-0 mx-0 text-light",children:[this.state.student.firstname," ,",this.state.student.lastname]})}),(0,x.jsx)(l.Z,{children:(0,x.jsxs)(c.Z,{responsive:!0,className:"my-0 mx-0",variant:"dark",text:"light",size:"sm",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"File Name:"}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{}),(0,x.jsx)("th",{children:"Delete"})]})}),(0,x.jsx)("tbody",{children:r})]})}),(0,x.jsx)(l.Z,{children:(0,x.jsx)(y.Z,{className:"md-4",children:this.props.SYMBOL_EXPLANATION})})]},this.props.idx),s>=400&&(0,x.jsx)(D.Z,{ConfirmError:this.ConfirmError,res_modal_status:s,res_modal_message:n})]})}}]),s}(a.Component),M=S,A=s(82423),P=function(e){(0,i.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,n.Z)(this,s);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={error:null,isLoaded:!1,data:null,base_docs_link:null,success:!1,students:null,file:"",student_id:"",status:"",category:"",feedback:"",expand:!1,CommentModel:!1,accordionKeys:!e.props.user.students||"Editor"!==e.props.user.role&&"Agent"!==e.props.user.role?[0]:new Array(e.props.user.students.length).fill().map((function(e,t){return t})),res_status:0,res_modal_status:""},e}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,E.Nc)().then((function(t){var s=t.data,n=s.base_docs_link,r=s.data,i=s.success,o=t.status;i?e.setState({isLoaded:!0,students:r,base_docs_link:n,success:i,res_status:o}):e.setState({isLoaded:!0,res_status:o})}),(function(t){e.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.res_status,n=t.base_docs_link,r=t.isLoaded,i=t.res_modal_status,o=t.res_modal_message;if(!r&&!this.state.students)return(0,x.jsx)("div",{style:w.nT,children:(0,x.jsx)(d.Z,{animation:"border",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden"})})});if(s>=400)return(0,x.jsx)(A.Z,{res_status:s});var a=Object.values(window.profile_list),f=this.state.students.map((function(t,s){return(0,x.jsx)(Z,{idx:s,student:t,role:e.props.user.role,user:e.props.user,SYMBOL_EXPLANATION:w.vE,isLoaded:r},s)})),m=this.state.students.map((function(t,s){return(0,x.jsx)(M,{idx:s,base_docs_link:n,student:t,role:e.props.user.role,user:e.props.user,SubmitGeneralFile:e.SubmitGeneralFile,onUpdateProfileFilefromstudent:e.onUpdateProfileFilefromstudent,onDeleteFilefromstudent:e.onDeleteFilefromstudent,SYMBOL_EXPLANATION:w.vE,isLoaded:r,deleteFileWarningModel:e.state.deleteFileWarningModel,CommentModel:e.state.CommentModel},s)}));return(0,x.jsx)(p.Z,{children:(0,x.jsxs)(l.Z,{children:["Admin"===this.props.user.role||"Agent"===this.props.user.role||"Editor"===this.props.user.role?(0,x.jsxs)(u.Z,{className:"mb-0 mx-0",bg:"dark",text:"light",children:[(0,x.jsx)(u.Z.Header,{as:"h5",children:"Base Documents"})," ",(0,x.jsxs)(c.Z,{size:"sm",responsive:!0,hover:!0,text:"light",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"my-0 mx-0 text-light",children:[(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("th",{style:w.NW,children:"First-, Last Name"})}),a.map((function(e,t){return(0,x.jsx)("th",{style:w.NW,children:(0,w.zY)(e)},t)}))]})}),(0,x.jsx)("tbody",{children:f})]})]}):(0,x.jsx)(x.Fragment,{children:m}),i>=400&&(0,x.jsx)(D.Z,{ConfirmError:this.ConfirmError,res_modal_status:i,res_modal_message:o})]})})}}]),s}(a.Component),C=P},62396:function(e,t,s){s.d(t,{Z:function(){return b}});var n=s(18489),r=s(83738),i=s(36222),o=s(46123),a=s.n(o),d=s(46988),l=s(47313),u=s(22752),c=s(59498);var p,f=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),null)},m=s(6280),h=s(39776),_=s(46417),x=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],g={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Z(e,t){var s=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],n=g[e];return s+parseInt((0,d.Z)(t,n[0]),10)+parseInt((0,d.Z)(t,n[1]),10)}var j=(p={},(0,i.Z)(p,u.Wj,"collapse"),(0,i.Z)(p,u.Ix,"collapsing"),(0,i.Z)(p,u.d0,"collapsing"),(0,i.Z)(p,u.cn,"collapse show"),p),v={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:Z},y=l.forwardRef((function(e,t){var s=e.onEnter,i=e.onEntering,o=e.onEntered,d=e.onExit,u=e.onExiting,p=e.className,g=e.children,v=e.dimension,y=void 0===v?"height":v,b=e.getDimensionValue,k=void 0===b?Z:b,L=(0,r.Z)(e,x),F="function"===typeof y?y():y,N=(0,l.useMemo)((function(){return f((function(e){e.style[F]="0"}),s)}),[F,s]),D=(0,l.useMemo)((function(){return f((function(e){var t="scroll".concat(F[0].toUpperCase()).concat(F.slice(1));e.style[F]="".concat(e[t],"px")}),i)}),[F,i]),w=(0,l.useMemo)((function(){return f((function(e){e.style[F]=null}),o)}),[F,o]),E=(0,l.useMemo)((function(){return f((function(e){e.style[F]="".concat(k(F,e),"px"),(0,m.Z)(e)}),d)}),[d,k,F]),S=(0,l.useMemo)((function(){return f((function(e){e.style[F]=null}),u)}),[F,u]);return(0,_.jsx)(h.Z,(0,n.Z)((0,n.Z)({ref:t,addEndListener:c.Z},L),{},{"aria-expanded":L.role?L.in:null,onEnter:N,onEntering:D,onEntered:w,onExit:E,onExiting:S,childRef:g.ref,children:function(e,t){return l.cloneElement(g,(0,n.Z)((0,n.Z)({},t),{},{className:a()(p,g.props.className,j[e],"width"===F&&"collapse-horizontal")}))}}))}));y.defaultProps=v;var b=y},465:function(e,t,s){var n=s(18489),r=s(83738),i=s(46123),o=s.n(i),a=s(47313),d=s(68524),l=s(46417),u=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],c=a.forwardRef((function(e,t){var s=e.bsPrefix,i=e.className,a=e.striped,c=e.bordered,p=e.borderless,f=e.hover,m=e.size,h=e.variant,_=e.responsive,x=(0,r.Z)(e,u),g=(0,d.vE)(s,"table"),Z=o()(i,g,h&&"".concat(g,"-").concat(h),m&&"".concat(g,"-").concat(m),a&&"".concat(g,"-").concat("string"===typeof a?"striped-".concat(a):"striped"),c&&"".concat(g,"-bordered"),p&&"".concat(g,"-borderless"),f&&"".concat(g,"-hover")),j=(0,l.jsx)("table",(0,n.Z)((0,n.Z)({},x),{},{className:Z,ref:t}));if(_){var v="".concat(g,"-responsive");return"string"===typeof _&&(v="".concat(v,"-").concat(_)),(0,l.jsx)("div",{className:v,children:j})}return j}));t.Z=c}}]);