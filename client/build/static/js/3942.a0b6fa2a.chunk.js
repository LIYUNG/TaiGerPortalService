"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[3942],{63942:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var a=s(35531),n=s(18489),r=s(27853),i=s(84531),d=s(78932),o=s(38128),l=s(47313),c=s(44030),h=s(63849),u=s(65832),p=s(93298),m=s(31616),f=s(47939),x=s(37062),g=s(54991),_=s(62396),Z=s(54972),j=s(89351),S=s(33032),y=s(23430),v=s(78994),F=s.n(v),b=s(88195),C=s.n(b),k=s(82737),w=s.n(k),N=s(67989),D=s.n(N),M=s(1693),A=s.n(M),L=s(87606),E=s.n(L),H=s(60823),T=s.n(H),I=s(37417),K=s.n(I),B=s(68234),R=s.n(B),q=s(87366),O=s.n(q),V=s(44236),U=s.n(V),z=s(19893),W=s.n(z),G=s(28668),J=s.n(G),P=s(51426),Y=s(46417),Q=function(e){var t,s=(0,l.useRef)(),a=(0,l.useState)(),n=(0,y.Z)(a,2);n[0],n[1];(0,l.useEffect)((function(){return s.current||r(),function(){s.current.destroy(),s.current=null}}),[e.editorState]);var r=function(){t=new(C())({holder:"".concat(e.holder),logLevel:"ERROR",data:e.editorState,onReady:function(){s.current=t},onChange:function(){var t=(0,S.Z)(F().mark((function t(s,a){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.saver.save().then((function(t){e.handleEditorChange(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),readOnly:e.readOnly,autofocus:!0,minHeight:100,tools:{header:{class:w(),config:{placeholder:"Enter a header",levels:[2,3,4,5,6],defaultLevel:3},inlineToolbar:!0},list:{class:D(),inlineToolbar:!0},Marker:{class:W(),config:{colorCollections:["#000000","#FF0000","#00FF00","#0000FF","#999999","#00FFFF","#FF00FF","#800080","#FFF"],defaultColor:"#FFF",type:"marker"}},underline:U(),code:O(),table:{class:T(),inlineToolbar:!0,config:{rows:2,cols:3}},Color:{class:W(),config:{colorCollections:["#000000","#FF0000","#00FF00","#0000FF","#999999","#00FFFF","#FF00FF","#800080","#FFF"],type:"text"}},textAlign:J(),image:{class:E(),config:{uploader:{uploadByFile:function(t){return(0,S.Z)(F().mark((function s(){var a,n;return F().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if((a=new FormData).append("file",t),!e.thread){s.next=8;break}return s.next=5,(0,P.cE)(e.thread._id.toString(),e.thread.student_id._id.toString(),a);case 5:n=s.sent,s.next=11;break;case 8:return s.next=10,(0,P.Ix)(a);case 10:n=s.sent;case 11:return s.abrupt("return",{success:1,file:{url:n.data.data}});case 12:case"end":return s.stop()}}),s)})))()},uploadByUrl:function(e){return(0,S.Z)(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{success:1,file:{url:e}});case 1:case"end":return t.stop()}}),t)})))()}}}},elimiter:R(),embed:{class:A(),inlineToolbar:!1,config:{services:{youtube:!0,coub:!0}}},inlineCode:{class:K()}}})};return(0,Y.jsx)(l.Fragment,{children:(0,Y.jsx)("div",{id:"".concat(e.holder)})})},X=s(44416),$=s(51767),ee=s(17947),te=function(e){(0,d.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={editorState:null,ConvertedContent:"",message_id:"",isLoaded:!1,deleteMessageModalShow:!1},e.onOpendeleteMessageModalShow=function(t,s,a){e.setState({message_id:s,deleteMessageModalShow:!0,createdAt:a})},e.onHidedeleteMessageModalShow=function(t){e.setState({message_id:"",createdAt:"",deleteMessageModalShow:!1})},e.onDeleteSingleMessage=function(t){t.preventDefault(),e.props.onDeleteSingleMessage(t,e.state.message_id)},e}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){var e=this,t=null;if(this.props.message.message&&"{}"!==this.props.message.message)try{t=JSON.parse(this.props.message.message)}catch(s){t={time:new Date,blocks:[]}}else t={time:new Date,blocks:[]};this.setState((function(s){return(0,n.Z)((0,n.Z)({},s),{},{editorState:t,ConvertedContent:t,isLoaded:e.props.isLoaded})}))}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded&&!this.state.editorState)return(0,Y.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Y.jsx)(c.Z,{animation:"border",role:"status",children:(0,Y.jsx)("span",{className:"visually-hidden"})})});var t=this.props.message.user_id?this.props.message.user_id.firstname:"Staff",s=this.props.message.user_id?this.props.message.user_id.lastname:"TaiGer",a=!!this.props.message.user_id&&this.props.message.user_id._id.toString()===this.props.user._id.toString(),r="".concat(t," ").concat(s),i=this.props.message.file.map((function(t,s){return(0,Y.jsx)(u.Z,{className:"my-0 mx-0",children:(0,Y.jsx)(u.Z.Body,{children:(0,Y.jsxs)(h.Z,{children:[(0,Y.jsx)(m.Z,{md:1,style:{height:"15%",width:"15%"},children:(0,Y.jsx)("span",{children:(0,Y.jsx)("a",{href:"".concat(j._,"/api/document-threads/").concat(e.props.documentsthreadId,"/").concat(e.props.message._id.toString(),"/").concat(t.path.replace(/\\/g,"/").split("/")[2]),target:"_blank",children:(0,Y.jsx)(X.a,(0,n.Z)({extension:t.name.split(".").pop()},X.j[t.name.split(".").pop()]))})})}),(0,Y.jsx)(m.Z,{className:"my-4",style:{height:"15%"},children:(0,Y.jsx)("a",{href:"".concat(j._,"/api/document-threads/").concat(e.props.documentsthreadId,"/").concat(e.props.message._id.toString(),"/").concat(t.path.replace(/\\/g,"/").split("/")[2]),target:"_blank",children:t.name})})]})})},s)}));return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(u.Z,{border:"primary",className:"mb-2 mx-0",children:[(0,Y.jsx)(u.Z.Header,{as:"h5","aria-controls":"accordion"+this.props.idx,"aria-expanded":this.props.accordionKeys[this.props.idx]===this.props.idx,className:"ps-2 py-2 pe-0 ",children:(0,Y.jsxs)(h.Z,{className:"my-0",children:[(0,Y.jsx)(m.Z,{md:1,className:"px-1  pe-0 ",style:{height:"10%",width:"10%"},onClick:function(){return e.props.singleExpandtHandler(e.props.idx)},children:(0,Y.jsx)(ee.Z,(0,n.Z)({},(0,$.GZ)(r)))}),(0,Y.jsx)(m.Z,{className:"ps-2 mx-2 mt-2",children:(0,Y.jsxs)("p",{children:[(0,Y.jsx)("b",{style:{cursor:"pointer"},className:"ps-0 my-1",onClick:function(){return e.props.singleExpandtHandler(e.props.idx)},children:r}),(0,Y.jsxs)("span",{style:{float:"right"},children:[(0,$.Ny)(this.props.message.createdAt),a&&(0,Y.jsx)(Z.tgW,{className:"mx-0",color:"red",title:"Delete this message and file",size:20,onClick:function(t){return e.onOpendeleteMessageModalShow(t,e.props.message._id.toString(),e.props.message.createdAt)},style:{cursor:"pointer"}})]})]})})]})}),(0,Y.jsx)(_.Z,{in:this.props.accordionKeys[this.props.idx]===this.props.idx,children:(0,Y.jsxs)(u.Z.Body,{children:[(0,Y.jsx)(Q,{holder:"".concat(this.props.message._id.toString()),readOnly:!0,handleClickSave:this.props.handleClickSave,handleClickCancel:this.props.handleClickCancel,editorState:this.state.editorState}),i]})})]}),(0,Y.jsxs)(f.Z,{show:this.state.deleteMessageModalShow,onHide:this.onHidedeleteMessageModalShow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,Y.jsx)(f.Z.Header,{children:(0,Y.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,Y.jsxs)(f.Z.Body,{children:["Do you wan to delete this message on"," ",(0,Y.jsxs)("b",{children:[(0,$.Ny)(this.state.createdAt),"?"]})]}),(0,Y.jsxs)(f.Z.Footer,{children:[(0,Y.jsx)(p.Z,{disabled:!this.props.isLoaded,variant:"danger",onClick:this.onDeleteSingleMessage,children:this.props.isLoaded?"Delete":"Pending"}),(0,Y.jsx)(p.Z,{onClick:this.onHidedeleteMessageModalShow,children:"Cancel"})]})]})]})}}]),s}(l.Component),se=te,ae=function(e){(0,d.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"render",value:function(){var e=this,t=this.props.thread.messages.map((function(t,s){return(0,Y.jsx)(se,{documentsthreadId:e.props.documentsthreadId,accordionKeys:e.props.accordionKeys,singleExpandtHandler:e.props.singleExpandtHandler,id:t._id,idx:s,message:t,onTrashClick:e.props.onTrashClick,lastupdate:e.props.lastupdate,isLoaded:e.props.isLoaded,user:e.props.user,onDeleteSingleMessage:e.props.onDeleteSingleMessage},s)}));return(0,Y.jsx)(Y.Fragment,{children:t})}}]),s}(l.Component),ne=ae,re=s(67203);var ie=function(e){var t=(0,l.useState)({editorState:e.editorState}),s=(0,y.Z)(t,2),a=s[0],r=s[1];return(0,l.useEffect)((function(){r((function(t){return(0,n.Z)((0,n.Z)({},t),{},{editorState:e.editorState})}))}),[e.editorState]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(h.Z,{style:{textDecoration:"none"},children:(0,Y.jsx)(m.Z,{className:"my-0 mx-0",children:(0,Y.jsx)(Q,{holder:"editorjs",thread:e.thread,readOnly:!1,handleEditorChange:function(e){r((function(t){return(0,n.Z)((0,n.Z)({},t),{},{editorState:e})}))},handleClickSave:e.handleClickSave,editorState:e.editorState,setStatedata:r})})}),(0,Y.jsxs)(h.Z,{children:[(0,Y.jsx)(m.Z,{md:8,children:(0,Y.jsx)(re.Z.Group,{controlId:"formFile",className:"mb-2",children:(0,Y.jsx)(re.Z.Control,{type:"file",onChange:function(t){return e.onFileChange(t)}})})}),(0,Y.jsx)(m.Z,{className:"mt-2",md:4,children:"(max. 2MB)"})]}),(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(m.Z,{className:"my-0 mx-0",children:(0,Y.jsx)(p.Z,{disabled:!a.editorState.blocks||0===a.editorState.blocks.length||e.buttonDisabled,onClick:function(t){return e.handleClickSave(t,a.editorState)},children:"Save"})})})]})},de=s(82423),oe=s(20688),le=function(e){(0,d.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var i=arguments.length,d=new Array(i),o=0;o<i;o++)d[o]=arguments[o];return(e=t.call.apply(t,[this].concat(d))).state={error:null,timeouterror:null,unauthorizederror:null,pagenotfounderror:null,file:null,isLoaded:!1,isSubmissionLoaded:!0,articles:[],isEdit:!1,thread:null,editFormOpen:!1,defaultStep:1,buttonDisabled:!1,editorState:{},expand:!0,SetAsFinalFileModel:!1,accordionKeys:[0],res_status:0,res_modal_status:0,res_modal_message:""},e.closeSetAsFinalFileModelWindow=function(){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{SetAsFinalFileModel:!1})}))},e.onFileChange=function(t){t.preventDefault(),e.setState({file:t.target.files[0]})},e.handleEditorChange=function(t){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{editorState:t})}))},e.onDownloadTemplate=function(e,t){e.preventDefault(),(0,P.Bl)(t).then((function(e){var t=e.headers["content-disposition"].split('"')[1],s=e.data;if(0!==s.size){var a=t.split(".");if("pdf"===(a=a.pop())){var n=window.URL.createObjectURL(new Blob([s],{type:"application/pdf"}));window.open(n,"_blank").document.title=t}else{var r=window.URL.createObjectURL(new Blob([s])),i=document.createElement("a");i.href=r,i.setAttribute("download",t),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}}}),(function(e){alert("The file is not available.")}))},e.handleTrashClick=function(t){e.deleteArticle(t)},e.ConfirmError=function(){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e.deleteArticle=function(t){e.setState({articles:e.state.articles.filter((function(e){return e._id!==t}))}),(0,P.oe)(t).then((function(t){var s=t.data.success,a=t.status;s||e.setState({isLoaded:!0,res_modal_status:a})}),(function(t){e.setState({isLoaded:!1,error:t})}))},e.singleExpandtHandler=function(t){var s=(0,a.Z)(e.state.accordionKeys);s[t]=s[t]!==t?t:-1,e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{accordionKeys:s})}))},e.AllCollapsetHandler=function(){e.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{expand:!1,accordionKeys:new Array(e.state.thread.messages.length).fill().map((function(e,t){return-1}))})}))},e.AllExpandtHandler=function(){e.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{expand:!0,accordionKeys:new Array(e.state.thread.messages.length).fill().map((function(e,t){return t}))})}))},e.getRequirement=function(t){return t.file_type.includes("Essay")?"yes"===t.program_id.essay_required?(0,Y.jsx)("p",{children:e.state.thread.program_id.essay_requirements?e.state.thread.program_id.essay_requirements:"No"}):(0,Y.jsx)("p",{children:"No"}):t.file_type.includes("ML")?"yes"===t.program_id.ml_required?(0,Y.jsx)("p",{children:e.state.thread.program_id.ml_requirements?e.state.thread.program_id.ml_requirements:"No"}):(0,Y.jsx)("p",{children:"No"}):t.file_type.includes("RL")?"yes"===t.program_id.rl_required?(0,Y.jsx)("p",{children:e.state.thread.program_id.rl_requirements?e.state.thread.program_id.rl_requirements:"No"}):(0,Y.jsx)("p",{children:"No"}):void 0},e.handleClickSave=function(t,s){t.preventDefault(),e.setState({buttonDisabled:!0});var r=JSON.stringify(s),i=new FormData;i.append("file",e.state.file),i.append("message",r),(0,P.me)(e.state.documentsthreadId,e.state.thread.student_id._id,i).then((function(t){var s=t.data,n=s.success,r=s.data,i=t.status;if(n)e.setState({success:n,file:null,editorState:{},thread:r,isLoaded:!0,buttonDisabled:!1,accordionKeys:[].concat((0,a.Z)(e.state.accordionKeys),[r.messages.length-1]),res_modal_status:i});else{var d=t.data.message;e.setState({isLoaded:!0,buttonDisabled:!1,res_modal_message:d,res_modal_status:i})}}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{in_edit_mode:!1})}))},e.handleAsFinalFile=function(t,s,a){e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{doc_thread_id:t,student_id:s,program_id:a,SetAsFinalFileModel:!0})}))},e.ConfirmSetAsFinalFileHandler=function(t){t.preventDefault(),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isSubmissionLoaded:!1})}));var s=e.state.program_id?e.state.program_id._id.toString():void 0;(0,P.lk)(e.state.doc_thread_id,e.state.student_id,s).then((function(t){var s=t.data,a=s.data,r=s.success,i=t.status;if(r)e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isSubmissionLoaded:!0,thread:(0,n.Z)((0,n.Z)({},e.thread),{},{isFinalVersion:a.isFinalVersion,updatedAt:a.updatedAt}),success:r,SetAsFinalFileModel:!1,res_modal_status:i})}));else{var d=t.data.message;e.setState({isLoaded:!0,isSubmissionLoaded:!0,res_modal_message:d,res_modal_status:i})}}),(function(t){e.setState({error:t})}))},e.onDeleteSingleMessage=function(t,s){t.preventDefault(),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isLoaded:!1})})),(0,P.vL)(e.state.documentsthreadId,s).then((function(t){var r=t.data.success,i=t.status;if(r){var d=(0,a.Z)(e.state.thread.messages),o=e.state.thread.messages.findIndex((function(e){return e._id.toString()===s}));-1!==o&&d.splice(o,1),e.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{success:r,isLoaded:!0,thread:(0,n.Z)((0,n.Z)({},e.state.thread),{},{messages:d}),buttonDisabled:!1,res_modal_status:i})}))}else{var l=t.data.message;e.setState({isLoaded:!0,buttonDisabled:!1,res_modal_message:l,res_modal_status:i})}}),(function(t){e.setState({error:t})})),e.setState((function(e){return(0,n.Z)((0,n.Z)({},e),{},{in_edit_mode:!1})}))},e}return(0,i.Z)(s,[{key:"componentDidMount",value:function(){var e=this;(0,P.vn)(this.props.match.params.documentsthreadId).then((function(t){var s=t.data,a=s.success,n=s.data,r=t.status;a?e.setState({success:a,thread:n,isLoaded:!0,documentsthreadId:e.props.match.params.documentsthreadId,file:null,accordionKeys:new Array(n.messages.length).fill().map((function(e,t){return t===n.messages.length-1?t:-1})),res_status:r}):e.setState({isLoaded:!0,res_status:r})}),(function(t){e.setState({isLoaded:!1,error:t})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.isLoaded,a=t.isSubmissionLoaded,n=t.res_status,r=t.res_modal_status,i=t.res_modal_message;if(!s&&!this.state.thread)return(0,Y.jsx)("div",{style:$.nT,children:(0,Y.jsx)(c.Z,{animation:"border",role:"status",children:(0,Y.jsx)("span",{className:"visually-hidden"})})});if(n>=400)return(0,Y.jsx)(de.Z,{res_status:n});var d,o=window.templatelist.find((function(t){return t.prop.includes(e.state.thread.file_type.split("_")[0])}));return d=this.state.thread.program_id?this.state.thread.student_id.firstname+" "+this.state.thread.student_id.lastname+" - "+this.state.thread.program_id.school+" "+this.state.thread.program_id.program_name+" "+this.state.thread.file_type:this.state.thread.student_id.firstname+" "+this.state.thread.student_id.lastname+" - "+this.state.thread.file_type,(0,Y.jsxs)(g.Z,{children:[!s&&(0,Y.jsx)("div",{style:$.nT,children:(0,Y.jsx)(c.Z,{animation:"border",role:"status",children:(0,Y.jsx)("span",{className:"visually-hidden"})})}),(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(u.Z,{className:"mb-2 mx-0",children:(0,Y.jsx)(u.Z.Header,{children:(0,Y.jsxs)(u.Z.Title,{as:"h5",children:[d," Discussion thread","   ",this.state.expand?(0,Y.jsx)(p.Z,{className:"btn-sm float-right",onClick:function(){return e.AllCollapsetHandler()},children:"Collaspse"}):(0,Y.jsx)(p.Z,{className:"btn-sm float-right",onClick:function(){return e.AllExpandtHandler()},children:"Expand"})]})})})}),this.state.thread.isFinalVersion&&(0,Y.jsx)(h.Z,{className:"sticky-top",children:(0,Y.jsx)(u.Z,{className:"mb-2 mx-0",bg:"success",text:"white",children:(0,Y.jsx)(u.Z.Header,{children:(0,Y.jsxs)(u.Z.Title,{as:"h5",className:"text-light",children:["Status: ",(0,Y.jsx)("b",{children:"Close"})]})})})}),(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(u.Z,{className:"mb-2 mx-0",children:(0,Y.jsxs)(u.Z.Body,{children:[(0,Y.jsxs)(m.Z,{children:[(0,Y.jsx)("h5",{children:"Instruction"}),(0,Y.jsx)("p",{children:"Please fill our TaiGer template and attach the filled template in this discussion."}),(0,Y.jsxs)("p",{children:["Download template:"," ",o?(0,Y.jsx)("b",{style:{cursor:"pointer"},onClick:function(t){return e.onDownloadTemplate(t,o.prop)},children:"Link"}):(0,Y.jsx)(Y.Fragment,{children:"Not available"})]})]}),(0,Y.jsxs)(m.Z,{children:[(0,Y.jsxs)("h6",{children:[(0,Y.jsx)("b",{children:"Requirements:"}),("Agent"===this.props.user.role||"Admin"===this.props.user.role)&&this.state.thread.program_id&&(0,Y.jsxs)(x.Z,{to:"/programs/".concat(this.state.thread.program_id._id.toString()),target:"_blank",children:[" ","[Update]"]})]}),this.state.thread.program_id?(0,Y.jsx)(Y.Fragment,{children:this.getRequirement(this.state.thread)}):(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)("p",{children:"No"})}),(0,Y.jsxs)("h6",{children:[(0,Y.jsx)("b",{children:"Deadline"}),("Agent"===this.props.user.role||"Admin"===this.props.user.role)&&this.state.thread.program_id&&(0,Y.jsxs)(x.Z,{to:"/programs/".concat(this.state.thread.program_id._id.toString()),target:"_blank",children:[" ","[Update]"]})]}),this.state.thread.program_id&&(0,Y.jsxs)("h6",{children:[this.state.thread.student_id.application_preference&&this.state.thread.student_id.application_preference.expected_application_date?this.state.thread.student_id.application_preference.expected_application_date+"-":"",this.state.thread.program_id.application_deadline]})]})]})})}),(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(ne,{documentsthreadId:this.state.documentsthreadId,accordionKeys:this.state.accordionKeys,singleExpandtHandler:this.singleExpandtHandler,thread:this.state.thread,onTrashClick:this.handleTrashClick,isLoaded:this.state.isLoaded,user:this.props.user,onDeleteSingleMessage:this.onDeleteSingleMessage})}),!0!==this.props.user.archiv?(0,Y.jsx)(h.Z,{children:(0,Y.jsxs)(u.Z,{className:"my-0 mx-0",children:[(0,Y.jsx)(u.Z.Header,{children:(0,Y.jsxs)(u.Z.Title,{as:"h5",children:[this.props.user.firstname," ",this.props.user.lastname]})}),(0,Y.jsx)(u.Z.Body,{children:this.state.thread.isFinalVersion?(0,Y.jsx)(h.Z,{style:{textDecoration:"none"},children:(0,Y.jsx)(m.Z,{className:"my-0 mx-0",children:"This discussion thread is close."})}):(0,Y.jsx)(h.Z,{style:{textDecoration:"none"},children:(0,Y.jsx)(m.Z,{className:"my-0 mx-0",children:(0,Y.jsx)(ie,{thread:this.state.thread,buttonDisabled:this.state.buttonDisabled,doc_title:"this.state.doc_title",editorState:this.state.editorState,handleClickSave:this.handleClickSave,file:this.state.file,onFileChange:this.onFileChange})})})})]})}):(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(u.Z,{className:"my-0 mx-0",children:(0,Y.jsx)(u.Z.Body,{children:(0,Y.jsx)(h.Z,{style:{textDecoration:"none"},children:(0,Y.jsx)(m.Z,{className:"my-0 mx-0",children:"You service is finished. Therefore, you are in read only mode."})})})})}),("Editor"===this.props.user.role||"Agent"===this.props.user.role||"Admin"===this.props.user.role)&&(this.state.thread.isFinalVersion?(0,Y.jsx)(h.Z,{className:"mt-2",children:(0,Y.jsx)(p.Z,{variant:"danger",onClick:function(t){return e.handleAsFinalFile(e.state.thread._id,e.state.thread.student_id._id,e.state.thread.program_id,e.state.thread.isFinalVersion)},children:a?"Mark as open":(0,Y.jsx)(c.Z,{animation:"border",role:"status",size:"sm",children:(0,Y.jsx)("span",{className:"visually-hidden"})})})}):(0,Y.jsx)(h.Z,{className:"mt-2",children:(0,Y.jsx)(p.Z,{variant:"success",onClick:function(t){return e.handleAsFinalFile(e.state.thread._id,e.state.thread.student_id._id,e.state.thread.program_id,e.state.thread.isFinalVersion)},children:a?"Mark as finished":(0,Y.jsx)(c.Z,{animation:"border",role:"status",size:"sm",children:(0,Y.jsx)("span",{className:"visually-hidden"})})})})),(0,Y.jsxs)(f.Z,{show:this.state.SetAsFinalFileModel,onHide:this.closeSetAsFinalFileModelWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,Y.jsx)(f.Z.Header,{children:(0,Y.jsx)(f.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,Y.jsxs)(f.Z.Body,{children:["Do you want to set ",d," as"," ",this.state.thread.isFinalVersion?"open":"final","?"]}),(0,Y.jsxs)(f.Z.Footer,{children:[(0,Y.jsx)(p.Z,{disabled:!s||!a,onClick:function(t){return e.ConfirmSetAsFinalFileHandler(t)},children:a?"Yes":(0,Y.jsx)(c.Z,{animation:"border",role:"status",size:"sm",children:(0,Y.jsx)("span",{className:"visually-hidden"})})}),(0,Y.jsx)(p.Z,{onClick:this.closeSetAsFinalFileModelWindow,children:"No"})]})]}),r>=400&&(0,Y.jsx)(oe.Z,{ConfirmError:this.ConfirmError,res_modal_status:r,res_modal_message:i})]})}}]),s}(l.Component),ce=le}}]);