"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2019],{30856:function(t,e,a){a.r(e);var r=a(18489),s=a(36222),i=a(27853),n=a(84531),o=a(78932),d=a(38128),u=a(47313),l=a(44030),c=(a(52500),a(51426)),h=a(96655),p=a(52506),f=a(94611),m=a(86450),S=a(29021),v=a(94395),Z=a(46417),x=function(t){(0,o.Z)(a,t);var e=(0,d.Z)(a);function a(){var t,n;(0,i.Z)(this,a);for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];return(n=e.call.apply(e,[this].concat(d))).state=(t={isLoaded:!1,success:!1,error:null,editorState:null,unauthorizederror:null},(0,s.Z)(t,"unauthorizederror",null),(0,s.Z)(t,"isEdit",!1),(0,s.Z)(t,"internal",!1),t),n.handleClickCancel=function(t){n.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!n.state.isEdit})}))},n.handleClickSave=function(t,e,a,s){t.preventDefault();var i=JSON.stringify(s),o={title:a,category:e,prop:n.props.item,text:i};(0,c.aN)(n.props.match.params.documentation_id,o).then((function(t){var e=t.data,a=e.success,r=e.data;a?n.setState({success:a,document_title:r.title,editorState:s,isEdit:!n.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?n.setState({isLoaded:!0,timeouterror:!0}):403===t.status?n.setState({isLoaded:!0,unauthorizederror:!0}):(t.status,n.setState({isLoaded:!0,pagenotfounderror:!0}))}),(function(t){n.setState({error:t})})),n.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{in_edit_mode:!1})}))},n.handleClick=function(){n.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{isEdit:!n.state.isEdit})}))},n}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var t=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,Z.jsx)(v.Z,{to:"/dashboard/default"});(0,c.S6)(this.props.match.params.documentation_id).then((function(e){var a=e.data,r=a.data,s=a.success;if(r||t.setState({isLoaded:!0,pagenotfounderror:!0}),s){var i=null;i=r.text?JSON.parse(r.text):{},i=JSON.parse(r.text),t.setState({isLoaded:!0,document_title:r.title,category:r.category,internal:r.internal,editorState:i,success:s})}else 401===e.status||500===e.status?t.setState({isLoaded:!0,timeouterror:!0}):403===e.status?t.setState({isLoaded:!0,unauthorizederror:!0}):t.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(e){t.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var t=this.state,e=t.unauthorizederror,a=t.timeouterror,r=t.pagenotfounderror,s=(t.error,t.editorState),i=t.isLoaded;if(a)return(0,Z.jsx)("div",{children:(0,Z.jsx)(f.Z,{})});if(e)return(0,Z.jsx)("div",{children:(0,Z.jsx)(m.Z,{})});if(r)return(0,Z.jsx)("div",{children:(0,Z.jsx)(S.Z,{})});return i||s?this.state.isEdit?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(p.Z,{category:this.state.category,internal:this.state.internal,document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:i,handleClick:this.handleClick,handleClickCancel:this.handleClickCancel,handleClickSave:this.handleClickSave})}):(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(h.Z,{category:this.state.category,internal:this.state.internal,document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:i,role:this.props.user.role,handleClick:this.handleClick})}):(0,Z.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Z.jsx)(l.Z,{animation:"border",role:"status",children:(0,Z.jsx)("span",{className:"visually-hidden"})})})}}]),a}(u.Component);e.default=x}}]);