"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[2019],{52506:function(t,e,r){var n=r(18489),a=r(27853),i=r(84531),s=r(78932),o=r(66621),l=r(47313),d=r(72880),c=r(63849),u=r(31616),h=r(83109),p=r(31974),f=r(51767),m=r(46417),x=function(t){(0,s.Z)(r,t);var e=(0,o.Z)(r);function r(){var t;(0,a.Z)(this,r);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={doc_title:t.props.document_title,category:t.props.category},t.handleChange_category=function(e){e.preventDefault();var r=(0,n.Z)({},t.state.category);r=e.target.value,t.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{category:r})}))},t.handleChange=function(e){e.preventDefault();var r=(0,n.Z)({},t.state.doc_title);r=e.target.value,t.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{doc_title:r})}))},t.handleClickSave=function(e,r){e.preventDefault(),t.props.handleClickSave(e,t.state.category,t.state.doc_title,r)},t}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.setState({doc_title:this.props.document_title})}},{key:"render",value:function(){var t=this;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d.Z,{children:(0,m.jsxs)(d.Z.Body,{children:[" ",(0,m.jsx)(c.Z,{children:(0,m.jsx)(u.Z,{children:this.props.internal?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h4",{children:["Category:",(0,m.jsx)("b",{className:"text-danger",children:"Internal"})]}),(0,m.jsx)(h.Z.Group,{controlId:"category",children:(0,m.jsxs)(h.Z.Control,{as:"select",onChange:function(e){return t.handleChange_category(e)},defaultValue:this.props.category,children:[(0,m.jsx)("option",{value:"",children:"Select Document Category"}),f.pD.map((function(t,e){return(0,m.jsx)("option",{value:t.key,children:t.value})}))]})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h4",{children:["Category:",(0,m.jsx)("b",{className:"text-danger",children:"Public"})]})," ",(0,m.jsx)(h.Z.Group,{controlId:"category",children:(0,m.jsxs)(h.Z.Control,{as:"select",onChange:function(e){return t.handleChange_category(e)},defaultValue:this.props.category,children:[(0,m.jsx)("option",{value:"",children:"Select Document Category"}),f.XA.map((function(t,e){return(0,m.jsx)("option",{value:t.key,children:t.value})}))]})})]})})})," ",(0,m.jsx)(c.Z,{children:(0,m.jsx)(u.Z,{children:(0,m.jsx)("h4",{children:(0,m.jsx)(h.Z.Group,{controlId:"document_title",children:(0,m.jsx)(h.Z.Control,{type:"text",placeholder:"Title",onChange:function(e){return t.handleChange(e)},defaultValue:this.props.document_title})})})})})," ",(0,m.jsx)(p.Z,{doc_title:this.state.doc_title,editorState:this.props.editorState,handleClickSave:this.handleClickSave,handleClickCancel:this.props.handleClickCancel,role:this.props.role})]})})})}}]),r}(l.Component);e.Z=x},96655:function(t,e,r){var n=r(27853),a=r(84531),i=r(78932),s=r(66621),o=r(47313),l=r(72880),d=r(63849),c=r(31616),u=r(93298),h=(r(79489),r(1110)),p=r(51767),f=(r(7077),r(46417)),m=function(t){(0,i.Z)(r,t);var e=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var t=this;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(l.Z,{className:"mb-2 mx-0",children:[(0,f.jsx)(l.Z.Header,{children:(0,f.jsx)(l.Z.Title,{children:this.props.document_title})}),(0,f.jsxs)(l.Z.Body,{children:[(0,f.jsx)(h.Z,{readOnly:!0,handleClickSave:this.props.handleClickSave,handleClickCancel:this.props.handleClickCancel,editorState:this.props.editorState}),("Admin"===this.props.role||"Agent"===this.props.role)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(d.Z,{children:[(0,f.jsx)(c.Z,{md:2,children:(0,f.jsx)("p",{className:"my-0",children:"Updated at"})}),(0,f.jsx)(c.Z,{md:10,children:(0,f.jsx)("p",{className:"my-0",children:(0,p.Ny)(this.props.editorState.time)})})]})}),("Admin"===this.props.role||"Agent"===this.props.role)&&(0,f.jsx)(u.Z,{size:"sm",onClick:function(){return t.props.handleClick()},children:"Edit"})]})]})})}}]),r}(o.Component);e.Z=m},30856:function(t,e,r){r.r(e);var n=r(18489),a=r(36222),i=r(27853),s=r(84531),o=r(78932),l=r(66621),d=r(47313),c=r(44030),u=(r(52500),r(51426)),h=r(96655),p=r(52506),f=r(94611),m=r(86450),x=r(29021),Z=r(94395),v=r(46417),g=function(t){(0,o.Z)(r,t);var e=(0,l.Z)(r);function r(){var t,s;(0,i.Z)(this,r);for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return(s=e.call.apply(e,[this].concat(l))).state=(t={isLoaded:!1,success:!1,error:null,editorState:null,unauthorizederror:null},(0,a.Z)(t,"unauthorizederror",null),(0,a.Z)(t,"isEdit",!1),(0,a.Z)(t,"internal",!1),t),s.handleClickCancel=function(t){s.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{isEdit:!s.state.isEdit})}))},s.handleClickSave=function(t,e,r,a){t.preventDefault();var i=JSON.stringify(a),o={title:r,category:e,prop:s.props.item,text:i};(0,u.aN)(s.props.match.params.documentation_id,o).then((function(t){var e=t.data,r=e.success,n=e.data;r?s.setState({success:r,document_title:n.title,editorState:a,isEdit:!s.state.isEdit,isLoaded:!0}):401===t.status||500===t.status?s.setState({isLoaded:!0,timeouterror:!0}):403===t.status?s.setState({isLoaded:!0,unauthorizederror:!0}):(t.status,s.setState({isLoaded:!0,pagenotfounderror:!0}))}),(function(t){s.setState({error:t})})),s.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{in_edit_mode:!1})}))},s.handleClick=function(){s.setState((function(t){return(0,n.Z)((0,n.Z)({},t),{},{isEdit:!s.state.isEdit})}))},s}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var t=this;if("Admin"!==this.props.user.role&&"Editor"!==this.props.user.role&&"Agent"!==this.props.user.role)return(0,v.jsx)(Z.Z,{to:"/dashboard/default"});(0,u.S6)(this.props.match.params.documentation_id).then((function(e){var r=e.data,n=r.data,a=r.success;if(n||t.setState({isLoaded:!0,pagenotfounderror:!0}),a){var i=null;i=n.text?JSON.parse(n.text):{},i=JSON.parse(n.text),t.setState({isLoaded:!0,document_title:n.title,category:n.category,internal:n.internal,editorState:i,success:a})}else 401===e.status||500===e.status?t.setState({isLoaded:!0,timeouterror:!0}):403===e.status?t.setState({isLoaded:!0,unauthorizederror:!0}):t.setState({isLoaded:!0,pagenotfounderror:!0})}),(function(e){t.setState({isLoaded:!0,error:!0})}))}},{key:"render",value:function(){var t=this.state,e=t.unauthorizederror,r=t.timeouterror,n=t.pagenotfounderror,a=(t.error,t.editorState),i=t.isLoaded;if(r)return(0,v.jsx)("div",{children:(0,v.jsx)(f.Z,{})});if(e)return(0,v.jsx)("div",{children:(0,v.jsx)(m.Z,{})});if(n)return(0,v.jsx)("div",{children:(0,v.jsx)(x.Z,{})});return i||a?this.state.isEdit?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(p.Z,{category:this.state.category,internal:this.state.internal,document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:i,handleClick:this.handleClick,handleClickCancel:this.handleClickCancel,handleClickSave:this.handleClickSave})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(h.Z,{category:this.state.category,internal:this.state.internal,document:document,document_title:this.state.document_title,editorState:this.state.editorState,isLoaded:i,role:this.props.user.role,handleClick:this.handleClick})}):(0,v.jsx)("div",{style:{position:"fixed",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,v.jsx)(c.Z,{animation:"border",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden"})})})}}]),r}(d.Component);e.default=g}}]);