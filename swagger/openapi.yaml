openapi: 3.0.0
info:
  title: TaiGer Portal API
  version: 1.0.0
  description: |
    Comprehensive API documentation for TaiGer Portal Service - A student application management platform.

    ## Authentication
    All protected endpoints require authentication via JWT token stored in HTTP-only cookie (x-auth).

    ## Roles
    - **Admin**: Full system access
    - **Manager**: Management access to student data and operations
    - **Agent**: Student counseling and application management
    - **Editor**: Document editing and review
    - **Student**: Limited access to own data
    - **Guest**: Minimal access for new users
    - **External**: External partners with limited access

  contact:
    name: TaiGer Team

servers:
  - url: /api
    description: API Base Path
  - url: /auth
    description: Authentication Base Path

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: x-auth
      description: JWT token stored in HTTP-only cookie

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
        error:
          type: string

    Success:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string

    User:
      type: object
      properties:
        _id:
          type: string
          description: User ID
        firstname:
          type: string
        lastname:
          type: string
        email:
          type: string
          format: email
        role:
          type: string
          enum: [Admin, Manager, Agent, Editor, Student, Guest, External]
        archiv:
          type: boolean
          description: Whether user is archived
        pictureUrl:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Student:
      allOf:
        - $ref: '#/components/schemas/User'
        - type: object
          properties:
            agents:
              type: array
              items:
                type: string
              description: Array of agent user IDs
            editors:
              type: array
              items:
                type: string
              description: Array of editor user IDs
            applications:
              type: array
              items:
                type: string
              description: Array of application IDs
            generaldocs_threads:
              type: array
              items:
                type: object

    Application:
      type: object
      properties:
        _id:
          type: string
        student_id:
          type: string
          description: Reference to Student
        program_id:
          type: string
          description: Reference to Program
        decided:
          type: string
          enum: ['O', 'X', '-']
        closed:
          type: string
          enum: ['O', 'X', '-']
        admission:
          type: string
          enum: ['O', 'X', '-']
        reject:
          type: string
          enum: ['O', 'X', '-']
        isLocked:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Program:
      type: object
      properties:
        _id:
          type: string
        school:
          type: string
        program_name:
          type: string
        degree:
          type: string
          enum: [Bachelor, Master, PhD]
        semester:
          type: string
        application_deadline:
          type: string
        lang:
          type: string
        uni_assist:
          type: string
          enum: ['O', 'X', '-']
        country:
          type: string
        city:
          type: string
        createdAt:
          type: string
          format: date-time

    Documentation:
      type: object
      properties:
        _id:
          type: string
        category:
          type: string
        title:
          type: string
        text:
          type: string
        isDeleted:
          type: boolean
        createdAt:
          type: string
          format: date-time

    Event:
      type: object
      properties:
        _id:
          type: string
        title:
          type: string
        start:
          type: string
          format: date-time
        end:
          type: string
          format: date-time
        receiver_id:
          type: string
        host_user_id:
          type: string
        confirmed:
          type: boolean
        event_description:
          type: string

    Ticket:
      type: object
      properties:
        _id:
          type: string
        title:
          type: string
        description:
          type: string
        status:
          type: string
          enum: [Open, In Progress, Closed]
        priority:
          type: string
          enum: [Low, Medium, High]
        created_by:
          type: string
        createdAt:
          type: string
          format: date-time

    Interview:
      type: object
      properties:
        _id:
          type: string
        program_id:
          type: string
        student_id:
          type: string
        status:
          type: string
        interview_date:
          type: string
          format: date-time
        questions:
          type: array
          items:
            type: string

    MessageThread:
      type: object
      properties:
        _id:
          type: string
        student_id:
          type: string
        file_type:
          type: string
        messages:
          type: array
          items:
            type: object
        isFinalVersion:
          type: boolean
        updatedAt:
          type: string
          format: date-time

    Communication:
      type: object
      properties:
        _id:
          type: string
        student_id:
          type: string
        user_id:
          type: string
        message:
          type: string
        createdAt:
          type: string
          format: date-time

    Course:
      type: object
      properties:
        _id:
          type: string
        course_name:
          type: string
        credits:
          type: number
        grade:
          type: string

    UsersCountResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            totalUsers:
              type: integer
              example: 120
            adminCount:
              type: integer
              example: 5
            agentCount:
              type: integer
              example: 30
            editorCount:
              type: integer
              example: 25
            studentCount:
              type: integer
              example: 50
            guestCount:
              type: integer
              example: 8
            externalCount:
              type: integer
              example: 2

    UsersOverviewResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            byTargetDegree:
              type: array
              items:
                type: object
                properties:
                  degree:
                    type: string
                  count:
                    type: integer
            byApplicationSemester:
              type: array
              items:
                type: object
                properties:
                  semester:
                    type: string
                  count:
                    type: integer
            byTargetField:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  count:
                    type: integer
            byProgramLanguage:
              type: array
              items:
                type: object
                properties:
                  language:
                    type: string
                  count:
                    type: integer
            byUniversity:
              type: array
              items:
                type: object
                properties:
                  university:
                    type: string
                  count:
                    type: integer
            generatedAt:
              type: string
              format: date-time
              description: Timestamp when overview was generated

security:
  - cookieAuth: []

paths:
  # ==========================================
  # Authentication Routes (Base: /auth)
  # ==========================================
  /auth/login:
    post:
      tags:
        - Authentication
      summary: User login
      description: Authenticate user with email and password. Returns JWT token in HTTP-only cookie.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: securePassword123
      responses:
        '200':
          description: Login successful
          headers:
            Set-Cookie:

                /api/document-threads/{messagesThreadId}/{studentId}/origin-author:
                  put:
                    tags:
                      - Document Threads
                    summary: Confirm origin author
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            properties:
                              checked:
                                type: boolean
                    responses:
                      '200':
                        description: Origin author confirmed
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                      '404':
                        description: Thread Id not found

                /api/document-threads/{messagesThreadId}/{studentId}:
                  put:
                    tags:
                      - Document Threads
                    summary: Set thread status
                    description: Update document thread status (e.g., set as final)
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                    requestBody:
                      required: true
                      content:
                        application/json:
                          schema:
                            type: object
                            properties:
                              application_id:
                                type: string
                    responses:
                      '200':
                        description: Status updated
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                                data:
                                  type: object
                                  properties:
                                    isFinalVersion:
                                      type: boolean
                                    updatedAt:
                                      type: string
                                      format: date-time
                      '404':
                        description: Thread or Student not found
                  post:
                    tags:
                      - Document Threads
                    summary: Post message in thread
                    description: Post a new message in document thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                    requestBody:
                      required: true
                      content:
                        multipart/form-data:
                          schema:
                            type: object
                            properties:
                              message:
                                type: string
                              files:
                                type: array
                                items:
                                  type: string
                                  format: binary
                    responses:
                      '200':
                        description: Message posted
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                                data:
                                  type: object
                      '400':
                        description: message collapse
                      '403':
                        description: Thread closed or unauthorized
                      '404':
                        description: Thread Id not found
                      '423':
                        description: Duplicate file extensions found
                  delete:
                    tags:
                      - Document Threads
                    summary: Delete general thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                    responses:
                      '200':
                        description: Thread deleted
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                      '404':
                        description: Message or student not found

                /api/document-threads/delete/{messagesThreadId}/{messageId}:
                  delete:
                    tags:
                      - Document Threads
                    summary: Delete message in thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: messageId
                        in: path
                        required: true
                        schema:
                          type: string
                    responses:
                      '200':
                        description: Message deleted
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                      '404':
                        description: Thread or Message not found
                      '409':
                        description: You can only delete your own message
                      '423':
                        description: FinalVersion is read only
                      '500':
                        description: Error occurs while deleting thread files

                /api/document-threads/image/{messagesThreadId}/{studentId}/{file_name}:
                  get:
                    tags:
                      - Document Threads
                    summary: Download image from thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: file_name
                        in: path
                        required: true
                        schema:
                          type: string
                    responses:
                      '200':
                        description: Image file
                        content:
                          application/octet-stream:
                            schema:
                              type: string
                              format: binary

                /api/document-threads/image/{messagesThreadId}/{studentId}:
                  post:
                    tags:
                      - Document Threads
                    summary: Post image in thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                      - name: studentId
                        in: path
                        required: true
                        schema:
                          type: string
                    requestBody:
                      required: true
                      content:
                        multipart/form-data:
                          schema:
                            type: object
                            properties:
                              image:
                                type: string
                                format: binary
                    responses:
                      '200':
                        description: Image posted
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                                data:
                                  type: string
                                  description: URL of uploaded image

                /api/document-threads/{messagesThreadId}/survey-inputs:
                  get:
                    tags:
                      - Document Threads
                    summary: Get survey inputs for thread
                    parameters:
                      - name: messagesThreadId
                        in: path
                        required: true
                        schema:
                          type: string
                    responses:
                      '200':
                        description: Survey inputs
                        content:
                          application/json:
                            schema:
                              type: object
                              properties:
                                success:
                                  type: boolean
                                data:
                                  type: object
                      '404':
                        description: Message thread not found

                /api/document-threads/{messagesThreadId}:
                  get:
                    tags:
                      - Document Threads
                    summary: Get thread messages
                    description: Get all messages in a document thread
                    parameters:
                    /api/document-threads/pattern/check/{messagesThreadId}/{file_type}:
                      get:
                        tags:
                          - Document Threads
                        summary: Check document pattern
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: file_type
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Pattern check result
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    isPassed:
                                      type: boolean
                                    reason:
                                      type: string
                          '404':
                            description: Thread Id not found

                    /api/document-threads/overview/my-student-metrics:
                      get:
                        tags:
                          - Document Threads
                        summary: Get my student metrics
                        description: Get metrics for my students
                        responses:
                          '200':
                            description: Student metrics
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                                      properties:
                                        students:
                                          type: array
                                          items:
                                            type: object

                    /api/document-threads/overview/taiger-user/{userId}:
                      get:
                        tags:
                          - Document Threads
                        summary: Get user threads
                        parameters:
                          - name: userId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: isFinalVersion
                            in: query
                            schema:
                              type: boolean
                          - name: fileType
                            in: query
                            schema:
                              type: string
                        responses:
                          '200':
                            description: User threads
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                                      properties:
                                        threads:
                                          type: array
                                          items:
                                            type: object
                                        user:
                                          type: object

                    /api/document-threads/overview/all:
                      get:
                        tags:
                          - Document Threads
                        summary: Get active threads overview
                        description: Get overview of all active document threads
                        parameters:
                          - name: file_type
                            in: query
                            schema:
                              type: string
                          - name: isFinalVersion
                            in: query
                            schema:
                              type: boolean
                          - name: hasOutsourcedUserId
                            in: query
                            schema:
                              type: boolean
                          - name: hasMessages
                            in: query
                            schema:
                              type: boolean
                          - name: outsourcedUserId
                            in: query
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Active threads overview
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: array
                                      items:
                                        type: object

                    /api/document-threads/survey-input/{surveyInputId}:
                      put:
                        tags:
                          - Document Threads
                        summary: Update survey input
                        parameters:
                          - name: surveyInputId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  input:
                                    type: object
                                  informEditor:
                                    type: boolean
                        responses:
                          '200':
                            description: Survey input updated
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                      delete:
                        tags:
                          - Document Threads
                        summary: Reset survey input
                        parameters:
                          - name: surveyInputId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: false
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  informEditor:
                                    type: boolean
                        responses:
                          '200':
                            description: Survey input reset
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object

                    /api/document-threads/survey-input:
                      post:
                        tags:
                          - Document Threads
                        summary: Create survey input
                        requestBody:
                          required: true
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  input:
                                    type: object
                                  informEditor:
                                    type: boolean
                        responses:
                          '200':
                            description: Survey input created
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object

                    /api/document-threads/student-threads/{studentId}:
                      get:
                        tags:
                          - Document Threads
                        summary: Get threads by student
                        parameters:
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: List of student threads
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                                      properties:
                                        threads:
                                          type: array
                                          items:
                                            type: object

                    /api/document-threads/init/general/{studentId}/{document_category}:
                      post:
                        tags:
                          - Document Threads
                        summary: Initialize general thread
                        description: Initialize a general document thread for student
                        parameters:
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: document_category
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Thread initialized
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                          '404':
                            description: Student Id not found
                          '409':
                            description: Document Thread already existed

                    /api/document-threads/init/application/{studentId}/{application_id}/{document_category}:
                      post:
                        tags:
                          - Document Threads
                        summary: Initialize application thread
                        description: Initialize an application-specific document thread
                        parameters:
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: application_id
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: document_category
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Application thread initialized
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object

                    /api/document-threads/{messagesThreadId}/essay:
                      post:
                        tags:
                          - Document Threads
                        summary: Assign essay writers
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  editorsId:
                                    type: array
                                    items:
                                      type: string
                        responses:
                          '200':
                            description: Essay writers assigned
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                          '400':
                            description: Invalid input data
                          '404':
                            description: Essay thread not found

                    /api/document-threads/{messagesThreadId}/{messageId}/{ignoreMessageState}/ignored:
                      put:
                        tags:
                          - Document Threads
                        summary: Ignore message in thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: messageId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: ignoreMessageState
                            in: path
                            required: true
                            schema:
                              type: boolean
                        responses:
                          '200':
                            description: Message ignore state updated
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object

                    /api/document-threads/{messagesThreadId}/favorite:
                      put:
                        tags:
                          - Document Threads
                        summary: Toggle thread favorite
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Favorite state toggled
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                                      properties:
                                        isFlagged:
                                          type: boolean
                          '500':
                            description: Failed to update favorite status

                    /api/document-threads/{messagesThreadId}/{studentId}/origin-author:
                      put:
                        tags:
                          - Document Threads
                        summary: Confirm origin author
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  checked:
                                    type: boolean
                        responses:
                          '200':
                            description: Origin author confirmed
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                          '404':
                            description: Thread or student not found
                          '500':
                            description: Error occurs while saving origin author

                    /api/document-threads/{messagesThreadId}/{studentId}:
                      get:
                        tags:
                          - Document Threads
                        summary: Get thread messages
                        description: Get all messages in a document thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Thread messages
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: array
                                      items:
                                        type: object
                      put:
                        tags:
                          - Document Threads
                        summary: Set thread status
                        description: Update document thread status (e.g., set as final)
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            application/json:
                              schema:
                                type: object
                                properties:
                                  application_id:
                                    type: string
                        responses:
                          '200':
                            description: Status updated
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                                      properties:
                                        isFinalVersion:
                                          type: boolean
                                        updatedAt:
                                          type: string
                                          format: date-time
                          '404':
                            description: Thread or Student not found
                      post:
                        tags:
                          - Document Threads
                        summary: Post message in thread
                        description: Post a new message in document thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            multipart/form-data:
                              schema:
                                type: object
                                properties:
                                  message:
                                    type: string
                                  files:
                                    type: array
                                    items:
                                      type: string
                                      format: binary
                        responses:
                          '200':
                            description: Message posted
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: object
                          '400':
                            description: message collapse
                          '403':
                            description: Thread closed or unauthorized
                          '404':
                            description: Thread Id not found
                          '423':
                            description: Duplicate file extensions found
                      delete:
                        tags:
                          - Document Threads
                        summary: Delete general thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Thread deleted
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                          '404':
                            description: Message or student not found

                    /api/document-threads/delete/{messagesThreadId}/{messageId}:
                      delete:
                        tags:
                          - Document Threads
                        summary: Delete message in thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: messageId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Message deleted
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                          '404':
                            description: Thread or Message not found
                          '409':
                            description: You can only delete your own message
                          '423':
                            description: FinalVersion is read only
                          '500':
                            description: Error occurs while deleting thread files

                    /api/document-threads/image/{messagesThreadId}/{studentId}/{file_name}:
                      get:
                        tags:
                          - Document Threads
                        summary: Download image from thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: file_name
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Image file
                            content:
                              application/octet-stream:
                                schema:
                                  type: string
                                  format: binary

                    /api/document-threads/image/{messagesThreadId}/{studentId}:
                      post:
                        tags:
                          - Document Threads
                        summary: Post image in thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        requestBody:
                          required: true
                          content:
                            multipart/form-data:
                              schema:
                                type: object
                                properties:
                                  image:
                                    type: string
                                    format: binary
                        responses:
                          '200':
                            description: Image posted
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: string
                                      description: URL of uploaded image

                    /api/document-threads/{messagesThreadId}/survey-inputs:
                      get:
                        tags:
                          - Document Threads
                        summary: Get survey inputs for thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Survey inputs
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: array
                                      items:
                                        type: object

                    /api/document-threads/{messagesThreadId}:
                      get:
                        tags:
                          - Document Threads
                        summary: Get thread messages
                        description: Get all messages in a document thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Thread messages
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
                                    data:
                                      type: array
                                      items:
                                        type: object

                    /api/document-threads/{studentId}/{messagesThreadId}/{file_key}:
                      get:
                        tags:
                          - Document Threads
                        summary: Download file from thread
                        parameters:
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: file_key
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Document file
                            content:
                              application/octet-stream:
                                schema:
                                  type: string
                                  format: binary

                    /api/document-threads/{messagesThreadId}/{application_id}/{studentId}:
                      delete:
                        tags:
                          - Document Threads
                        summary: Delete application thread
                        parameters:
                          - name: messagesThreadId
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: application_id
                            in: path
                            required: true
                            schema:
                              type: string
                          - name: studentId
                            in: path
                            required: true
                            schema:
                              type: string
                        responses:
                          '200':
                            description: Application thread deleted
                            content:
                              application/json:
                                schema:
                                  type: object
                                  properties:
                                    success:
                                      type: boolean
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isPaid:
                  type: boolean
      responses:
        '201':
          description: VPD payment updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Application'

  /api/students/{studentId}/vpd/{applicationId}/{fileType}:
    get:
      tags:
        - Students
      summary: Download VPD file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
        - name: fileType
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: VPD file content
    put:
      tags:
        - Students
      summary: Update VPD file necessity
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
        - name: fileType
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: VPD necessity updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Application'
    post:
      tags:
        - Students
      summary: Upload VPD file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
        - name: fileType
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: VPD file uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Application'
    delete:
      tags:
        - Students
      summary: Delete VPD file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
        - name: fileType
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: VPD file deleted

  /api/students/{studentId}/files/{file_key}:
    get:
      tags:
        - Students
      summary: Download profile file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: file_key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File content

  /api/students/{studentId}/files/{category}:
    post:
      tags:
        - Students
      summary: Upload profile file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: category
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: File uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    description: Updated document record
    delete:
      tags:
        - Students
      summary: Delete profile file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: category
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File deleted

  /api/students/{studentId}/{category}/status:
    post:
      tags:
        - Students
      summary: Update profile document status
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: category
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Document status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    description: Updated document entry

  # ==========================================
  # Applications Routes (Base: /api/applications)
  # ==========================================
  /api/applications:
    get:
      tags:
        - Applications
      summary: Get all applications
      description: Get list of all student applications with filters
      parameters:
        - name: decided
          in: query
          schema:
            type: string
            description: Decision status filter (O/X/-)
        - name: closed
          in: query
          schema:
            type: string
            description: Closed status filter (O/X/-)
        - name: admission
          in: query
          schema:
            type: string
            description: Admission status filter (O/X/-)
        - name: finalEnrolment
          in: query
          schema:
            type: string
            description: Final enrolment status filter (O/X/-)
        - name: year
          in: query
          schema:
            type: string
          description: Application year filter
        - name: populate
          in: query
          schema:
            type: boolean
          description: Populate referenced fields
      responses:
        '200':
          description: List of applications
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Application'

  /api/applications/student/{studentId}:
    get:
      tags:
        - Applications
      summary: Get student applications
      description: Get all applications for a specific student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student applications
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Student'
    post:
      tags:
        - Applications
      summary: Create application
      description: Create new application for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                program_id_set:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: Application created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Application'
    put:
      tags:
        - Applications
      summary: Update student applications
      description: Batch update applications for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                applications:
                  type: array
                  items:
                    $ref: '#/components/schemas/Application'
                applying_program_count:
                  type: integer
      responses:
        '201':
          description: Applications updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Student'

  /api/applications/application/{application_id}:
    delete:
      tags:
        - Applications
      summary: Delete application
      parameters:
        - name: application_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Application deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      message:
                        type: string

  /api/applications/{applicationId}/refresh:
    post:
      tags:
        - Applications
      summary: Refresh application
      description: Refresh application data from external sources
      parameters:
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Application refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Application'
        '404':
          description: Application not found

  /api/applications/all/active/applications:
    get:
      tags:
        - Applications
      summary: Get active applications
      description: Get all active student applications
      responses:
        '200':
          description: Active applications list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Application'

  /api/applications/student/{studentId}/{application_id}:
    put:
      tags:
        - Applications
      summary: Update application
      description: Update specific application for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: application_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Application'
      responses:
        '200':
          description: Application updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Application'

  /api/applications/taiger-user/{userId}:
    get:
      tags:
        - Applications
      summary: Get applications by user
      description: Get applications for a specific TaiGer user (agent/editor)
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User's student applications
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      applications:
                        type: array
                        items:
                          $ref: '#/components/schemas/Application'
                      user:
                        $ref: '#/components/schemas/User'

# ==========================================
# Student Applications Routes (Base: /api/student-applications)
# ==========================================
  /api/student-applications/conflicts:
    get:
      tags:
        - Applications
      summary: Get application conflicts
      description: Retrieve conflicts across applications
      responses:
        '200':
          description: Application conflicts
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object

  /api/student-applications/deltas:
    get:
      tags:
        - Applications
      summary: Get application deltas
      description: Retrieve program change deltas for active applications
      responses:
        '200':
          description: Application deltas
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object

  # ==========================================
  # Programs Routes (Base: /api/programs)
  # ==========================================
  /api/programs/overview:
    get:
      tags:
        - Programs
      summary: Get programs overview
      description: Get aggregated program metrics
      responses:
        '200':
          description: Programs overview
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalPrograms:
                        type: integer
                      totalSchools:
                        type: integer
                      byCountry:
                        type: array
                        items:
                          type: object
                          properties:
                            country:
                              type: string
                            count:
                              type: integer
                      byDegree:
                        type: array
                        items:
                          type: object
                          properties:
                            degree:
                              type: string
                            count:
                              type: integer
                      byLanguage:
                        type: array
                        items:
                          type: object
                          properties:
                            language:
                              type: string
                            count:
                              type: integer
                      bySubject:
                        type: array
                        items:
                          type: object
                          properties:
                            subject:
                              type: string
                            count:
                              type: integer
                      bySchoolType:
                        type: array
                        items:
                          type: object
                      topSchools:
                        type: array
                        items:
                          type: object
                          properties:
                            school:
                              type: string
                            country:
                              type: string
                            city:
                              type: string
                            programCount:
                              type: integer
                      topContributors:
                        type: array
                        items:
                          type: object
                      recentlyUpdated:
                        type: array
                        items:
                          type: object
                      topApplicationPrograms:
                        type: array
                        items:
                          type: object
                      generatedAt:
                        type: string
                        format: date-time

  /api/programs/schools-distribution:
    get:
      tags:
        - Programs
      summary: Get schools distribution
      description: Get distribution of students across schools
      responses:
        '200':
          description: Schools distribution data
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        school:
                          type: string
                        country:
                          type: string
                        city:
                          type: string
                        programCount:
                          type: integer

  /api/programs/same-program-students/{programId}:
    get:
      tags:
        - Programs
      summary: Get students in same program
      description: Get list of students applying to the same program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Students in same program
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Student'

  /api/programs:
    get:
      tags:
        - Programs
      summary: Get all programs
      description: Get list of university programs
      responses:
        '200':
          description: List of programs
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Program'
    post:
      tags:
        - Programs
      summary: Create program
      description: Create new university program
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                school:
                  type: string
                program_name:
                  type: string
                degree:
                  type: string
                semester:
                  type: string
                country:
                  type: string
                lang:
                  type: string
      responses:
        '201':
          description: Program created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Program'

  /api/programs/schools:
    get:
      tags:
        - Programs
      summary: Get distinct schools
      description: Get list of distinct school attributes
      responses:
        '200':
          description: Distinct schools list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        school:
                          type: string
                        isPrivateSchool:
                          type: boolean
                        isPartnerSchool:
                          type: boolean
                        schoolType:
                          type: string
                        country:
                          type: string
                        tags:
                          type: array
                          items:
                            type: string
                        count:
                          type: integer
    put:
      tags:
        - Programs
      summary: Update batch school attributes
      description: Update attributes for multiple schools
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                school:
                  type: string
                isPrivateSchool:
                  type: boolean
                isPartnerSchool:
                  type: boolean
                schoolType:
                  type: string
                country:
                  type: string
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Schools updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /api/programs/{programId}:
    get:
      tags:
        - Programs
      summary: Get program by ID
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Program details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Program'
                  vc:
                    type: object
                    nullable: true
        '404':
          description: Program not found
    put:
      tags:
        - Programs
      summary: Update program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Program'
      responses:
        '200':
          description: Program updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Program'
                  vc:
                    type: object
    delete:
      tags:
        - Programs
      summary: Delete program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Program deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /api/programs/{programId}/refresh:
    post:
      tags:
        - Programs
      summary: Refresh program
      description: Refresh program metadata (marks verified)
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Program refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Program'
                  vc:
                    type: object
        '404':
          description: Program not found

  /api/programs/{programId}/change-requests:
    get:
      tags:
        - Programs
      summary: Get program change requests
      description: Get pending change requests for program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Change requests list
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
        '404':
          description: Change requests not found
    post:
      tags:
        - Programs
      summary: Submit program change request
      description: Submit a change request for program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Change request submitted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /api/programs/review-changes/{requestId}:
    post:
      tags:
        - Programs
      summary: Review program change request
      description: Approve or reject program change request
      parameters:
        - name: requestId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Change request reviewed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '400':
          description: Request already reviewed
        '404':
          description: Change request not found

  # ==========================================
  # Communications Routes (Base: /api/communications)
  # ==========================================
  /api/communications:
    get:
      tags:
        - Communications
      summary: Search user messages
      description: Search messages by user or keyword (Admin, Manager, Agent, Editor only)
      parameters:
        - name: q
          in: query
          schema:
            type: string
          description: Search query
      responses:
        '200':
          description: Search results with latest communication per matching student
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      students:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            firstname:
                              type: string
                            lastname:
                              type: string
                            firstname_chinese:
                              type: string
                            lastname_chinese:
                              type: string
                            role:
                              type: string
                            pictureUrl:
                              type: string
                            latestCommunication:
                              type: object
                              description: Most recent communication document for the student
                      user:
                        type: object

  /api/communications/ping/all:
    get:
      tags:
        - Communications
      summary: Get unread messages count
      description: Get number of unread messages for current user
      responses:
        '200':
          description: Unread messages count for current user
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: integer

  /api/communications/all:
    get:
      tags:
        - Communications
      summary: Get all my messages
      description: Get all messages for current user
      responses:
        '200':
          description: Latest communication per student for current user
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      students:
                        type: array
                        items:
                          type: object
                          description: Student with latest communication
                      user:
                        type: object

  /api/communications/{studentId}/{communication_messageId}/{ignoreMessageState}/ignore:
    put:
      tags:
        - Communications
      summary: Ignore/unignore message
      description: Toggle ignore status of a message
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: communication_messageId
          in: path
          required: true
          schema:
            type: string
        - name: ignoreMessageState
          in: path
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: Message ignore status updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '400':
          description: message collapse

  /api/communications/{studentId}/{messageId}:
    put:
      tags:
        - Communications
      summary: Update message in thread
      description: Update a specific message in communication thread
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
      responses:
        '200':
          description: Message updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '400':
          description: message collapse
        '404':
          description: Thread not found
    delete:
      tags:
        - Communications
      summary: Delete message in thread
      description: Delete a specific message in communication thread
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Message deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '400':
          description: message collapse
        '500':
          description: Error occurs while deleting

  /api/communications/{studentId}:
    get:
      tags:
        - Communications
      summary: Get student messages
      description: Get all messages for a student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student messages
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      description: Communication entry
                   student:
                     type: object
        '404':
          description: Student not found
    post:
      tags:
        - Communications
      summary: Post message
      description: Send a new message to student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                message:
                  type: string
                files:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Message sent and latest message returned
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      description: Latest communication document
        '400':
          description: message collapse
        '404':
          description: Student not found
        '423':
          description: Duplicate file extensions in upload
        '429':
          description: Too many consecutive messages by student

  /api/communications/{studentId}/chat/{fileName}:
    get:
      tags:
        - Communications
      summary: Get chat file
      description: Download file from chat messages
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: fileName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File content
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  /api/communications/{studentId}/pages/{pageNumber}:
    get:
      tags:
        - Communications
      summary: Load messages by page
      description: Get paginated messages for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: pageNumber
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Paginated messages
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      description: Communication entry
                  student:
                    type: object
        '404':
          description: Student not found

  # ==========================================
  # Events Routes (Base: /api/events)
  # ==========================================
  /api/events/ping:
    get:
      tags:
        - Events
      summary: Get active events count
      description: Get number of upcoming confirmed events for current user
      responses:
        '200':
          description: Active events count
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: integer

  /api/events/booked:
    get:
      tags:
        - Events
      summary: Get booked events
      description: Get booked events for student's agents within optional time window (students only)
      parameters:
        - name: startTime
          in: query
          schema:
            type: string
            format: date-time
          description: ISO start time filter
        - name: endTime
          in: query
          schema:
            type: string
            format: date-time
          description: ISO end time filter
      responses:
        '200':
          description: List of booked events
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        start:
                          type: string
                          format: date-time
                        receiver_id:
                          type: array
                          items:
                            type: object
                            properties:
                              firstname:
                                type: string
                              lastname:
                                type: string
                              email:
                                type: string
        '403':
          description: Booked events only available for students

  /api/events:
    get:
      tags:
        - Events
      summary: Get all events
      description: Get calendar events with optional filters
      parameters:
        - name: startTime
          in: query
          schema:
            type: string
            format: date-time
        - name: endTime
          in: query
          schema:
            type: string
            format: date-time
        - name: requester_id
          in: query
          schema:
            type: string
        - name: receiver_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of events
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  agents:
                    type: array
                    items:
                      type: object
                  editors:
                    type: array
                    items:
                      type: object
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  hasEvents:
                    type: boolean
    post:
      tags:
        - Events
      summary: Create event
      description: Create new calendar event
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                requester_id:
                  type: string
                receiver_id:
                  type: string
                start:
                  type: string
                  format: date-time
                end:
                  type: string
                  format: date-time
                meetingLink:
                  type: string
                meetingType:
                  type: string
                isConfirmedRequester:
                  type: boolean
                isConfirmedReceiver:
                  type: boolean
      responses:
        '201':
          description: Event created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  agents:
                    type: array
                    items:
                      type: object
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  hasEvents:
                    type: boolean
        '403':
          description: Conflicting timeslot exists
        '500':
          description: Failed to create event

  /api/events/{studentId}/show:
    get:
      tags:
        - Events
      summary: Show event by id (parameter named studentId in route)
      description: Get single event by id
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'

  /api/events/{event_id}:
    put:
      tags:
        - Events
      summary: Update event
      parameters:
        - name: event_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
      responses:
        '200':
          description: Event updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '400':
          description: Invalid event payload
        '404':
          description: Event not found
    delete:
      tags:
        - Events
      summary: Delete event
      parameters:
        - name: event_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Event deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  agents:
                    type: array
                    items:
                      type: object
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  hasEvents:
                    type: boolean
        '400':
          description: Failed to delete event

  /api/events/{event_id}/confirm:
    put:
      tags:
        - Events
      summary: Confirm event
      parameters:
        - name: event_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                start:
                  type: string
                  format: date-time
                end:
                  type: string
                  format: date-time
                meetingLink:
                  type: string
                isConfirmedRequester:
                  type: boolean
                isConfirmedReceiver:
                  type: boolean
                addMeetingAssistant:
                  type: boolean
      responses:
        '200':
          description: Event confirmed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '400':
          description: Invalid confirmation payload
        '404':
          description: Event not found

  # ==========================================
  # Documentations Routes (Base: /api/docs)
  # ==========================================
  /api/docs:
    post:
      tags:
        - Documentations
      summary: Create documentation
      description: Create new documentation article
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Documentation'
      responses:
        '200':
          description: Documentation created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'

  /api/docs/internal:
    post:
      tags:
        - Documentations
      summary: Create internal documentation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Documentation'
      responses:
        '200':
          description: Internal documentation created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'

  /api/docs/internal/all:
    get:
      tags:
        - Documentations
      summary: Get all internal documentations
      responses:
        '200':
          description: List of internal documentations
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Documentation'

  /api/docs/internal/search/{doc_id}:
    get:
      tags:
        - Documentations
      summary: Get internal documentation by ID
      parameters:
        - name: doc_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Internal documentation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'

  /api/docs/internal/{id}:
    put:
      tags:
        - Documentations
      summary: Update internal documentation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Documentation'
      responses:
        '201':
          description: Internal documentation updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'
    delete:
      tags:
        - Documentations
      summary: Delete internal documentation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Internal documentation deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /api/docs/taiger/internal/confidential:
    get:
      tags:
        - Documentations
      summary: Get confidential documentation page
      responses:
        '200':
          description: Confidential documentation page
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
    put:
      tags:
        - Documentations
      summary: Update confidential documentation page
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Confidential documentation page updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object

  /api/docs/upload/image:
    post:
      tags:
        - Documentations
      summary: Upload documentation image
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
      responses:
        '200':
          description: Image uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: string
                    description: URL of uploaded image

  /api/docs/file/{object_key}:
    get:
      tags:
        - Documentations
      summary: Get documentation file
      parameters:
        - name: object_key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File content
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  /api/docs/upload/docs:
    post:
      tags:
        - Documentations
      summary: Upload documentation file
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: File uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  url:
                    type: string
                  title:
                    type: string
                  extension:
                    type: string

  /api/docs/all:
    get:
      tags:
        - Documentations
      summary: Get all documentations
      description: Get all documentation articles
      responses:
        '200':
          description: List of documentations
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Documentation'

  /api/docs/pages/{category}:
    get:
      tags:
        - Documentations
      summary: Get category documentation page
      description: Get documentation page for a specific category
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Category documentation page
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '400':
          description: invalid category
        '403':
          description: Not authorized for internal category
    put:
      tags:
        - Documentations
      summary: Update documentation page
      description: Update documentation page content
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Documentation page updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object

  /api/docs/search/{doc_id}:
    get:
      tags:
        - Documentations
      summary: Get documentation by ID
      description: Search and get specific documentation article
      parameters:
        - name: doc_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Documentation article
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'

  /api/docs/{category}:
    get:
      tags:
        - Documentations
      summary: Get category documentations
      description: Get all documentations in a category
      parameters:
        - name: category
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Category documentations
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Documentation'
        '400':
          description: invalid category

  /api/docs/{id}:
    put:
      tags:
        - Documentations
      summary: Update documentation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Documentation'
      responses:
        '201':
          description: Documentation updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Documentation'
    delete:
      tags:
        - Documentations
      summary: Delete documentation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Documentation deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  # ==========================================
  # Document Threads Routes (Base: /api/document-threads)
  # ==========================================
  /api/document-threads/pattern/check/{messagesThreadId}/{file_type}:
    get:
      tags:
        - Document Threads
      summary: Check document pattern
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: file_type
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Pattern check result

  /api/document-threads/overview/my-student-metrics:
    get:
      tags:
        - Document Threads
      summary: Get my student metrics
      description: Get metrics for my students
      responses:
        '200':
          description: Student metrics

  /api/document-threads/overview/taiger-user/{userId}:
    get:
      tags:
        - Document Threads
      summary: Get user threads
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User threads

  /api/document-threads/overview/all:
    get:
      tags:
        - Document Threads
      summary: Get active threads overview
      description: Get overview of all active document threads
      responses:
        '200':
          description: Active threads overview

  /api/document-threads/survey-input/{surveyInputId}:
    put:
      tags:
        - Document Threads
      summary: Update survey input
      parameters:
        - name: surveyInputId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Survey input updated
    delete:
      tags:
        - Document Threads
      summary: Reset survey input
      parameters:
        - name: surveyInputId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Survey input reset

  /api/document-threads/survey-input:
    post:
      tags:
        - Document Threads
      summary: Create survey input
      responses:
        '201':
          description: Survey input created

  /api/document-threads/student-threads/{studentId}:
    get:
      tags:
        - Document Threads
      summary: Get threads by student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: List of student threads

  /api/document-threads/init/general/{studentId}/{document_category}:
    post:
      tags:
        - Document Threads
      summary: Initialize general thread
      description: Initialize a general document thread for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: document_category
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Thread initialized

  /api/document-threads/init/application/{studentId}/{application_id}/{document_category}:
    post:
      tags:
        - Document Threads
      summary: Initialize application thread
      description: Initialize an application-specific document thread
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: application_id
          in: path
          required: true
          schema:
            type: string
        - name: document_category
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Application thread initialized

  /api/document-threads/{messagesThreadId}/essay:
    post:
      tags:
        - Document Threads
      summary: Assign essay writers
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                editorsId:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Essay writers assigned

  /api/document-threads/{messagesThreadId}/{messageId}/{ignoreMessageState}/ignored:
    put:
      tags:
        - Document Threads
      summary: Ignore message in thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
        - name: ignoreMessageState
          in: path
          required: true
          schema:
            type: boolean
      responses:
        '200':
          description: Message ignore state updated

  /api/document-threads/{messagesThreadId}/favorite:
    put:
      tags:
        - Document Threads
      summary: Toggle thread favorite
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Favorite state toggled

  /api/document-threads/{messagesThreadId}/{studentId}/origin-author:
    put:
      tags:
        - Document Threads
      summary: Confirm origin author
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                checked:
                  type: boolean
      responses:
        '200':
          description: Origin author confirmed

  /api/document-threads/{messagesThreadId}/{studentId}:
    put:
      tags:
        - Document Threads
      summary: Set thread status
      description: Update document thread status (e.g., set as final)
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                application_id:
                  type: string
      responses:
        '200':
          description: Status updated
    post:
      tags:
        - Document Threads
      summary: Post message in thread
      description: Post a new message in document thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                message:
                  type: string
                files:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '201':
          description: Message posted
    delete:
      tags:
        - Document Threads
      summary: Delete general thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Thread deleted

  /api/document-threads/delete/{messagesThreadId}/{messageId}:
    delete:
      tags:
        - Document Threads
      summary: Delete message in thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Message deleted

  /api/document-threads/image/{messagesThreadId}/{studentId}/{file_name}:
    get:
      tags:
        - Document Threads
      summary: Download image from thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: file_name
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Image file

  /api/document-threads/image/{messagesThreadId}/{studentId}:
    post:
      tags:
        - Document Threads
      summary: Post image in thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
      responses:
        '201':
          description: Image posted

  /api/document-threads/{messagesThreadId}/survey-inputs:
    get:
      tags:
        - Document Threads
      summary: Get survey inputs for thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Survey inputs

  /api/document-threads/{messagesThreadId}:
    get:
      tags:
        - Document Threads
      summary: Get thread messages
      description: Get all messages in a document thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Thread messages

  /api/document-threads/{studentId}/{messagesThreadId}/{file_key}:
    get:
      tags:
        - Document Threads
      summary: Download file from thread
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: file_key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Document file

  /api/document-threads/{messagesThreadId}/{application_id}/{studentId}:
    delete:
      tags:
        - Document Threads
      summary: Delete application thread
      parameters:
        - name: messagesThreadId
          in: path
          required: true
          schema:
            type: string
        - name: application_id
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Application thread deleted

  # ==========================================
  # Tickets Routes (Base: /api/tickets)
  # ==========================================
  /api/tickets:
    get:
      tags:
        - Tickets
      summary: Get all tickets
      description: Get list of support tickets with optional filters
      parameters:
        - name: type
          in: query
          schema:
            type: string
        - name: program_id
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of tickets
    post:
      tags:
        - Tickets
      summary: Create ticket
      description: Create new support ticket
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                program_id:
                  type: string
                status:
                  type: string
                description:
                  type: string
      responses:
        '201':
          description: Ticket created

  /api/tickets/{ticket_id}:
    put:
      tags:
        - Tickets
      summary: Update ticket
      parameters:
        - name: ticket_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: Ticket updated
    delete:
      tags:
        - Tickets
      summary: Delete ticket
      parameters:
        - name: ticket_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Ticket deleted

  # ==========================================
  # Interviews Routes (Base: /api/interviews)
  # ==========================================
  /api/interviews:
    get:
      tags:
        - Interviews
      summary: Get all interviews
      description: Get list of all interviews with optional filters
      parameters:
        - name: isClosed
          in: query
          schema:
            type: string
        - name: trainer_id
          in: query
          schema:
            type: string
        - name: no_trainer
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of interviews

  /api/interviews/open:
    get:
      tags:
        - Interviews
      summary: Get open interviews
      description: Get all open/available interview slots
      responses:
        '200':
          description: List of open interviews

  /api/interviews/interview/{programId}:
    get:
      tags:
        - Interviews
      summary: Get interviews by program
      description: Get interviews for specific program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Program interviews

  /api/interviews/interviews/{studentId}:
    get:
      tags:
        - Interviews
      summary: Get interviews by student
      description: Get interviews for specific student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student interviews

  /api/interviews/questions/{programId}:
    get:
      tags:
        - Interviews
      summary: Get interview questions
      description: Get interview questions for specific program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview questions

  /api/interviews/my-interviews:
    get:
      tags:
        - Interviews
      summary: Get my interviews
      description: Get interviews for current user (including students)
      responses:
        '200':
          description: My interviews

  /api/interviews/{interview_id}:
    get:
      tags:
        - Interviews
      summary: Get interview by ID
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview details
    put:
      tags:
        - Interviews
      summary: Update interview
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isClosed:
                  type: boolean
                trainer_id:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Interview updated
    delete:
      tags:
        - Interviews
      summary: Delete interview
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview deleted

  /api/interviews/{interview_id}/survey:
    get:
      tags:
        - Interviews
      summary: Get interview survey
      description: Get interview feedback/survey data
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview survey data
    put:
      tags:
        - Interviews
      summary: Update interview survey
      description: Submit interview feedback/survey
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isFinal:
                  type: boolean
      responses:
        '200':
          description: Survey updated

  /api/interviews/time/{interview_id}:
    post:
      tags:
        - Interviews
      summary: Add interview training time
      description: Add training date/time for interview
      parameters:
        - name: interview_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                start:
                  type: string
                  format: date-time
                requester_id:
                  type: array
                  items:
                    type: string
                receiver_id:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Training time added

  /api/interviews/create/{program_id}/{studentId}:
    post:
      tags:
        - Interviews
      summary: Create interview
      description: Create new interview for student and program
      parameters:
        - name: program_id
          in: path
          required: true
          schema:
            type: string
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Interview created

  # ==========================================
  # Teams Routes (Base: /api/teams)
  # ==========================================
  /api/teams:
    get:
      tags:
        - Teams
      summary: Get team members
      description: Get list of team members
      responses:
        '200':
          description: Team members

  /api/teams/statistics/overview:
    get:
      tags:
        - Teams
      summary: Get statistics overview
      responses:
        '200':
          description: Statistics overview

  /api/teams/statistics/agents:
    get:
      tags:
        - Teams
      summary: Get agents statistics
      responses:
        '200':
          description: Agents statistics

          - name: archiv
            in: query
            schema:
              type: boolean
            description: Filter by archive status (true/false)
  /api/teams/statistics/kpi:
    get:
      tags:
        - Teams
      summary: Get KPI statistics
      responses:
        '200':
          description: KPI statistics

  /api/teams/statistics/response-time:
    get:
      tags:
        - Teams
      summary: Get response time statistics
      responses:
        '200':
          description: Response time statistics

  /api/teams/is-manager:
    get:
      tags:
        - Teams
      summary: Check if user is manager
      responses:
        '200':
          description: Manager status

  /api/teams/tasks-overview:
    get:
      tags:
        - Teams
      summary: Get tasks overview
      responses:
        '200':
          description: Tasks overview

  /api/teams/response-interval/{studentId}:
    get:
      tags:
        - Teams
      summary: Get response interval by student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Response interval data

  /api/teams/response-time/{studentId}:
    get:
      tags:
        - Teams
      summary: Get response time by student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Response time data

  /api/teams/archiv/{TaiGerStaffId}:
    get:
      tags:
        - Teams
      summary: Get archived students for staff
      parameters:
        - name: TaiGerStaffId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Archived students list
        - Teams
      summary: Get statistics overview
      description: Get team statistics overview
      responses:
        '200':
          description: Statistics overview

  /api/teams/statistics/agents:
    get:
      tags:
        - Teams
      summary: Get agent statistics
      description: Get statistics for all agents
      responses:
        '200':
          description: Agent statistics

  /api/teams/statistics/kpi:
    get:
      tags:
        - Teams
      summary: Get KPI statistics
      description: Get key performance indicators
      responses:
        '200':
          description: KPI data

  /api/teams/statistics/response-time:
    get:
      tags:
        - Teams
      summary: Get response time statistics
      responses:
        '200':
          description: Response time statistics

  /api/teams/is-manager:
    get:
      tags:
        - Teams
      summary: Check if user is manager
      responses:
        '200':
          description: Is manager status

  /api/teams/tasks-overview:
    get:
      tags:
        - Teams
      summary: Get tasks overview
      responses:
        '200':
          description: Tasks overview

  /api/teams/response-interval/{studentId}:
    get:
      tags:
        - Teams
      summary: Get response interval by student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Response interval

  /api/teams/response-time/{studentId}:
    get:
      tags:
        - Teams
      summary: Get response time by student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Response time

  /api/teams/archiv/{TaiGerStaffId}:
    get:
      tags:
        - Teams
      summary: Get archived students for staff
      parameters:
        - name: TaiGerStaffId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Archived students

  # ==========================================
  # Courses Routes (Base: /api/courses)
  # ==========================================
  /api/courses/transcript/test:
    get:
      tags:
        - Courses
      summary: Test transcript analyzer
      description: Test endpoint for transcript analyzer (Admin, Manager, Agent, Editor only)
      responses:
        '200':
          description: Test result

  /api/courses/{studentId}:
    get:
      tags:
        - Courses
      summary: Get student courses
      description: Get all courses for a student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student courses
    put:
      tags:
        - Courses
      summary: Update student courses
      description: Update courses for a student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                table_data_string:
                  type: string
                table_data_string_taiger_guided:
                  type: string
                table_data_string_locked:
                  type: boolean
      responses:
        '200':
          description: Courses updated
    delete:
      tags:
        - Courses
      summary: Delete student course
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Course deleted

  /api/courses/transcript/v2/{studentId}/{language}:
    post:
      tags:
        - Courses
      summary: Process transcript
      description: Process student transcript using AI/Python backend
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: language
          in: path
          required: true
          schema:
            type: string
            enum: [en, de, zh]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                requirementIds:
                  type: array
                  items:
                    type: string
                factor:
                  type: number
      responses:
        '200':
          description: Transcript processed

  /api/courses/transcript/v2/{studentId}:
    get:
      tags:
        - Courses
      summary: Download transcript JSON
      description: Download processed transcript data as JSON
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Transcript JSON data

  # ==========================================
  # TaiGer AI Routes (Base: /api/taigerai)
  # ==========================================
  /api/taigerai/general:
    post:
      tags:
        - TaiGer AI
      summary: General AI query
      description: Make a general AI query (streaming response)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                prompt:
                  type: string
                model:
                  type: string
      responses:
        '200':
          description: AI response stream

  /api/taigerai/chat/{studentId}:
    post:
      tags:
        - TaiGer AI
      summary: Chat with AI about student
      description: AI-powered chat about specific student (streaming response)
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
      responses:
        '200':
          description: AI chat response stream

  /api/taigerai/cvmlrl:
    post:
      tags:
        - TaiGer AI
      summary: CV/ML/RL AI assistance
      description: AI assistance for CV, Motivation Letter, Recommendation Letter (streaming response)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                student_input:
                  type: string
                document_requirements:
                  type: string
                editor_requirements:
                  type: string
                  description: JSON string containing gptModel etc.
                program_full_name:
                  type: string
                file_type:
                  type: string
                student_id:
                  type: string
      responses:
        '200':
          description: AI suggestions stream

  /api/taigerai/program/{programId}:
    get:
      tags:
        - TaiGer AI
      summary: AI program analysis
      description: Get AI analysis of a program
      parameters:
        - name: programId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Program AI analysis

  # ==========================================
  # Admissions Routes (Base: /api/admissions)
  # ==========================================
  /api/admissions:
    get:
      tags:
        - Admissions
      summary: Get all admissions
      description: Get list of all admission results with optional filters
      parameters:
        - name: decided
          in: query
          schema:
            type: string
        - name: closed
          in: query
          schema:
            type: string
        - name: admission
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of admissions and program statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                  result:
                    type: array
                    items:
                      type: object

  /api/admissions/overview:
    get:
      tags:
        - Admissions
      summary: Get admissions overview
      description: Get overview statistics of admissions
      responses:
        '200':
          description: Admissions overview
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      admission:
                        type: integer
                      rejection:
                        type: integer
                      pending:
                        type: integer
                      notYetSubmitted:
                        type: integer

  /api/admissions/{studentId}/admission/{fileName}:
    get:
      tags:
        - Admissions
      summary: Get admission letter
      description: Download admission letter file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: fileName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Admission letter file

  /api/admissions/{applications_year}:
    get:
      tags:
        - Admissions
      summary: Get admissions by year
      parameters:
        - name: applications_year
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Admissions for year

  # ==========================================
  # Account Routes (Base: /api/account)
  # ==========================================
  /api/account/files/template:
    get:
      tags:
        - Account
      summary: Get templates
      description: Get list of available templates
      responses:
        '200':
          description: List of templates

  /api/account/files/template/{category_name}:
    get:
      tags:
        - Account
      summary: Download template
      parameters:
        - name: category_name
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Template file
    post:
      tags:
        - Account
      summary: Upload template
      parameters:
        - name: category_name
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Template uploaded
    delete:
      tags:
        - Account
      summary: Delete template
      parameters:
        - name: category_name
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Template deleted

  /api/account/applications/result/v2/{studentId}/{programId}/{admission}:
    post:
      tags:
        - Account
      summary: Update application result (v2)
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: programId
          in: path
          required: true
          schema:
            type: string
        - name: admission
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                closed:
                  type: string
      responses:
        '200':
          description: Application result updated

  /api/account/applications/result/{studentId}/{applicationId}/{programId}/{result}:
    post:
      tags:
        - Account
      summary: Update application result
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
        - name: programId
          in: path
          required: true
          schema:
            type: string
        - name: result
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Application result updated

  /api/account/student/notifications:
    post:
      tags:
        - Account
      summary: Remove student notification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                notification_key:
                  type: string
      responses:
        '200':
          description: Notification removed

  /api/account/agent/notifications:
    post:
      tags:
        - Account
      summary: Remove agent notification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                notification_key:
                  type: string
                student_id:
                  type: string
      responses:
        '200':
          description: Notification removed

  /api/account/survey:
    get:
      tags:
        - Account
      summary: Get academic background
      description: Get user's academic background survey data
      responses:
        '200':
          description: Academic background data
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  survey_link:
                    type: array
                    items:
                      type: object

  /api/account/survey/university/{studentId}:
    post:
      tags:
        - Account
      summary: Update academic background
      description: Update student's academic background information
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                university:
                  type: object
      responses:
        '200':
          description: Academic background updated

  /api/account/survey/language/{studentId}:
    post:
      tags:
        - Account
      summary: Update language skills
      description: Update student's language proficiency
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                language:
                  type: object
      responses:
        '200':
          description: Language skills updated

  /api/account/survey/preferences/{studentId}:
    post:
      tags:
        - Account
      summary: Update application preferences
      description: Update student's application preferences
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                application_preference:
                  type: object
      responses:
        '200':
          description: Preferences updated

  /api/account/profile/officehours/{user_id}:
    put:
      tags:
        - Account
      summary: Update office hours
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                officehours:
                  type: array
                  items:
                    type: object
                timezone:
                  type: string
      responses:
        '200':
          description: Office hours updated

  /api/account/profile/personal-data/{user_id}:
    put:
      tags:
        - Account
      summary: Update personal data
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                personaldata:
                  type: object
      responses:
        '200':
          description: Personal data updated

  /api/account/profile/credentials:
    put:
      tags:
        - Account
      summary: Update credentials
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                credentials:
                  type: object
                  properties:
                    new_password:
                      type: string
      responses:
        '200':
          description: Credentials updated
              type: object
      responses:
        '200':
          description: Office hours updated

  /api/account/profile/{user_id}:
    post:
      tags:
        - Account
      summary: Update personal data
      description: Update user's personal information
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Profile updated

  /api/account/credentials:
    post:
      tags:
        - Account
      summary: Update credentials
      description: Update user login credentials (email/password)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                current_password:
                  type: string
                new_password:
                  type: string
      responses:
        '200':
          description: Credentials updated

  # ==========================================
  # Search Routes (Base: /api/search)
  # ==========================================
  /api/search:
    get:
      tags:
        - Search
      summary: Search query
      description: General search across the platform
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: Search query
      responses:
        '200':
          description: Search results

  /api/search/students:
    get:
      tags:
        - Search
      summary: Search students
      description: Search for students
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student search results

  # ==========================================
  # CRM Routes (Base: /api/crm)
  # ==========================================
  /api/crm/stats:
    get:
      tags:
        - CRM
      summary: Get CRM statistics
      description: Get CRM overview statistics
      responses:
        '200':
          description: CRM statistics

  /api/crm/sales-reps:
    get:
      tags:
        - CRM
      summary: Get sales reps
      description: Get list of sales representatives
      responses:
        '200':
          description: Sales reps list

  /api/crm/leads:
    get:
      tags:
        - CRM
      summary: Get all leads
      description: Get list of all CRM leads
      responses:
        '200':
          description: List of leads

  /api/crm/students/{studentId}/lead:
    get:
      tags:
        - CRM
      summary: Get lead by student ID
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Lead details

  /api/crm/leads/{leadId}:
    get:
      tags:
        - CRM
      summary: Get lead by ID
      parameters:
        - name: leadId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Lead details
    put:
      tags:
        - CRM
      summary: Update lead
      parameters:
        - name: leadId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Lead updated

  /api/crm/meetings:
    get:
      tags:
        - CRM
      summary: Get all meetings
      description: Get list of all CRM meetings
      responses:
        '200':
          description: List of meetings

  /api/crm/meetings/{meetingId}:
    get:
      tags:
        - CRM
      summary: Get meeting by ID
      parameters:
        - name: meetingId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Meeting details
    put:
      tags:
        - CRM
      summary: Update meeting
      parameters:
        - name: meetingId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Meeting updated

  /api/crm/deals:
    get:
      tags:
        - CRM
      summary: Get all deals
      description: Get list of all CRM deals
      responses:
        '200':
          description: List of deals
    post:
      tags:
        - CRM
      summary: Create deal
      description: Create new CRM deal
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Deal created

  /api/crm/deals/{dealId}:
    put:
      tags:
        - CRM
      summary: Update deal
      parameters:
        - name: dealId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deal updated

  /api/crm/instant-invite:
    post:
      tags:
        - CRM
      summary: Instant meeting invite
      description: Send instant meeting invitation via assistant
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Invitation sent

  # ==========================================
  # Permissions Routes (Base: /api/permissions)
  # ==========================================
  /api/permissions/{user_id}:
    get:
      tags:
        - Permissions
      summary: Get user permissions
      description: Get permissions for a specific user (Admin only)
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User permissions
    post:
      tags:
        - Permissions
      summary: Update user permissions
      description: Update user permissions (Admin only)
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Permissions updated

  # ==========================================
  # Audit Routes (Base: /api/audit)
  # ==========================================
  /api/audit:
    get:
      tags:
        - Audit
      summary: Get audit logs
      description: Get system audit logs (Admin, Manager, Agent, Editor)
      parameters:
        - name: startDate
          in: query
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          schema:
            type: string
            format: date-time
        - name: userId
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Audit logs

  # ==========================================
  # User Logs Routes (Base: /api/userlogs)
  # ==========================================
  /api/userlogs:
    get:
      tags:
        - User Logs
      summary: Get user logs
      description: Get activity logs for all users
      responses:
        '200':
          description: User logs

  /api/userlogs/{user_id}:
    get:
      tags:
        - User Logs
      summary: Get user log by ID
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User log details

  # ==========================================
  # Agents Routes (Base: /api/agents)
  # ==========================================
  /api/agents/profile/{agent_id}:
    get:
      tags:
        - Agents
      summary: Get agent profile
      description: Get detailed agent profile information
      parameters:
        - name: agent_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Agent profile
    put:
      tags:
        - Agents
      summary: Update agent profile
      description: Update agent profile information
      parameters:
        - name: agent_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Agent profile updated

  # ==========================================
  # Essay Writers Routes (Base: /api/essay-writers)
  # ==========================================
  /api/essay-writers:
    get:
      tags:
        - Essay Writers
      summary: Get essay writers
      description: Get list of available essay writers/editors
      responses:
        '200':
          description: List of essay writers

  # ==========================================
  # Expenses Routes (Base: /api/expenses)
  # ==========================================
  /api/expenses:
    get:
      tags:
        - Expenses
      summary: Get all expenses
      description: Get list of all expenses
      responses:
        '200':
          description: List of expenses

  /api/expenses/users/{taiger_user_id}:
    get:
      tags:
        - Expenses
      summary: Get user expenses
      description: Get expenses for specific user
      parameters:
        - name: taiger_user_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User expenses

  # ==========================================
  # Notes Routes (Base: /api/notes)
  # ==========================================
  /api/notes/{student_id}:
    get:
      tags:
        - Notes
      summary: Get student notes
      description: Get notes for a specific student
      parameters:
        - name: student_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Student notes
    put:
      tags:
        - Notes
      summary: Update student notes
      description: Update notes for a specific student
      parameters:
        - name: student_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
      responses:
        '200':
          description: Notes updated

  # ==========================================
  # Complaints Routes (Base: /api/complaints)
  # ==========================================
  /api/complaints:
    get:
      tags:
        - Complaints
      summary: Get all complaints
      description: Get list of all complaints/feedback
      responses:
        '200':
          description: List of complaints
    post:
      tags:
        - Complaints
      summary: Create complaint
      description: Create new complaint
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
      responses:
        '201':
          description: Complaint created

  /api/complaints/{ticketId}:
    get:
      tags:
        - Complaints
      summary: Get complaint by ID
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Complaint details
    put:
      tags:
        - Complaints
      summary: Update complaint
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Complaint updated
    delete:
      tags:
        - Complaints
      summary: Delete complaint
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Complaint deleted

  /api/complaints/{ticketId}/{messageId}:
    put:
      tags:
        - Complaints
      summary: Update complaint message
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Message updated
    delete:
      tags:
        - Complaints
      summary: Delete complaint message
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Message deleted

  /api/complaints/{studentId}/{ticketId}/{fileKey}:
    get:
      tags:
        - Complaints
      summary: Get complaint file
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
        - name: fileKey
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File content

  # ==========================================
  # UniAssist Routes (Base: /api/uniassist)
  # ==========================================
  /api/uniassist/{studentId}:
    get:
      tags:
        - UniAssist
      summary: Get UniAssist data
      description: Get UniAssist application data for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: UniAssist data

  # ==========================================
  # Widgets Routes (Base: /api/widgets)
  # ==========================================
  /api/widgets/messages/export/{studentId}:
    get:
      tags:
        - Widgets
      summary: Export messages to PDF
      description: Export student messages as PDF
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: PDF export
          content:
            application/pdf:
              schema:
                type: string
                format: binary

  /api/widgets/transcript/engine/v2/{language}:
    post:
      tags:
        - Widgets
      summary: Process transcript
      description: Process student transcript with AI
      parameters:
        - name: language
          in: path
          required: true
          schema:
            type: string
            enum: [en, de, zh]
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Transcript processed

  /api/widgets/transcript/v2/{adminId}:
    get:
      tags:
        - Widgets
      summary: Download transcript JSON
      description: Download processed transcript JSON
      parameters:
        - name: adminId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Transcript JSON
          content:
            application/json:
              schema:
                type: object

  # ==========================================
  # All Courses Routes (Base: /api/all-courses)
  # ==========================================
  /api/all-courses:
    get:
      tags:
        - All Courses
      summary: Get all courses
      description: Get list of all available courses
      responses:
        '200':
          description: List of courses
    post:
      tags:
        - All Courses
      summary: Create course
      description: Create new course
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Course created

  /api/all-courses/{courseId}:
    get:
      tags:
        - All Courses
      summary: Get course by ID
      parameters:
        - name: courseId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Course details
    put:
      tags:
        - All Courses
      summary: Update course
      parameters:
        - name: courseId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Course updated
    delete:
      tags:
        - All Courses
      summary: Delete course
      parameters:
        - name: courseId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Course deleted

  # ==========================================
  # Course Keywords Routes (Base: /api/course-keywords)
  # ==========================================
  /api/course-keywords:
    get:
      tags:
        - Course Keywords
      summary: Get keyword sets
      description: Get all course keyword sets
      responses:
        '200':
          description: List of keyword sets

  /api/course-keywords/{keywordsSetId}:
    get:
      tags:
        - Course Keywords
      summary: Get keyword set by ID
      parameters:
        - name: keywordsSetId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Keyword set details
    post:
      tags:
        - Course Keywords
      summary: Create keyword set
      parameters:
        - name: keywordsSetId
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Keyword set created
    put:
      tags:
        - Course Keywords
      summary: Update keyword set
      parameters:
        - name: keywordsSetId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Keyword set updated
    delete:
      tags:
        - Course Keywords
      summary: Delete keyword set
      parameters:
        - name: keywordsSetId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Keyword set deleted

  # ==========================================
  # Program Requirements Routes (Base: /api/program-requirements)
  # ==========================================
  /api/program-requirements:
    get:
      tags:
        - Program Requirements
      summary: Get program requirements
      description: Get all program requirements
      responses:
        '200':
          description: List of program requirements

  /api/program-requirements/new:
    post:
      tags:
        - Program Requirements
      summary: Create program requirement
      description: Create new program requirement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Requirement created

  /api/program-requirements/programs-and-keywords:
    get:
      tags:
        - Program Requirements
      summary: Get programs and keywords
      description: Get distinct programs and keyword sets
      responses:
        '200':
          description: Programs and keywords

  /api/program-requirements/{requirementId}:
    get:
      tags:
        - Program Requirements
      summary: Get requirement by ID
      parameters:
        - name: requirementId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Requirement details
    put:
      tags:
        - Program Requirements
      summary: Update requirement
      parameters:
        - name: requirementId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Requirement updated
    delete:
      tags:
        - Program Requirements
      summary: Delete requirement
      parameters:
        - name: requirementId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Requirement deleted

  # ==========================================
  # Portal Informations Routes (Base: /api/portal-informations)
  # ==========================================
  /api/portal-informations/{studentId}:
    get:
      tags:
        - Portal Informations
      summary: Get portal credentials
      description: Get portal login credentials for student
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Portal credentials

  /api/portal-informations/{studentId}/{applicationId}:
    post:
      tags:
        - Portal Informations
      summary: Create portal credentials
      description: Create new portal credentials for application
      parameters:
        - name: studentId
          in: path
          required: true
          schema:
            type: string
        - name: applicationId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Portal credentials created

  # ==========================================
  # Student Applications Routes (Base: /api/student-applications)
  # ==========================================
  /api/student-applications/conflicts:
    get:
      tags:
        - Student Applications
      summary: Get application conflicts
      description: Get conflicting applications
      responses:
        '200':
          description: Application conflicts

  /api/student-applications/deltas:
    get:
      tags:
        - Student Applications
      summary: Get application deltas
      description: Get application changes/deltas
      responses:
        '200':
          description: Application deltas
