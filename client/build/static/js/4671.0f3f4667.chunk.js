"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[4671],{86446:function(e,t,n){var i=n(35531),s=n(18489),r=n(27853),d=n(84531),a=n(78932),o=n(38128),l=n(47313),c=n(44030),p=n(63849),u=n(31616),h=n(43757),_=n(65487),m=n(465),x=n(47939),f=n(93298),j=n(25724),F=n(8061),g=n(51767),y=(n(82423),n(20688)),Z=n(51426),v=n(46417),b=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var d=arguments.length,a=new Array(d),o=0;o<d;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:null,isLoaded:e.props.isLoaded,data:null,success:e.props.success,students:e.props.students,doc_thread_id:"",student_id:"",program_id:"",SetAsFinalFileModel:!1,isFinalVersion:!1,status:"",res_status:0,res_modal_message:"",res_modal_status:0},e.closeSetAsFinalFileModelWindow=function(){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{SetAsFinalFileModel:!1})}))},e.ConfirmSetAsFinalFileHandler=function(){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{isLoaded:!1})})),(0,Z.lk)(e.state.doc_thread_id,e.state.student_id,e.state.program_id).then((function(t){var n=t.data,r=n.data,d=n.success,a=t.status;if(d){var o=(0,i.Z)(e.state.students),l=o.findIndex((function(t){return t._id.toString()===e.state.student_id}));if(e.state.program_id){var c=o[l].applications.findIndex((function(t){return t.programId._id.toString()===e.state.program_id})),p=o[l].applications[c].doc_modification_thread.findIndex((function(t){return t.doc_thread_id._id.toString()===e.state.doc_thread_id}));o[l].applications[c].doc_modification_thread[p].isFinalVersion=r.isFinalVersion,o[l].applications[c].doc_modification_thread[p].updatedAt=r.updatedAt,o[l].applications[c].doc_modification_thread[p].doc_thread_id.updatedAt=r.updatedAt,console.log(o[l].applications[c].doc_modification_thread[p])}else{var u=o[l].generaldocs_threads.findIndex((function(t){return t.doc_thread_id._id.toString()===e.state.doc_thread_id}));o[l].generaldocs_threads[u].isFinalVersion=r.isFinalVersion,o[l].generaldocs_threads[u].updatedAt=r.updatedAt,o[l].generaldocs_threads[u].doc_thread_id.updatedAt=r.updatedAt}e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{docName:"",isLoaded:!0,students:o,success:d,SetAsFinalFileModel:!1,isFinalVersion:!1,res_modal_status:a})}))}else{var h=t.data.message;e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{isLoaded:!0,res_modal_message:h,res_modal_status:a})}))}}),(function(t){e.setState({error:t})}))},e.handleAsFinalFile=function(t,n,i,r,d){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{doc_thread_id:t,student_id:n,program_id:i,docName:r,SetAsFinalFileModel:!0,isFinalVersion:d})}))},e.ConfirmError=function(){e.setState((function(e){return(0,s.Z)((0,s.Z)({},e),{},{res_modal_status:0,res_modal_message:""})}))},e}return(0,d.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.res_modal_status,i=t.res_modal_message,s=t.isLoaded;if(!s&&!this.state.students)return(0,v.jsx)("div",{style:g.nT,children:(0,v.jsx)(c.Z,{animation:"border",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden"})})});var r=this.state.students.map((function(t,n){return(0,v.jsx)(j.Z,{role:e.props.user.role,user:e.props.user,student:t,isDashboard:!0,handleAsFinalFile:e.handleAsFinalFile},n)})),d=this.state.students.map((function(t,n){return(0,v.jsx)(F.Z,{role:e.props.user.role,user:e.props.user,student:t,isDashboard:!0,handleAsFinalFile:e.handleAsFinalFile},n)}));return(0,v.jsxs)(v.Fragment,{children:[n>=400&&(0,v.jsx)(y.Z,{ConfirmError:this.ConfirmError,res_modal_status:n,res_modal_message:i}),(0,v.jsx)(p.Z,{children:(0,v.jsx)(u.Z,{children:(0,v.jsxs)(h.Z,{defaultActiveKey:"open",fill:!0,justify:!0,children:[(0,v.jsx)(_.Z,{eventKey:"open",title:"Open",children:(0,v.jsxs)(m.Z,{responsive:!0,bordered:!0,hover:!0,className:"my-0 mx-0",variant:"dark",text:"light",size:"sm",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("th",{}),(0,v.jsx)("th",{children:"First-, Last Name"}),("Admin"===this.props.user.role||"Editor"===this.props.user.role||"Agent"===this.props.user.role)&&(0,v.jsx)("th",{children:"Action"})]}),window.cvmlrllist.map((function(e,t){return(0,v.jsx)("th",{children:e.name},t)}))]})}),(0,v.jsx)("tbody",{children:r})]})}),(0,v.jsxs)(_.Z,{eventKey:"closed",title:"Closed",children:[(0,v.jsxs)(m.Z,{responsive:!0,bordered:!0,hover:!0,className:"my-0 mx-0",variant:"dark",text:"light",size:"sm",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{}),(0,v.jsx)("th",{children:"First-, Last Name"}),("Admin"===this.props.user.role||"Editor"===this.props.user.role||"Agent"===this.props.user.role)&&(0,v.jsx)("th",{children:"Action"}),window.cvmlrlclosedlist.map((function(e,t){return(0,v.jsx)("th",{children:e.name},t)}))]})}),(0,v.jsx)("tbody",{children:d})]}),(0,v.jsx)(p.Z,{className:"mt-4",children:(0,v.jsx)("p",{children:"Note: if the documents are not closed but locate here, it is becaue the applications are already submitted. The documents can safely closed eventually."})})]})]})})}),(0,v.jsxs)(x.Z,{show:this.state.SetAsFinalFileModel,onHide:this.closeSetAsFinalFileModelWindow,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,v.jsx)(x.Z.Header,{children:(0,v.jsx)(x.Z.Title,{id:"contained-modal-title-vcenter",children:"Warning"})}),(0,v.jsxs)(x.Z.Body,{children:["Do you want to set ",this.state.docName," as"," ",this.state.isFinalVersion?"open":"final"," for student?"]}),(0,v.jsxs)(x.Z.Footer,{children:[(0,v.jsx)(f.Z,{disabled:!s,onClick:this.ConfirmSetAsFinalFileHandler,children:"Yes"}),(0,v.jsx)(f.Z,{onClick:this.closeSetAsFinalFileModelWindow,children:"No"}),!s&&(0,v.jsx)("div",{style:g.nT,children:(0,v.jsx)(c.Z,{animation:"border",role:"status",children:(0,v.jsx)("span",{className:"visually-hidden"})})})]})]})]})}}]),n}(l.Component);t.Z=b},25724:function(e,t,n){var i=n(27853),s=n(84531),r=n(78932),d=n(38128),a=n(47313),o=n(57864),l=n(37062),c=n(51767),p=n(46417),u=function(e){(0,r.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var s=arguments.length,r=new Array(s),d=0;d<s;d++)r[d]=arguments[d];return(e=t.call.apply(t,[this].concat(r))).handleAsFinalFileThread=function(t,n,i,s,r){e.props.handleAsFinalFile(t,n,i,s,r)},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=new Date,n=p.Fragment,i=(0,p.jsx)(p.Fragment,{}),s=p.Fragment,r=(0,p.jsx)(p.Fragment,{});return n=this.props.student.generaldocs_threads&&this.props.student.generaldocs_threads.map((function(n,i){return(0,p.jsx)("tr",{children:!n.isFinalVersion&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("td",{}),(0,p.jsx)("td",{children:(0,p.jsx)(l.Z,{to:"/student-database/"+e.props.student._id+"/CV_ML_RL",style:{textDecoration:"none"},children:(0,p.jsx)("p",{className:"text-light",children:(0,p.jsxs)("b",{children:[e.props.student.firstname," ",e.props.student.lastname]})})})}),("Admin"===e.props.role||"Editor"===e.props.role||"Agent"===e.props.role)&&(n.isFinalVersion?(0,p.jsx)("td",{children:(0,p.jsx)(o.OwP,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.handleAsFinalFileThread(n.doc_thread_id._id,e.props.student._id,null,n.doc_thread_id.file_type,n.isFinalVersion)}})}):(0,p.jsx)("td",{children:(0,p.jsx)(o.bzc,{size:24,style:{cursor:"pointer"},title:"Set as final version",onClick:function(){return e.handleAsFinalFileThread(n.doc_thread_id._id,e.props.student._id,null,n.doc_thread_id.file_type,n.isFinalVersion)}})})),(0,c.s3)(e.props.user,n),(0,p.jsx)("td",{children:(0,p.jsx)(l.Z,{to:"/document-modification/"+n.doc_thread_id._id,style:{textDecoration:"none"},className:"text-info",children:n.doc_thread_id.file_type})}),(0,p.jsx)("td",{children:(0,c.Ny)(n.updatedAt)}),(0,p.jsx)("td",{children:!n.isFinalVersion&&(0,c.Vb)(n.updatedAt,t)}),(0,p.jsx)("td",{}),(0,p.jsx)("td",{})]})},i)})),s=this.props.student.applications&&this.props.student.applications.map((function(n,i){return n.doc_modification_thread.map((function(i,s){return(0,p.jsx)("tr",{children:"O"===n.decided&&!i.isFinalVersion&&"O"!==n.closed&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("td",{}),(0,p.jsx)("td",{children:(0,p.jsx)(l.Z,{to:"/student-database/"+e.props.student._id+"/CV_ML_RL",style:{textDecoration:"none"},children:(0,p.jsx)("p",{className:"text-light",children:(0,p.jsxs)("b",{children:[e.props.student.firstname," ",e.props.student.lastname]})})})}),("Admin"===e.props.role||"Editor"===e.props.role||"Agent"===e.props.role)&&(i.isFinalVersion?(0,p.jsx)("td",{children:(0,p.jsx)(o.OwP,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.handleAsFinalFileThread(i.doc_thread_id._id,e.props.student._id,n.programId._id,i.doc_thread_id.file_type,i.isFinalVersion)}})}):(0,p.jsx)("td",{children:(0,p.jsx)(o.bzc,{size:24,style:{cursor:"pointer"},title:"Set as final version",onClick:function(){return e.handleAsFinalFileThread(i.doc_thread_id._id,e.props.student._id,n.programId._id,i.doc_thread_id.file_type,i.isFinalVersion)}})})),(0,c.s3)(e.props.user,i),(0,p.jsx)("td",{children:(0,p.jsxs)(l.Z,{to:"/document-modification/"+i.doc_thread_id._id,style:{textDecoration:"none"},className:"text-info",children:[i.doc_thread_id.file_type," - ",n.programId.school," - ",n.programId.program_name]})}),(0,p.jsx)("td",{children:(0,c.Ny)(i.updatedAt)}),(0,p.jsx)("td",{children:!i.isFinalVersion&&(0,c.Vb)(i.updatedAt,t)}),(0,p.jsxs)("td",{children:[e.props.student.application_preference&&e.props.student.application_preference.expected_application_date&&e.props.student.application_preference.expected_application_date+"-",n.programId.application_deadline]}),(0,p.jsx)("td",{children:"O"===n.closed?"-":n.programId.application_deadline?e.props.student.application_preference&&e.props.student.application_preference.expected_application_date&&(0,c.Vb)(t,e.props.student.application_preference.expected_application_date+"-"+n.programId.application_deadline):"-"})]})},s)}))})),(0,p.jsxs)(p.Fragment,{children:[i,r,n,s]})}}]),n}(a.Component);t.Z=u},8061:function(e,t,n){var i=n(27853),s=n(84531),r=n(78932),d=n(38128),a=n(47313),o=n(3394),l=n(5958),c=n(37062),p=n(57864),u=n(51767),h=n(46417),_=function(e){(0,r.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var s=arguments.length,r=new Array(s),d=0;d<s;d++)r[d]=arguments[d];return(e=t.call.apply(t,[this].concat(r))).handleAsFinalFileThread=function(t,n,i,s,r){e.props.handleAsFinalFile(t,n,i,s,r)},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=(new Date,function(e,t){return t.isFinalVersion?(0,h.jsx)("td",{className:"mb-1 text-info",children:(0,h.jsx)(o.cfq,{size:24,color:"limegreen",title:"Complete"})}):void 0!==t.latest_message_left_by_id&&""!==t.latest_message_left_by_id||"Student"===e.role?e._id.toString()===t.latest_message_left_by_id?(0,h.jsx)("td",{className:"mb-1 text-info",children:(0,h.jsx)(p.znh,{size:24,color:"lightgray",title:"Waiting feedback"})}):(0,h.jsx)("td",{className:"mb-1 text-info",children:(0,h.jsx)(l.XYE,{size:24,color:"red",title:"New Message"})}):(0,h.jsx)("td",{className:"mb-1 text-info",children:(0,h.jsx)(p.znh,{size:24,color:"lightgray",title:"Waiting feedback"})})}),n=h.Fragment,i=(0,h.jsx)(h.Fragment,{}),s=h.Fragment,r=(0,h.jsx)(h.Fragment,{});return n=this.props.student.generaldocs_threads&&this.props.student.generaldocs_threads.map((function(n,i){return(0,h.jsx)("tr",{children:n.isFinalVersion&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("td",{}),(0,h.jsx)("td",{children:(0,h.jsx)(c.Z,{to:"/student-database/"+e.props.student._id+"/CV_ML_RL",style:{textDecoration:"none"},children:(0,h.jsx)("p",{className:"text-light",children:(0,h.jsxs)("b",{children:[e.props.student.firstname," ",e.props.student.lastname]})})})}),("Admin"===e.props.role||"Editor"===e.props.role||"Agent"===e.props.role)&&(n.isFinalVersion?(0,h.jsx)("td",{children:(0,h.jsx)(p.OwP,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.handleAsFinalFileThread(n.doc_thread_id._id,e.props.student._id,null,n.doc_thread_id.file_type,n.isFinalVersion)}})}):(0,h.jsx)("td",{children:(0,h.jsx)(p.bzc,{size:24,style:{cursor:"pointer"},title:"Set as final version",onClick:function(){return e.handleAsFinalFileThread(n.doc_thread_id._id,e.props.student._id,null,n.doc_thread_id.file_type,n.isFinalVersion)}})})),t(e.props.user,n),(0,h.jsx)("td",{children:(0,h.jsx)(c.Z,{to:"/document-modification/"+n.doc_thread_id._id,style:{textDecoration:"none"},className:"text-info",children:n.doc_thread_id.file_type})}),(0,h.jsx)("td",{children:(0,u.Ny)(n.updatedAt)}),(0,h.jsx)("td",{}),(0,h.jsx)("td",{children:"-"})]})},i)})),s=this.props.student.applications&&this.props.student.applications.map((function(n,i){return n.doc_modification_thread.map((function(i,s){return(0,h.jsx)("tr",{children:("O"===n.decided&&i.isFinalVersion||"O"===n.closed)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("td",{}),(0,h.jsx)("td",{children:(0,h.jsx)(c.Z,{to:"/student-database/"+e.props.student._id+"/CV_ML_RL",style:{textDecoration:"none"},children:(0,h.jsx)("p",{className:"text-light",children:(0,h.jsxs)("b",{children:[e.props.student.firstname," ",e.props.student.lastname]})})})}),("Admin"===e.props.role||"Editor"===e.props.role||"Agent"===e.props.role)&&(i.isFinalVersion?(0,h.jsx)("td",{children:(0,h.jsx)(p.OwP,{size:24,color:"red",title:"Un do Final Version",style:{cursor:"pointer"},onClick:function(){return e.handleAsFinalFileThread(i.doc_thread_id._id,e.props.student._id,n.programId._id,i.doc_thread_id.file_type,i.isFinalVersion)}})}):(0,h.jsx)("td",{children:(0,h.jsx)(p.bzc,{size:24,style:{cursor:"pointer"},title:"Set as final version",onClick:function(){return e.handleAsFinalFileThread(i.doc_thread_id._id,e.props.student._id,n.programId._id,i.doc_thread_id.file_type,i.isFinalVersion)}})})),t(e.props.user,i),(0,h.jsx)("td",{children:(0,h.jsxs)(c.Z,{to:"/document-modification/"+i.doc_thread_id._id,style:{textDecoration:"none"},className:"text-info",children:[i.doc_thread_id.file_type," - ",n.programId.school," - ",n.programId.program_name]})}),(0,h.jsx)("td",{children:(0,u.Ny)(i.updatedAt)}),(0,h.jsxs)("td",{children:[e.props.student.application_preference&&e.props.student.application_preference.expected_application_date&&e.props.student.application_preference.expected_application_date+"-",n.programId.application_deadline]}),(0,h.jsx)("td",{children:"O"===n.closed?"CLOSE":"OPEN"})]})},s)}))})),(0,h.jsxs)(h.Fragment,{children:[i,r,n,s]})}}]),n}(a.Component);t.Z=_},65832:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(18489),s=n(83738),r=n(46123),d=n.n(r),a=n(47313),o=n(68524),l=n(28864),c=n(96205),p=n(46417),u=["bsPrefix","className","variant","as"],h=a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.variant,l=e.as,c=void 0===l?"img":l,h=(0,s.Z)(e,u),_=(0,o.vE)(n,"card-img");return(0,p.jsx)(c,(0,i.Z)({ref:t,className:d()(a?"".concat(_,"-").concat(a):_,r)},h))}));h.displayName="CardImg";var _=h,m=n(15614),x=["bsPrefix","className","as"],f=a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.as,c=void 0===l?"div":l,u=(0,s.Z)(e,x),h=(0,o.vE)(n,"card-header"),_=(0,a.useMemo)((function(){return{cardHeaderBsPrefix:h}}),[h]);return(0,p.jsx)(m.Z.Provider,{value:_,children:(0,p.jsx)(c,(0,i.Z)((0,i.Z)({ref:t},u),{},{className:d()(r,h)}))})}));f.displayName="CardHeader";var j=f,F=["bsPrefix","className","bg","text","border","body","children","as"],g=(0,c.Z)("h5"),y=(0,c.Z)("h6"),Z=(0,l.Z)("card-body"),v=(0,l.Z)("card-title",{Component:g}),b=(0,l.Z)("card-subtitle",{Component:y}),A=(0,l.Z)("card-link",{Component:"a"}),N=(0,l.Z)("card-text",{Component:"p"}),V=(0,l.Z)("card-footer"),C=(0,l.Z)("card-img-overlay"),S=a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.bg,l=e.text,c=e.border,u=e.body,h=e.children,_=e.as,m=void 0===_?"div":_,x=(0,s.Z)(e,F),f=(0,o.vE)(n,"card");return(0,p.jsx)(m,(0,i.Z)((0,i.Z)({ref:t},x),{},{className:d()(r,f,a&&"bg-".concat(a),l&&"text-".concat(l),c&&"border-".concat(c)),children:u?(0,p.jsx)(Z,{children:h}):h}))}));S.displayName="Card",S.defaultProps={body:!1};var k=Object.assign(S,{Img:_,Title:v,Subtitle:b,Body:Z,Link:A,Text:N,Header:j,Footer:V,ImgOverlay:C})},15614:function(e,t,n){var i=n(47313).createContext(null);i.displayName="CardHeaderContext",t.Z=i},46682:function(e,t,n){n.d(t,{Ed:function(){return r},UI:function(){return s},XW:function(){return d}});var i=n(47313);function s(e,t){var n=0;return i.Children.map(e,(function(e){return i.isValidElement(e)?t(e,n++):e}))}function r(e,t){var n=0;i.Children.forEach(e,(function(e){i.isValidElement(e)&&t(e,n++)}))}function d(e,t){return i.Children.toArray(e).some((function(e){return i.isValidElement(e)&&e.type===t}))}}}]);