"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[804],{50099:function(e,s,n){var t=n(35531),r=n(27853),i=n(84531),a=n(78932),d=n(38128),l=n(47313),c=n(73158),o=n(65832),u=n(62396),h=n(29678),Z=n.n(h),p=n(54991),x=n(12401),j=n(46417),f=function(e){(0,a.Z)(n,e);var s=(0,d.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=s.call.apply(s,[this].concat(i))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return(0,i.Z)(n,[{key:"render",value:function(){var e,s,n,r,i,a=this,d=[];return this.state.isOption&&(n=(0,j.jsx)("div",{className:"card-header-right",children:(0,j.jsxs)(c.Z,{alignRight:!0,className:"btn-group card-option",children:[(0,j.jsx)(c.Z.Toggle,{id:"dropdown-basic",className:"btn-icon",children:(0,j.jsx)("i",{className:"feather icon-more-horizontal"})}),(0,j.jsxs)(c.Z.Menu,{as:"ul",className:"list-unstyled card-option",children:[(0,j.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{fullCard:!e.fullCard}}))},children:[(0,j.jsx)("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),(0,j.jsxs)("a",{href:x.Z.BLANK_LINK,children:[" ",this.state.fullCard?"Restore":"Maximize"," "]})]}),(0,j.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:function(){a.setState((function(e){return{collapseCard:!e.collapseCard}}))},children:[(0,j.jsx)("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),(0,j.jsxs)("a",{href:x.Z.BLANK_LINK,children:[" ",this.state.collapseCard?"Expand":"Collapse"," "]})]}),(0,j.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler,children:[(0,j.jsx)("i",{className:"feather icon-refresh-cw"}),(0,j.jsx)("a",{href:x.Z.BLANK_LINK,children:" Reload "})]}),(0,j.jsxs)(c.Z.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler,children:[(0,j.jsx)("i",{className:"feather icon-trash"}),(0,j.jsx)("a",{href:x.Z.BLANK_LINK,children:" Remove "})]})]})]})})),r=(0,j.jsxs)(o.Z.Header,{children:[(0,j.jsx)(o.Z.Title,{as:"h5",children:this.props.title}),n]}),this.state.fullCard&&(d=[].concat((0,t.Z)(d),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(d=[].concat((0,t.Z)(d),["card-load"]),s=(0,j.jsx)("div",{className:"card-loader",children:(0,j.jsx)("i",{className:"pct-loader1 anim-rotate"})})),this.state.cardRemove&&(d=[].concat((0,t.Z)(d),["d-none"])),this.props.cardClass&&(d=[].concat((0,t.Z)(d),[this.props.cardClass])),i=(0,j.jsxs)(o.Z,{className:d.join(" "),style:e,children:[r,(0,j.jsx)(u.Z,{in:!this.state.collapseCard,children:(0,j.jsx)("div",{children:(0,j.jsx)(o.Z.Body,{children:this.props.children})})}),s]}),(0,j.jsx)(p.Z,{children:i})}}]),n}(l.Component);s.Z=Z()(f)},30804:function(e,s,n){n.r(s),n.d(s,{default:function(){return y}});var t=n(18489),r=n(23430),i=n(47313),a=n(44030),d=n(63849),l=n(31616),c=n(65832),o=n(93298),u=n(67203),h=n(47939),Z=n(53537),p=n(54991),x=n(51767),j=n(66417),f=(n(31257),n(51426)),m=n(46417);function y(e){var s=(0,i.useState)({error:null,isLoaded:!1,coursesdata:{},analysis:{},confirmModalWindowOpen:!1,analysisSuccessModalWindowOpen:!1,success:!1,student:null,file:"",study_group:"",analyzed_course:"",expand:!0,isAnalysing:!1,isUpdating:!1,isDownloading:!1,res_status:0}),n=(0,r.Z)(s,2),y=n[0],g=n[1];(0,i.useEffect)((function(){var s=e.match.params.student_id?e.match.params.student_id:e.user._id.toString();(0,f.TE)(s).then((function(e){var s=e.data,n=s.data,r=s.success,i=e.status;if(r){var a=n.table_data_string?JSON.parse(n.table_data_string):{};g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,updatedAt:n.updatedAt,coursesdata:a,analysis:n.analysis,student:n.student_id,success:r,res_status:i})}))}else g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,res_status:i})}))}),(function(e){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,error:!0})}))}))}),[]);var v=(0,i.useState)([{course_chinese:"\u96fb\u5b50\u5b78",course_english:"Electronics",credits:"3",grades:"B"},{course_chinese:"\u8cc7\u6599\u7d50\u69cb",course_english:"Data structure",credits:"3",grades:"A"}]),_=(0,r.Z)(v,2),C=(_[0],_[1],function(){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{confirmModalWindowOpen:!1})}))}),N=function(){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{analysisSuccessModalWindowOpen:!1})}))},b=[(0,t.Z)((0,t.Z)({},(0,Z.vU)("course_chinese",Z.hg)),{},{title:"Courses Name Chinese"}),(0,t.Z)((0,t.Z)({},(0,Z.vU)("course_english",Z.hg)),{},{title:"Courses Name English"}),(0,t.Z)((0,t.Z)({},(0,Z.vU)("credits",Z.hg)),{},{title:"Credits"}),(0,t.Z)((0,t.Z)({},(0,Z.vU)("grades",Z.hg)),{},{title:"Grades"})];return y.isLoaded?y.res_status>=400?(0,m.jsx)(j.Z,{res_status:y.res_status}):(0,m.jsxs)(p.Z,{children:[(0,m.jsx)(d.Z,{className:"sticky-top ",children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(c.Z,{className:"mb-2 mx-0",bg:"dark",text:"light",children:(0,m.jsx)(c.Z.Header,{text:"dark",children:(0,m.jsx)(c.Z.Title,{children:(0,m.jsx)(d.Z,{children:(0,m.jsxs)(l.Z,{className:"my-0 mx-0 text-light",children:[y.student.firstname," ",y.student.lastname," ","Courses"]})})})})})})}),(0,m.jsx)(d.Z,{children:(0,m.jsxs)(l.Z,{sm:12,children:[(0,m.jsx)(c.Z,{className:"mb-2 mx-0",children:(0,m.jsxs)(c.Z.Body,{children:[(0,m.jsx)(d.Z,{children:(0,m.jsxs)(l.Z,{children:[(0,m.jsx)("p",{children:"Please fill the courses you have taken. (Ignore if you are high school student)"}),(0,m.jsxs)("p",{children:[(0,m.jsx)("b",{children:"Only Bachelor's courses "}),"are considered in this table."]})]})}),(0,m.jsx)("br",{}),(0,m.jsx)(Z.co,{height:6e3,disableContextMenu:!0,disableExpandSelection:!1,headerRowHeight:30,rowHeight:25,value:y.coursesdata,autoAddRow:!0,onChange:function(e){g((function(s){return(0,t.Z)((0,t.Z)({},s),{},{coursesdata:e})}))},columns:b}),(0,m.jsx)(d.Z,{className:"my-2",children:(0,m.jsxs)(l.Z,{children:["Last update at: ",(0,x.Ny)(y.updatedAt)]})}),(0,m.jsx)(d.Z,{className:"mx-1",children:(0,m.jsx)(o.Z,{onClick:function(){var e=JSON.stringify(y.coursesdata);g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isUpdating:!0})})),(0,f.Cj)(y.student._id.toString(),{student_id:y.student._id.toString(),name:y.student.firstname,table_data_string:e}).then((function(e){var s=e.data,n=s.data,r=s.success,i=e.status;if(r){var a=JSON.parse(n.table_data_string);g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,updatedAt:n.updatedAt,coursesdata:a,confirmModalWindowOpen:!0,success:r,isUpdating:!1,res_status:i})}))}else g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,isUpdating:!1,res_status:i})}))}),(function(e){console.log(e),g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,isUpdating:!1})})),alert("Course Update failed. Please try later.")}))},disabled:y.isUpdating,children:y.isUpdating?"Updating":"Update"})})]})}),"Guest"===e.user.role&&(0,m.jsx)(c.Z,{className:"mb-2 mx-0",children:(0,m.jsxs)(c.Z.Body,{children:[(0,m.jsx)(d.Z,{children:"Do you want to see result? Contact our consultant!"}),(0,m.jsx)("br",{})]})}),("Admin"===e.user.role||"Agent"===e.user.role)&&(0,m.jsx)(c.Z,{className:"mb-2 mx-0",children:(0,m.jsxs)(c.Z.Body,{children:[(0,m.jsx)(d.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsx)("h4",{children:"Analyser"})})}),(0,m.jsx)("br",{}),(0,m.jsx)(d.Z,{children:(0,m.jsx)(l.Z,{children:(0,m.jsxs)(u.Z.Group,{controlId:"study_group",children:[(0,m.jsx)(u.Z.Label,{children:"Select target group"}),(0,m.jsxs)(u.Z.Control,{as:"select",onChange:function(e){return function(e){e.preventDefault();var s=e.target.value;g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{study_group:s})}))}(e)},children:[(0,m.jsx)("option",{value:"",children:"Select Study Group"}),x.Ue.map((function(e,s){return(0,m.jsx)("option",{value:e.key,children:e.value},s)}))]})]})})}),(0,m.jsx)("br",{}),(0,m.jsx)(d.Z,{className:"mx-1",children:(0,m.jsx)(o.Z,{onClick:function(){""!==y.study_group?(g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isAnalysing:!0})})),(0,f.fA)(y.student._id.toString(),y.study_group).then((function(e){var s=e.data,n=s.data,r=s.success,i=e.status;g(r?function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,analysis:n,analysisSuccessModalWindowOpen:!0,success:r,isAnalysing:!1,res_status:i})}:function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,isAnalysing:!1,res_status:i})})}),(function(e){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isLoaded:!0,isAnalysing:!1})})),alert("Make sure that you updated your courses and your credits are number!")}))):alert("Please select study group")},disabled:y.isAnalysing,children:y.isAnalysing?"Analysing":"Analyse"})}),(0,m.jsx)(d.Z,{className:"my-2"}),(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(l.Z,{md:2,children:(0,m.jsx)("p",{children:y.analysis&&y.analysis.isAnalysed?(0,m.jsx)(o.Z,{onClick:function(){g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isDownloading:!0})})),(0,f.Jd)(y.student._id.toString()).then((function(e){var s=e.headers["content-disposition"].split('"')[1],n=e.data;if(0!==n.size){var r=s.split(".");if("pdf"===(r=r.pop())){var i=window.URL.createObjectURL(new Blob([n],{type:"application/pdf"}));window.open(i)}else{var a=window.URL.createObjectURL(new Blob([n])),d=document.createElement("a");d.href=a,d.setAttribute("download",s),document.body.appendChild(d),d.click(),d.parentNode.removeChild(d),g((function(e){return(0,t.Z)((0,t.Z)({},e),{},{isDownloading:!1})}))}}}))},disabled:y.isDownloading,children:"Download"}):"No analysis yet"})})," ",(0,m.jsx)(l.Z,{children:(0,m.jsxs)("p",{className:"my-2",children:["Last analysis at:"," ",y.analysis?(0,x.Ny)(y.analysis.updatedAt):""]})})]}),(0,m.jsx)("br",{})]})})]})}),(0,m.jsxs)(h.Z,{show:y.confirmModalWindowOpen,onHide:C,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,m.jsx)(h.Z.Header,{children:(0,m.jsx)(h.Z.Title,{id:"contained-modal-title-vcenter",children:"Confirmation"})}),(0,m.jsx)(h.Z.Body,{children:"Update transcript successfully"}),(0,m.jsx)(h.Z.Footer,{children:(0,m.jsx)(o.Z,{onClick:C,children:"Close"})})]}),(0,m.jsxs)(h.Z,{show:y.analysisSuccessModalWindowOpen,onHide:N,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,m.jsx)(h.Z.Header,{children:(0,m.jsx)(h.Z.Title,{id:"contained-modal-title-vcenter",children:"Success"})}),(0,m.jsx)(h.Z.Body,{children:"Transcript analysed successfully!"}),(0,m.jsx)(h.Z.Footer,{children:(0,m.jsx)(o.Z,{onClick:N,children:"Close"})})]})]}):(0,m.jsx)("div",{style:x.nT,children:(0,m.jsx)(a.Z,{animation:"border",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden"})})})}},66417:function(e,s,n){n.d(s,{Z:function(){return v}});var t=n(27853),r=n(84531),i=n(78932),a=n(38128),d=n(47313),l=n(63849),c=n(31616),o=n(50099),u=n(54991),h=n(29021),Z=n(94611),p=n(86450),x=(n(89351),n(46417)),j=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,x.jsx)(u.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z,{children:"Session is expired. Please refresh the page and login again."})})})})}}]),n}(d.Component),f=j,m=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,x.jsx)(u.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z,{children:"Too many requests. Please try later."})})})})}}]),n}(d.Component),y=m,g=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return 401===this.props.res_status?(0,x.jsx)(f,{}):403===this.props.res_status?(0,x.jsx)(p.Z,{}):404===this.props.res_status?(0,x.jsx)(h.Z,{}):408===this.props.res_status?(0,x.jsx)(Z.Z,{}):429===this.props.res_status?(0,x.jsx)(y,{}):this.props.res_status>=500?(0,x.jsx)(u.Z,{children:(0,x.jsx)(l.Z,{children:(0,x.jsx)(c.Z,{children:(0,x.jsx)(o.Z,{children:"Server problem. Please try later."})})})}):void 0}}]),n}(d.Component),v=g},29021:function(e,s,n){var t=n(27853),r=n(84531),i=n(78932),a=n(38128),d=n(47313),l=n(63849),c=n(31616),o=n(65832),u=n(54991),h=n(46417),Z=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(o.Z,{children:(0,h.jsx)(o.Z.Body,{children:(0,h.jsx)("h4",{children:"Page Not Found!"})})})})})})}}]),n}(d.Component);s.Z=Z},94611:function(e,s,n){var t=n(27853),r=n(84531),i=n(78932),a=n(38128),d=n(47313),l=n(63849),c=n(31616),o=n(50099),u=n(54991),h=n(46417),Z=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(o.Z,{children:"Time out error. Please login again!"})})})})}}]),n}(d.Component);s.Z=Z},86450:function(e,s,n){var t=n(27853),r=n(84531),i=n(78932),a=n(38128),d=n(47313),l=n(63849),c=n(31616),o=n(50099),u=n(54991),h=n(46417),Z=function(e){(0,i.Z)(n,e);var s=(0,a.Z)(n);function n(){return(0,t.Z)(this,n),s.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(u.Z,{children:(0,h.jsx)(l.Z,{children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(o.Z,{children:"\u8acb\u8ddf\u60a8\u7684TaiGer\u9867\u554f\u806f\u7e6b"})})})})}}]),n}(d.Component);s.Z=Z}}]);